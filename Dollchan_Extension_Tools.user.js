// ==UserScript==
// @name            Dollchan Extension Tools
// @version         15.1.28.0
// @namespace       http://www.freedollchan.org/scripts/*
// @author          Sthephan Shinkufag @ FreeDollChan
// @copyright       (c) 2015 Dollchan Extension Tools Team. See the LICENSE file for license rights and limitations (MIT).
// @description     Doing some profit for imageboards
// @icon            https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Icon.png
// @updateURL       https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.meta.js
// @run-at          document-start
// @grant           GM_getValue
// @grant           GM_setValue
// @grant           GM_deleteValue
// @grant           GM_openInTab
// @grant           GM_xmlhttpRequest
// @grant           unsafeWindow
// @include         *
// ==/UserScript==
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(global){"use strict";if(global._babelPolyfill){throw new Error("only one instance of babel/polyfill is allowed")}global._babelPolyfill=true;require("core-js/shim");require("regenerator-babel/runtime")}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"core-js/shim":2,"regenerator-babel/runtime":3}],2:[function(require,module,exports){!function(global,framework,undefined){"use strict";var OBJECT="Object",FUNCTION="Function",ARRAY="Array",STRING="String",NUMBER="Number",REGEXP="RegExp",DATE="Date",MAP="Map",SET="Set",WEAKMAP="WeakMap",WEAKSET="WeakSet",SYMBOL="Symbol",PROMISE="Promise",MATH="Math",ARGUMENTS="Arguments",PROTOTYPE="prototype",CONSTRUCTOR="constructor",TO_STRING="toString",TO_STRING_TAG=TO_STRING+"Tag",TO_LOCALE="toLocaleString",HAS_OWN="hasOwnProperty",FOR_EACH="forEach",ITERATOR="iterator",FF_ITERATOR="@@"+ITERATOR,PROCESS="process",CREATE_ELEMENT="createElement",Function=global[FUNCTION],Object=global[OBJECT],Array=global[ARRAY],String=global[STRING],Number=global[NUMBER],RegExp=global[REGEXP],Date=global[DATE],Map=global[MAP],Set=global[SET],WeakMap=global[WEAKMAP],WeakSet=global[WEAKSET],Symbol=global[SYMBOL],Math=global[MATH],TypeError=global.TypeError,RangeError=global.RangeError,setTimeout=global.setTimeout,setImmediate=global.setImmediate,clearImmediate=global.clearImmediate,parseInt=global.parseInt,isFinite=global.isFinite,process=global[PROCESS],nextTick=process&&process.nextTick,document=global.document,html=document&&document.documentElement,navigator=global.navigator,define=global.define,ArrayProto=Array[PROTOTYPE],ObjectProto=Object[PROTOTYPE],FunctionProto=Function[PROTOTYPE],Infinity=1/0,DOT=".",CONSOLE_METHODS="assert,clear,count,debug,dir,dirxml,error,exception,"+"group,groupCollapsed,groupEnd,info,isIndependentlyComposed,log,"+"markTimeline,profile,profileEnd,table,time,timeEnd,timeline,"+"timelineEnd,timeStamp,trace,warn";function isObject(it){return it!==null&&(typeof it=="object"||typeof it=="function")}function isFunction(it){return typeof it=="function"}var isNative=ctx(/./.test,/\[native code\]\s*\}\s*$/,1);var toString=ObjectProto[TO_STRING];function setToStringTag(it,tag,stat){if(it&&!has(it=stat?it:it[PROTOTYPE],SYMBOL_TAG))hidden(it,SYMBOL_TAG,tag)}function cof(it){return toString.call(it).slice(8,-1)}function classof(it){var O,T;return it==undefined?it===undefined?"Undefined":"Null":typeof(T=(O=Object(it))[SYMBOL_TAG])=="string"?T:cof(O)}var call=FunctionProto.call,apply=FunctionProto.apply,REFERENCE_GET;function part(){var fn=assertFunction(this),length=arguments.length,args=Array(length),i=0,_=path._,holder=false;while(length>i)if((args[i]=arguments[i++])===_)holder=true;return function(){var that=this,_length=arguments.length,i=0,j=0,_args;if(!holder&&!_length)return invoke(fn,args,that);_args=args.slice();if(holder)for(;length>i;i++)if(_args[i]===_)_args[i]=arguments[j++];while(_length>j)_args.push(arguments[j++]);return invoke(fn,_args,that)}}function ctx(fn,that,length){assertFunction(fn);if(~length&&that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}function invoke(fn,args,that){var un=that===undefined;switch(args.length|0){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3]);case 5:return un?fn(args[0],args[1],args[2],args[3],args[4]):fn.call(that,args[0],args[1],args[2],args[3],args[4])}return fn.apply(that,args)}function construct(target,argumentsList){var proto=assertFunction(arguments.length<3?target:arguments[2])[PROTOTYPE],instance=create(isObject(proto)?proto:ObjectProto),result=apply.call(target,instance,argumentsList);return isObject(result)?result:instance}var create=Object.create,getPrototypeOf=Object.getPrototypeOf,setPrototypeOf=Object.setPrototypeOf,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,getOwnDescriptor=Object.getOwnPropertyDescriptor,getKeys=Object.keys,getNames=Object.getOwnPropertyNames,getSymbols=Object.getOwnPropertySymbols,isFrozen=Object.isFrozen,has=ctx(call,ObjectProto[HAS_OWN],2),ES5Object=Object,Dict;function toObject(it){return ES5Object(assertDefined(it))}function returnIt(it){return it}function returnThis(){return this}function get(object,key){if(has(object,key))return object[key]}function ownKeys(it){assertObject(it);return getSymbols?getNames(it).concat(getSymbols(it)):getNames(it)}var assign=Object.assign||function(target,source){var T=Object(assertDefined(target)),l=arguments.length,i=1;while(l>i){var S=ES5Object(arguments[i++]),keys=getKeys(S),length=keys.length,j=0,key;while(length>j)T[key=keys[j++]]=S[key]}return T};function keyOf(object,el){var O=toObject(object),keys=getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}function array(it){return String(it).split(",")}var push=ArrayProto.push,unshift=ArrayProto.unshift,slice=ArrayProto.slice,splice=ArrayProto.splice,indexOf=ArrayProto.indexOf,forEach=ArrayProto[FOR_EACH];function createArrayMethod(type){var isMap=type==1,isFilter=type==2,isSome=type==3,isEvery=type==4,isFindIndex=type==6,noholes=type==5||isFindIndex;return function(callbackfn){var O=Object(assertDefined(this)),that=arguments[1],self=ES5Object(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=isMap?Array(length):isFilter?[]:undefined,val,res;for(;length>index;index++)if(noholes||index in self){val=self[index];res=f(val,index,O);if(type){if(isMap)result[index]=res;else if(res)switch(type){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(isEvery)return false}}return isFindIndex?-1:isSome||isEvery?isEvery:result}}function createArrayContains(isContains){return function(el){var O=toObject(this),length=toLength(O.length),index=toIndex(arguments[1],length);if(isContains&&el!=el){for(;length>index;index++)if(sameNaN(O[index]))return isContains||index}else for(;length>index;index++)if(isContains||index in O){if(O[index]===el)return isContains||index}return!isContains&&-1}}function generic(A,B){return typeof A=="function"?A:B}var MAX_SAFE_INTEGER=9007199254740991,pow=Math.pow,abs=Math.abs,ceil=Math.ceil,floor=Math.floor,max=Math.max,min=Math.min,random=Math.random,trunc=Math.trunc||function(it){return(it>0?floor:ceil)(it)};function sameNaN(number){return number!=number}function toInteger(it){return isNaN(it)?0:trunc(it)}function toLength(it){return it>0?min(toInteger(it),MAX_SAFE_INTEGER):0}function toIndex(index,length){var index=toInteger(index);return index<0?max(index+length,0):min(index,length)}function lz(num){return num>9?num:"0"+num}function createReplacer(regExp,replace,isStatic){var replacer=isObject(replace)?function(part){return replace[part]}:replace;return function(it){return String(isStatic?it:this).replace(regExp,replacer)}}function createPointAt(toString){return function(pos){var s=String(assertDefined(this)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return toString?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?toString?s.charAt(i):a:toString?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}var REDUCE_ERROR="Reduce of empty object with no initial value";function assert(condition,msg1,msg2){if(!condition)throw TypeError(msg2?msg1+msg2:msg1)}function assertDefined(it){if(it==undefined)throw TypeError("Function called on null or undefined");return it}function assertFunction(it){assert(isFunction(it),it," is not a function!");return it}function assertObject(it){assert(isObject(it),it," is not an object!");return it}function assertInstance(it,Constructor,name){assert(it instanceof Constructor,name,": use the 'new' operator!")}function descriptor(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}function simpleSet(object,key,value){object[key]=value;return object}function createDefiner(bitmap){return DESC?function(object,key,value){return defineProperty(object,key,descriptor(bitmap,value))}:simpleSet}function uid(key){return SYMBOL+"("+key+")_"+(++sid+random())[TO_STRING](36)}function getWellKnownSymbol(name,setter){return Symbol&&Symbol[name]||(setter?Symbol:safeSymbol)(SYMBOL+DOT+name)}var DESC=!!function(){try{return defineProperty({},"a",{get:function(){return 2}}).a==2}catch(e){}}(),sid=0,hidden=createDefiner(1),set=Symbol?simpleSet:hidden,safeSymbol=Symbol||uid;function assignHidden(target,src){for(var key in src)hidden(target,key,src[key]);return target}var SYMBOL_UNSCOPABLES=getWellKnownSymbol("unscopables"),ArrayUnscopables=ArrayProto[SYMBOL_UNSCOPABLES]||{},SYMBOL_SPECIES=getWellKnownSymbol("species");function setSpecies(C){if(framework||!isNative(C))defineProperty(C,SYMBOL_SPECIES,{configurable:true,get:returnThis})}var SYMBOL_ITERATOR=getWellKnownSymbol(ITERATOR),SYMBOL_TAG=getWellKnownSymbol(TO_STRING_TAG),SUPPORT_FF_ITER=FF_ITERATOR in ArrayProto,ITER=safeSymbol("iter"),KEY=1,VALUE=2,Iterators={},IteratorPrototype={},NATIVE_ITERATORS=SYMBOL_ITERATOR in ArrayProto,BUGGY_ITERATORS="keys"in ArrayProto&&!("next"in[].keys());setIterator(IteratorPrototype,returnThis);function setIterator(O,value){hidden(O,SYMBOL_ITERATOR,value);SUPPORT_FF_ITER&&hidden(O,FF_ITERATOR,value)}function createIterator(Constructor,NAME,next,proto){Constructor[PROTOTYPE]=create(proto||IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}function defineIterator(Constructor,NAME,value,DEFAULT){var proto=Constructor[PROTOTYPE],iter=get(proto,SYMBOL_ITERATOR)||get(proto,FF_ITERATOR)||DEFAULT&&get(proto,DEFAULT)||value;if(framework){setIterator(proto,iter);if(iter!==value){var iterProto=getPrototypeOf(iter.call(new Constructor));setToStringTag(iterProto,NAME+" Iterator",true);has(proto,FF_ITERATOR)&&setIterator(iterProto,returnThis)}}Iterators[NAME]=iter;Iterators[NAME+" Iterator"]=returnThis;return iter}function defineStdIterators(Base,NAME,Constructor,next,DEFAULT,IS_SET){function createIter(kind){return function(){return new Constructor(this,kind)}}createIterator(Constructor,NAME,next);var entries=createIter(KEY+VALUE),values=createIter(VALUE);if(DEFAULT==VALUE)values=defineIterator(Base,NAME,values,"values");else entries=defineIterator(Base,NAME,entries,"entries");if(DEFAULT){$define(PROTO+FORCED*BUGGY_ITERATORS,NAME,{entries:entries,keys:IS_SET?values:createIter(KEY),values:values})}}function iterResult(done,value){return{value:value,done:!!done}}function isIterable(it){var O=Object(it),Symbol=global[SYMBOL],hasExt=(Symbol&&Symbol[ITERATOR]||FF_ITERATOR)in O;return hasExt||SYMBOL_ITERATOR in O||has(Iterators,classof(O))}function getIterator(it){var Symbol=global[SYMBOL],ext=it[Symbol&&Symbol[ITERATOR]||FF_ITERATOR],getIter=ext||it[SYMBOL_ITERATOR]||Iterators[classof(it)];return assertObject(getIter.call(it))}function stepCall(fn,value,entries){return entries?invoke(fn,value):fn(value)}function forOf(iterable,entries,fn,that){var iterator=getIterator(iterable),f=ctx(fn,that,entries?2:1),step;while(!(step=iterator.next()).done)if(stepCall(f,step.value,entries)===false)return}var NODE=cof(process)==PROCESS,core={},path=framework?global:core,old=global.core,exportGlobal,FORCED=1,GLOBAL=2,STATIC=4,PROTO=8,BIND=16,WRAP=32,SIMPLE=64;function $define(type,name,source){var key,own,out,exp,isGlobal=type&GLOBAL,target=isGlobal?global:type&STATIC?global[name]:(global[name]||ObjectProto)[PROTOTYPE],exports=isGlobal?core:core[name]||(core[name]={});if(isGlobal)source=name;for(key in source){own=!(type&FORCED)&&target&&key in target&&(!isFunction(target[key])||isNative(target[key]));out=(own?target:source)[key];if(!framework&&isGlobal&&!isFunction(target[key]))exp=source[key];else if(type&BIND&&own)exp=ctx(out,global);else if(type&WRAP&&!framework&&target[key]==out){exp=function(param){return this instanceof out?new out(param):out(param)};exp[PROTOTYPE]=out[PROTOTYPE]}else exp=type&PROTO&&isFunction(out)?ctx(call,out):out;if(framework&&target&&!own){if(isGlobal||type&SIMPLE)target[key]=out;else delete target[key]&&hidden(target,key,out)}if(exports[key]!=out)hidden(exports,key,exp)}}if(typeof module!="undefined"&&module.exports)module.exports=core;else if(isFunction(define)&&define.amd)define(function(){return core});else exportGlobal=true;if(exportGlobal||framework){core.noConflict=function(){global.core=old;return core};global.core=core}!function(TAG,SymbolRegistry,AllSymbols,setter){if(!isNative(Symbol)){Symbol=function(description){assert(!(this instanceof Symbol),SYMBOL+" is not a "+CONSTRUCTOR);var tag=uid(description),sym=set(create(Symbol[PROTOTYPE]),TAG,tag);AllSymbols[tag]=sym;DESC&&setter&&defineProperty(ObjectProto,tag,{configurable:true,set:function(value){hidden(this,tag,value)}});return sym};hidden(Symbol[PROTOTYPE],TO_STRING,function(){return this[TAG]})}$define(GLOBAL+WRAP,{Symbol:Symbol});var symbolStatics={"for":function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=Symbol(key)},iterator:SYMBOL_ITERATOR,keyFor:part.call(keyOf,SymbolRegistry),species:SYMBOL_SPECIES,toStringTag:SYMBOL_TAG=getWellKnownSymbol(TO_STRING_TAG,true),unscopables:SYMBOL_UNSCOPABLES,pure:safeSymbol,set:set,useSetter:function(){setter=true},useSimple:function(){setter=false}};forEach.call(array("hasInstance,isConcatSpreadable,match,replace,search,split,toPrimitive"),function(it){symbolStatics[it]=getWellKnownSymbol(it)});$define(STATIC,SYMBOL,symbolStatics);setToStringTag(Symbol,SYMBOL);$define(STATIC+FORCED*!isNative(Symbol),OBJECT,{getOwnPropertyNames:function(it){var names=getNames(toObject(it)),result=[],key,i=0;while(names.length>i)has(AllSymbols,key=names[i++])||result.push(key);return result},getOwnPropertySymbols:function(it){var names=getNames(toObject(it)),result=[],key,i=0;while(names.length>i)has(AllSymbols,key=names[i++])&&result.push(AllSymbols[key]);return result}})}(safeSymbol("tag"),{},{},true);!function(tmp){var objectStatic={assign:assign,is:function(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}};"__proto__"in ObjectProto&&function(buggy,set){try{set=ctx(call,getOwnDescriptor(ObjectProto,"__proto__").set,2);set({},ArrayProto)}catch(e){buggy=true}objectStatic.setPrototypeOf=setPrototypeOf=setPrototypeOf||function(O,proto){assertObject(O);assert(proto===null||isObject(proto),proto,": can't set as prototype!");if(buggy)O.__proto__=proto;else set(O,proto);return O}}();$define(STATIC,OBJECT,objectStatic);if(framework){tmp[SYMBOL_TAG]=DOT;if(cof(tmp)!=DOT)hidden(ObjectProto,TO_STRING,function(){return"[object "+classof(this)+"]"})}setToStringTag(Math,MATH,true);setToStringTag(global.JSON,"JSON",true)}({});!function(){function wrapObjectMethod(key,MODE){var fn=Object[key],exp=core[OBJECT][key],f=0,o={};if(!exp||isNative(exp)){o[key]=MODE==1?function(it){return isObject(it)?fn(it):it}:MODE==2?function(it){return isObject(it)?fn(it):true}:MODE==3?function(it){return isObject(it)?fn(it):false}:MODE==4?function(it,key){return fn(toObject(it),key)}:function(it){return fn(toObject(it))};try{fn(DOT)}catch(e){f=1}$define(STATIC+FORCED*f,OBJECT,o)}}wrapObjectMethod("freeze",1);wrapObjectMethod("seal",1);wrapObjectMethod("preventExtensions",1);wrapObjectMethod("isFrozen",2);wrapObjectMethod("isSealed",2);wrapObjectMethod("isExtensible",3);wrapObjectMethod("getOwnPropertyDescriptor",4);wrapObjectMethod("getPrototypeOf");wrapObjectMethod("keys");wrapObjectMethod("getOwnPropertyNames")}();!function(NAME){NAME in FunctionProto||defineProperty(FunctionProto,NAME,{configurable:true,get:function(){var match=String(this).match(/^\s*function ([^ (]*)/),name=match?match[1]:"";has(this,NAME)||defineProperty(this,NAME,descriptor(5,name));return name},set:function(value){has(this,NAME)||defineProperty(this,NAME,descriptor(0,value))}})}("name");Number("0o1")&&Number("0b1")||function(_Number,NumberProto){function toNumber(it){if(isObject(it))it=toPrimitive(it);if(typeof it=="string"&&it.length>2&&it.charCodeAt(0)==48){var binary=false;switch(it.charCodeAt(1)){case 66:case 98:binary=true;case 79:case 111:return parseInt(it.slice(2),binary?2:8)}}return+it}function toPrimitive(it){var fn,val;if(isFunction(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(isFunction(fn=it[TO_STRING])&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to number")}Number=function Number(it){return this instanceof Number?new _Number(toNumber(it)):toNumber(it)};forEach.call(DESC?getNames(_Number):array("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY"),function(key){key in Number||defineProperty(Number,key,getOwnDescriptor(_Number,key))});Number[PROTOTYPE]=NumberProto;NumberProto[CONSTRUCTOR]=Number;hidden(global,NUMBER,Number)}(Number,Number[PROTOTYPE]);!function(isInteger){$define(STATIC,NUMBER,{EPSILON:pow(2,-52),isFinite:function(it){return typeof it=="number"&&isFinite(it)},isInteger:isInteger,isNaN:sameNaN,isSafeInteger:function(number){return isInteger(number)&&abs(number)<=MAX_SAFE_INTEGER},MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,MIN_SAFE_INTEGER:-MAX_SAFE_INTEGER,parseFloat:parseFloat,parseInt:parseInt})}(Number.isInteger||function(it){return!isObject(it)&&isFinite(it)&&floor(it)===it});!function(){var E=Math.E,exp=Math.exp,log=Math.log,sqrt=Math.sqrt,sign=Math.sign||function(x){return(x=+x)==0||x!=x?x:x<0?-1:1};function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):log(x+sqrt(x*x+1))}function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:exp(x)-1}$define(STATIC,MATH,{acosh:function(x){return(x=+x)<1?NaN:isFinite(x)?log(x/E+sqrt(x+1)*sqrt(x-1)/E)+1:x},asinh:asinh,atanh:function(x){return(x=+x)==0?x:log((1+x)/(1-x))/2},cbrt:function(x){return sign(x=+x)*pow(abs(x),1/3)},clz32:function(x){return(x>>>=0)?32-x[TO_STRING](2).length:32},cosh:function(x){return(exp(x=+x)+exp(-x))/2},expm1:expm1,fround:function(x){return new Float32Array([x])[0]},hypot:function(value1,value2){var sum=0,len1=arguments.length,len2=len1,args=Array(len1),larg=-Infinity,arg;while(len1--){arg=args[len1]=+arguments[len1];if(arg==Infinity||arg==-Infinity)return Infinity;if(arg>larg)larg=arg}larg=arg||1;while(len2--)sum+=pow(args[len2]/larg,2);return larg*sqrt(sum)},imul:function(x,y){var UInt16=65535,xn=+x,yn=+y,xl=UInt16&xn,yl=UInt16&yn;return 0|xl*yl+((UInt16&xn>>>16)*yl+xl*(UInt16&yn>>>16)<<16>>>0)},log1p:function(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:log(1+x)},log10:function(x){return log(x)/Math.LN10},log2:function(x){return log(x)/Math.LN2},sign:sign,sinh:function(x){return abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(E/2)},tanh:function(x){var a=expm1(x=+x),b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x))},trunc:trunc})}();!function(fromCharCode){function assertNotRegExp(it){if(cof(it)==REGEXP)throw TypeError()}$define(STATIC,STRING,{fromCodePoint:function(x){var res=[],len=arguments.length,i=0,code;while(len>i){code=+arguments[i++];if(toIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(((code-=65536)>>10)+55296,code%1024+56320))}return res.join("")},raw:function(callSite){var raw=toObject(callSite.raw),len=toLength(raw.length),sln=arguments.length,res=[],i=0;while(len>i){res.push(String(raw[i++]));if(i<sln)res.push(String(arguments[i]))}return res.join("")}});$define(PROTO,STRING,{codePointAt:createPointAt(false),endsWith:function(searchString){assertNotRegExp(searchString);var that=String(assertDefined(this)),endPosition=arguments[1],len=toLength(that.length),end=endPosition===undefined?len:min(toLength(endPosition),len);searchString+="";return that.slice(end-searchString.length,end)===searchString},includes:function(searchString){assertNotRegExp(searchString);return!!~String(assertDefined(this)).indexOf(searchString,arguments[1])},repeat:function(count){var str=String(assertDefined(this)),res="",n=toInteger(count);if(0>n||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)res+=str;return res},startsWith:function(searchString){assertNotRegExp(searchString);var that=String(assertDefined(this)),index=toLength(min(arguments[1],that.length));searchString+="";return that.slice(index,index+searchString.length)===searchString}})}(String.fromCharCode);!function(){$define(STATIC,ARRAY,{from:function(arrayLike){var O=Object(assertDefined(arrayLike)),mapfn=arguments[1],mapping=mapfn!==undefined,f=mapping?ctx(mapfn,arguments[2],2):undefined,index=0,length,result,iter,step;if(isIterable(O))for(iter=getIterator(O),result=new(generic(this,Array));!(step=iter.next()).done;index++){result[index]=mapping?f(step.value,index):step.value}else for(result=new(generic(this,Array))(length=toLength(O.length));length>index;index++){result[index]=mapping?f(O[index],index):O[index]}result.length=index;return result},of:function(){var index=0,length=arguments.length,result=new(generic(this,Array))(length);while(length>index)result[index]=arguments[index++];result.length=length;return result}});$define(PROTO,ARRAY,{copyWithin:function(target,start){var O=Object(assertDefined(this)),len=toLength(O.length),to=toIndex(target,len),from=toIndex(start,len),end=arguments[2],fin=end===undefined?len:toIndex(end,len),count=min(fin-from,len-to),inc=1;if(from<to&&to<from+count){inc=-1;from=from+count-1;to=to+count-1}while(count-->0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc}return O},fill:function(value){var O=Object(assertDefined(this)),length=toLength(O.length),index=toIndex(arguments[1],length),end=arguments[2],endPos=end===undefined?length:toIndex(end,length);while(endPos>index)O[index++]=value;return O},find:createArrayMethod(5),findIndex:createArrayMethod(6)});if(framework){forEach.call(array("find,findIndex,fill,copyWithin,entries,keys,values"),function(it){ArrayUnscopables[it]=true});SYMBOL_UNSCOPABLES in ArrayProto||hidden(ArrayProto,SYMBOL_UNSCOPABLES,ArrayUnscopables)}setSpecies(Array)}();!function(at){defineStdIterators(Array,ARRAY,function(iterated,kind){set(this,ITER,{o:toObject(iterated),i:0,k:kind})},function(){var iter=this[ITER],O=iter.o,kind=iter.k,index=iter.i++;if(!O||index>=O.length){iter.o=undefined;return iterResult(1)}if(kind==KEY)return iterResult(0,index);if(kind==VALUE)return iterResult(0,O[index]);return iterResult(0,[index,O[index]])},VALUE);Iterators[ARGUMENTS]=Iterators[ARRAY];defineStdIterators(String,STRING,function(iterated){set(this,ITER,{o:String(iterated),i:0})},function(){var iter=this[ITER],O=iter.o,index=iter.i,point;if(index>=O.length)return iterResult(1);point=at.call(O,index);iter.i+=point.length;return iterResult(0,point)})}(createPointAt(true));!function(RegExpProto,_RegExp){function assertRegExpWrapper(fn){return function(){assert(cof(this)===REGEXP);return fn(this)}}if(DESC&&!function(){try{return RegExp(/a/g,"i")=="/a/i"}catch(e){}}()){RegExp=function RegExp(pattern,flags){return new _RegExp(cof(pattern)==REGEXP&&flags!==undefined?pattern.source:pattern,flags)};forEach.call(getNames(_RegExp),function(key){key in RegExp||defineProperty(RegExp,key,{configurable:true,get:function(){return _RegExp[key]},set:function(it){_RegExp[key]=it}})});RegExpProto[CONSTRUCTOR]=RegExp;RegExp[PROTOTYPE]=RegExpProto;hidden(global,REGEXP,RegExp)}if(/./g.flags!="g")defineProperty(RegExpProto,"flags",{configurable:true,get:assertRegExpWrapper(createReplacer(/^.*\/(\w*)$/,"$1",true))});forEach.call(array("sticky,unicode"),function(key){key in/./||defineProperty(RegExpProto,key,DESC?{configurable:true,get:assertRegExpWrapper(function(){return false})}:descriptor(5,false))});setSpecies(RegExp)}(RegExp[PROTOTYPE],RegExp);isFunction(setImmediate)&&isFunction(clearImmediate)||function(ONREADYSTATECHANGE){var postMessage=global.postMessage,addEventListener=global.addEventListener,MessageChannel=global.MessageChannel,counter=0,queue={},defer,channel,port;setImmediate=function(fn){var args=[],i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(isFunction(fn)?fn:Function(fn),args)};defer(counter);return counter};clearImmediate=function(id){delete queue[id]};function run(id){if(has(queue,id)){var fn=queue[id];delete queue[id];fn()}}function listner(event){run(event.data)}if(NODE){defer=function(id){nextTick(part.call(run,id))}}else if(addEventListener&&isFunction(postMessage)&&!global.importScripts){defer=function(id){postMessage(id,"*")};addEventListener("message",listner,false)}else if(isFunction(MessageChannel)){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listner;defer=ctx(port.postMessage,port,1)}else if(document&&ONREADYSTATECHANGE in document[CREATE_ELEMENT]("script")){defer=function(id){html.appendChild(document[CREATE_ELEMENT]("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run(id)}}}else{defer=function(id){setTimeout(run,0,id)}}}("onreadystatechange");$define(GLOBAL+BIND,{setImmediate:setImmediate,clearImmediate:clearImmediate});!function(Promise,test){isFunction(Promise)&&isFunction(Promise.resolve)&&Promise.resolve(test=new Promise(function(){}))==test||function(asap,DEF){function isThenable(o){var then;if(isObject(o))then=o.then;return isFunction(then)?then:false}function notify(def){var chain=def.chain;chain.length&&asap(function(){var msg=def.msg,ok=def.state==1,i=0;while(chain.length>i)!function(react){var cb=ok?react.ok:react.fail,ret,then;try{if(cb){ret=cb===true?msg:cb(msg);if(ret===react.P){react.rej(TypeError(PROMISE+"-chain cycle"))}else if(then=isThenable(ret)){then.call(ret,react.res,react.rej)}else react.res(ret)}else react.rej(msg)}catch(err){react.rej(err)}}(chain[i++]);chain.length=0})}function resolve(msg){var def=this,then,wrapper;if(def.done)return;def.done=true;def=def.def||def;try{if(then=isThenable(msg)){wrapper={def:def,done:false};then.call(msg,ctx(resolve,wrapper,1),ctx(reject,wrapper,1))}else{def.msg=msg;def.state=1;notify(def)}}catch(err){reject.call(wrapper||{def:def,done:false},err)}}function reject(msg){var def=this;if(def.done)return;def.done=true;def=def.def||def;def.msg=msg;def.state=2;notify(def)}function getConstructor(C){var S=assertObject(C)[SYMBOL_SPECIES];return S!=undefined?S:C}Promise=function(executor){assertFunction(executor);assertInstance(this,Promise,PROMISE);var def={chain:[],state:0,done:false,msg:undefined};hidden(this,DEF,def);try{executor(ctx(resolve,def,1),ctx(reject,def,1))}catch(err){reject.call(def,err)}};assignHidden(Promise[PROTOTYPE],{then:function(onFulfilled,onRejected){var S=assertObject(assertObject(this)[CONSTRUCTOR])[SYMBOL_SPECIES];var react={ok:isFunction(onFulfilled)?onFulfilled:true,fail:isFunction(onRejected)?onRejected:false},P=react.P=new(S!=undefined?S:Promise)(function(resolve,reject){react.res=assertFunction(resolve);react.rej=assertFunction(reject)}),def=this[DEF];def.chain.push(react);def.state&&notify(def);return P},"catch":function(onRejected){return this.then(undefined,onRejected)}});assignHidden(Promise,{all:function(iterable){var Promise=getConstructor(this),values=[];return new Promise(function(resolve,reject){forOf(iterable,false,push,values);var remaining=values.length,results=Array(remaining);if(remaining)forEach.call(values,function(promise,index){Promise.resolve(promise).then(function(value){results[index]=value;--remaining||resolve(results)},reject)});else resolve(results)})},race:function(iterable){var Promise=getConstructor(this);return new Promise(function(resolve,reject){forOf(iterable,false,function(promise){Promise.resolve(promise).then(resolve,reject)})})},reject:function(r){return new(getConstructor(this))(function(resolve,reject){reject(r)})},resolve:function(x){return isObject(x)&&DEF in x&&getPrototypeOf(x)===this[PROTOTYPE]?x:new(getConstructor(this))(function(resolve,reject){resolve(x)})}})}(nextTick||setImmediate,safeSymbol("def"));setToStringTag(Promise,PROMISE);setSpecies(Promise);$define(GLOBAL+FORCED*!isNative(Promise),{Promise:Promise})}(global[PROMISE]);!function(){var UID=safeSymbol("uid"),O1=safeSymbol("O1"),WEAK=safeSymbol("weak"),LEAK=safeSymbol("leak"),LAST=safeSymbol("last"),FIRST=safeSymbol("first"),SIZE=DESC?safeSymbol("size"):"size",uid=0,tmp={};function getCollection(C,NAME,methods,commonMethods,isMap,isWeak){var ADDER=isMap?"set":"add",proto=C&&C[PROTOTYPE],O={};function initFromIterable(that,iterable){if(iterable!=undefined)forOf(iterable,isMap,that[ADDER],that);return that}function fixSVZ(key,chain){var method=proto[key];if(framework)proto[key]=function(a,b){var result=method.call(this,a===0?0:a,b);return chain?this:result}}if(!isNative(C)||!(isWeak||!BUGGY_ITERATORS&&has(proto,FOR_EACH)&&has(proto,"entries"))){C=isWeak?function(iterable){assertInstance(this,C,NAME);set(this,UID,uid++);initFromIterable(this,iterable)}:function(iterable){var that=this;assertInstance(that,C,NAME);set(that,O1,create(null));set(that,SIZE,0);set(that,LAST,undefined);set(that,FIRST,undefined);initFromIterable(that,iterable)};assignHidden(assignHidden(C[PROTOTYPE],methods),commonMethods);isWeak||defineProperty(C[PROTOTYPE],"size",{get:function(){return assertDefined(this[SIZE])}})}else{var Native=C,inst=new C,chain=inst[ADDER](isWeak?{}:-0,1),buggyZero;if(!NATIVE_ITERATORS||!C.length){C=function(iterable){assertInstance(this,C,NAME);return initFromIterable(new Native,iterable)};C[PROTOTYPE]=proto;if(framework)proto[CONSTRUCTOR]=C}isWeak||inst[FOR_EACH](function(val,key){buggyZero=1/key===-Infinity});if(buggyZero){fixSVZ("delete");fixSVZ("has");isMap&&fixSVZ("get")}if(buggyZero||chain!==inst)fixSVZ(ADDER,true)}setToStringTag(C,NAME);setSpecies(C);O[NAME]=C;$define(GLOBAL+WRAP+FORCED*!isNative(C),O);isWeak||defineStdIterators(C,NAME,function(iterated,kind){set(this,ITER,{o:iterated,k:kind})},function(){var iter=this[ITER],kind=iter.k,entry=iter.l;while(entry&&entry.r)entry=entry.p;if(!iter.o||!(iter.l=entry=entry?entry.n:iter.o[FIRST])){iter.o=undefined;return iterResult(1)}if(kind==KEY)return iterResult(0,entry.k);if(kind==VALUE)return iterResult(0,entry.v);return iterResult(0,[entry.k,entry.v])},isMap?KEY+VALUE:VALUE,!isMap);return C}function fastKey(it,create){if(!isObject(it))return(typeof it=="string"?"S":"P")+it;if(isFrozen(it))return"F";if(!has(it,UID)){if(!create)return"E";hidden(it,UID,++uid)}return"O"+it[UID]}function getEntry(that,key){var index=fastKey(key),entry;if(index!="F")return that[O1][index];for(entry=that[FIRST];entry;entry=entry.n){if(entry.k==key)return entry}}function def(that,key,value){var entry=getEntry(that,key),prev,index;if(entry)entry.v=value;else{that[LAST]=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that[LAST],n:undefined,r:false};if(!that[FIRST])that[FIRST]=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!="F")that[O1][index]=entry}return that}var collectionMethods={clear:function(){for(var that=this,data=that[O1],entry=that[FIRST];entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that[FIRST]=that[LAST]=undefined;that[SIZE]=0},"delete":function(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that[O1][entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that[FIRST]==entry)that[FIRST]=next;if(that[LAST]==entry)that[LAST]=prev;

that[SIZE]--}return!!entry},forEach:function(callbackfn){var f=ctx(callbackfn,arguments[1],3),entry;while(entry=entry?entry.n:this[FIRST]){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function(key){return!!getEntry(this,key)}};Map=getCollection(Map,MAP,{get:function(key){var entry=getEntry(this,key);return entry&&entry.v},set:function(key,value){return def(this,key===0?0:key,value)}},collectionMethods,true);Set=getCollection(Set,SET,{add:function(value){return def(this,value=value===0?0:value,value)}},collectionMethods);function defWeak(that,key,value){if(isFrozen(assertObject(key)))leakStore(that).set(key,value);else{has(key,WEAK)||hidden(key,WEAK,{});key[WEAK][that[UID]]=value}return that}function leakStore(that){return that[LEAK]||hidden(that,LEAK,new Map)[LEAK]}var weakMethods={"delete":function(key){if(!isObject(key))return false;if(isFrozen(key))return leakStore(this)["delete"](key);return has(key,WEAK)&&has(key[WEAK],this[UID])&&delete key[WEAK][this[UID]]},has:function(key){if(!isObject(key))return false;if(isFrozen(key))return leakStore(this).has(key);return has(key,WEAK)&&has(key[WEAK],this[UID])}};WeakMap=getCollection(WeakMap,WEAKMAP,{get:function(key){if(isObject(key)){if(isFrozen(key))return leakStore(this).get(key);if(has(key,WEAK))return key[WEAK][this[UID]]}},set:function(key,value){return defWeak(this,key,value)}},weakMethods,true,true);if(framework&&(new WeakMap).set(Object.freeze(tmp),7).get(tmp)!=7){forEach.call(array("delete,has,get,set"),function(key){var method=WeakMap[PROTOTYPE][key];WeakMap[PROTOTYPE][key]=function(a,b){if(isObject(a)&&isFrozen(a)){var result=leakStore(this)[key](a,b);return key=="set"?this:result}return method.call(this,a,b)}})}WeakSet=getCollection(WeakSet,WEAKSET,{add:function(value){return defWeak(this,value,true)}},weakMethods,false,true)}();!function(){function Enumerate(iterated){var keys=[],key;for(key in iterated)keys.push(key);set(this,ITER,{o:iterated,a:keys,i:0})}createIterator(Enumerate,OBJECT,function(){var iter=this[ITER],keys=iter.a,key;do{if(iter.i>=keys.length)return iterResult(1)}while(!((key=keys[iter.i++])in iter.o));return iterResult(0,key)});function wrap(fn){return function(it){assertObject(it);try{return fn.apply(undefined,arguments),true}catch(e){return false}}}function reflectGet(target,propertyKey){var receiver=arguments.length<3?target:arguments[2],desc=getOwnDescriptor(assertObject(target),propertyKey),proto;if(desc)return has(desc,"value")?desc.value:desc.get===undefined?undefined:desc.get.call(receiver);return isObject(proto=getPrototypeOf(target))?reflectGet(proto,propertyKey,receiver):undefined}function reflectSet(target,propertyKey,V){var receiver=arguments.length<4?target:arguments[3],ownDesc=getOwnDescriptor(assertObject(target),propertyKey),existingDescriptor,proto;if(!ownDesc){if(isObject(proto=getPrototypeOf(target))){return reflectSet(proto,propertyKey,V,receiver)}ownDesc=descriptor(0)}if(has(ownDesc,"value")){if(ownDesc.writable===false||!isObject(receiver))return false;existingDescriptor=getOwnDescriptor(receiver,propertyKey)||descriptor(0);existingDescriptor.value=V;return defineProperty(receiver,propertyKey,existingDescriptor),true}return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true)}var isExtensible=Object.isExtensible||returnIt;var reflect={apply:ctx(call,apply,3),construct:construct,defineProperty:wrap(defineProperty),deleteProperty:function(target,propertyKey){var desc=getOwnDescriptor(assertObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey]},enumerate:function(target){return new Enumerate(assertObject(target))},get:reflectGet,getOwnPropertyDescriptor:function(target,propertyKey){return getOwnDescriptor(assertObject(target),propertyKey)},getPrototypeOf:function(target){return getPrototypeOf(assertObject(target))},has:function(target,propertyKey){return propertyKey in target},isExtensible:function(target){return!!isExtensible(assertObject(target))},ownKeys:ownKeys,preventExtensions:wrap(Object.preventExtensions||returnIt),set:reflectSet};if(setPrototypeOf)reflect.setPrototypeOf=function(target,proto){return setPrototypeOf(assertObject(target),proto),true};$define(GLOBAL,{Reflect:{}});$define(STATIC,"Reflect",reflect)}();!function(){$define(PROTO,ARRAY,{includes:createArrayContains(true)});$define(PROTO,STRING,{at:createPointAt(true)});function createObjectToArray(isEntries){return function(object){var O=toObject(object),keys=getKeys(object),length=keys.length,i=0,result=Array(length),key;if(isEntries)while(length>i)result[i]=[key=keys[i++],O[key]];else while(length>i)result[i]=O[keys[i++]];return result}}$define(STATIC,OBJECT,{values:createObjectToArray(false),entries:createObjectToArray(true)});$define(STATIC,REGEXP,{escape:createReplacer(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",true)})}();!function(REFERENCE){REFERENCE_GET=getWellKnownSymbol(REFERENCE+"Get",true);var REFERENCE_SET=getWellKnownSymbol(REFERENCE+SET,true),REFERENCE_DELETE=getWellKnownSymbol(REFERENCE+"Delete",true);$define(STATIC,SYMBOL,{referenceGet:REFERENCE_GET,referenceSet:REFERENCE_SET,referenceDelete:REFERENCE_DELETE});hidden(FunctionProto,REFERENCE_GET,returnThis);function setMapMethods(Constructor){if(Constructor){var MapProto=Constructor[PROTOTYPE];hidden(MapProto,REFERENCE_GET,MapProto.get);hidden(MapProto,REFERENCE_SET,MapProto.set);hidden(MapProto,REFERENCE_DELETE,MapProto["delete"])}}setMapMethods(Map);setMapMethods(WeakMap)}("reference");!function(arrayStatics){function setArrayStatics(keys,length){forEach.call(array(keys),function(key){if(key in ArrayProto)arrayStatics[key]=ctx(call,ArrayProto[key],length)})}setArrayStatics("pop,reverse,shift,keys,values,entries",1);setArrayStatics("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3);setArrayStatics("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill,turn");$define(STATIC,ARRAY,arrayStatics)}({});!function(NodeList){if(framework&&NodeList&&!(SYMBOL_ITERATOR in NodeList[PROTOTYPE])){hidden(NodeList[PROTOTYPE],SYMBOL_ITERATOR,Iterators[ARRAY])}Iterators.NodeList=Iterators[ARRAY]}(global.NodeList)}(typeof self!="undefined"&&self.Math===Math?self:Function("return this")(),true)},{}],3:[function(require,module,exports){(function(global){!function(global){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var undefined;var iteratorSymbol=typeof Symbol==="function"&&Symbol.iterator||"@@iterator";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime}return}runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){return new Generator(innerFn,outerFn,self||null,tryLocsList||[])}runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype;GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName="GeneratorFunction";runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};runtime.mark=function(genFun){genFun.__proto__=GeneratorFunctionPrototype;genFun.prototype=Object.create(Gp);return genFun};runtime.async=function(innerFn,outerFn,self,tryLocsList){return new Promise(function(resolve,reject){var generator=wrap(innerFn,outerFn,self,tryLocsList);var callNext=step.bind(generator.next);var callThrow=step.bind(generator["throw"]);function step(arg){var record=tryCatch(this,null,arg);if(record.type==="throw"){reject(record.arg);return}var info=record.arg;if(info.done){resolve(info.value)}else{Promise.resolve(info.value).then(callNext,callThrow)}}callNext()})};function Generator(innerFn,outerFn,self,tryLocsList){var generator=outerFn?Object.create(outerFn.prototype):this;var context=new Context(tryLocsList);var state=GenStateSuspendedStart;function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){return doneResult()}while(true){var delegate=context.delegate;if(delegate){var record=tryCatch(delegate.iterator[method],delegate.iterator,arg);if(record.type==="throw"){context.delegate=null;method="throw";arg=record.arg;continue}method="next";arg=undefined;var info=record.arg;if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc}else{state=GenStateSuspendedYield;return info}context.delegate=null}if(method==="next"){if(state===GenStateSuspendedStart&&typeof arg!=="undefined"){throw new TypeError("attempt to send "+JSON.stringify(arg)+" to newborn generator")}if(state===GenStateSuspendedYield){context.sent=arg}else{delete context.sent}}else if(method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw arg}if(context.dispatchException(arg)){method="next";arg=undefined}}else if(method==="return"){context.abrupt("return",arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;var info={value:record.arg,done:context.done};if(record.arg===ContinueSentinel){if(context.delegate&&method==="next"){arg=undefined}}else{return info}}else if(record.type==="throw"){state=GenStateCompleted;if(method==="next"){context.dispatchException(record.arg)}else{arg=record.arg}}}}generator.next=invoke.bind(generator,"next");generator["throw"]=invoke.bind(generator,"throw");generator["return"]=invoke.bind(generator,"return");return generator}Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset()}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}runtime.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(){this.prev=0;this.next=0;this.sent=undefined;this.done=false;this.delegate=null;this.tryEntries.forEach(resetTryEntry);for(var tempIndex=0,tempName;hasOwn.call(this,tempName="t"+tempIndex)||tempIndex<20;++tempIndex){this[tempName]=null}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},_findFinallyEntry:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&(entry.finallyLoc===finallyLoc||this.prev<entry.finallyLoc)){return entry}}},abrupt:function(type,arg){var entry=this._findFinallyEntry();var record=entry?entry.completion:{};record.type=type;record.arg=arg;if(entry){this.next=entry.finallyLoc}else{this.complete(record)}return ContinueSentinel},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=record.arg;this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){var entry=this._findFinallyEntry(finallyLoc);return this.complete(entry.completion,entry.afterLoc)},"catch":function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};return ContinueSentinel}}}(typeof global==="object"?global:typeof window==="object"?window:this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var i,n=[],r=e[Symbol.iterator]();!(i=r.next()).done&&(n.push(i.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},_defineProperty=function(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0})};!function e(t){function i(e,t){return t.querySelectorAll(e)}function n(e,t){return t.querySelector(e)}function r(e,t){return t.getElementsByClassName(e)}function s(e,t){return t.getElementsByClassName(e)[0]}function a(e){return Cn.getElementById(e)}function o(e,t){return t.getElementsByTagName(e)}function l(e,t){return t.getElementsByTagName(e)[0]}function d(e,t){do e=e.parentElement;while(e&&e.tagName!==t);return e}function u(e,t){e.parentNode.insertBefore(t,e)}function c(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function h(e){return cn.innerHTML=e,cn.firstChild}function p(e,t,i){var n,r=Cn.createElement(e);if(t)for(n in t)"text"===n?r.textContent=t[n]:"value"===n?r.value=t[n]:t.hasOwnProperty(n)&&r.setAttribute(n,t[n]);if(i)for(n in i)i.hasOwnProperty(n)&&r.addEventListener(n,i[n],!1);return r}function f(e,t,i){for(var n=p(e,t,null),r=0,s=i.length;s>r;r++)i[r]&&n.appendChild(i[r]);return n}function m(e){return Cn.createTextNode(e)}function g(e,t,i){return p("input",{type:"button",value:e,title:t},{click:i})}function v(e){w(Cn.head.appendChild(p("script",{type:"text/javascript",text:e},null)))}function b(e){return Cn.head.appendChild(p("style",{type:"text/css",text:e},null))}function y(e,t){return e?t:null}function A(e){e.style.display="none"===e.style.display?"":"none"}function w(e){e&&e.parentNode.removeChild(e)}function x(e){var t=Cn.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e,t}function k(e){e.preventDefault()}function _(e,t){var i=e.scrollTop,n=e.selectionStart;e.value=e.value.substr(0,n)+t+e.value.substr(e.selectionEnd),e.setSelectionRange(n+t.length,n+t.length),e.focus(),e.scrollTop=i}function T(){return($i.Presto?Cn.getSelection():window.getSelection()).toString()}function P(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function E(e){var t=void 0===arguments[1]?!1:arguments[1];return function(){function i(e,t){var i;try{i=a[e](t)}catch(n){return Promise.reject(n)}return i.done?i.value:Promise.resolve(i.value).then(o,l)}for(var n=arguments.length,r=Array(n),s=0;n>s;s++)r[s]=arguments[s];var a=e.apply(this,r),o=i.bind(i,"next"),l=i.bind(i,"throw"),d=o();return t?[a,d]:d}}function S(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];return Promise.resolve(E(e).apply(void 0,i))}function L(e){return new Promise(function(t){return setTimeout(function(){return t()},e)})}function C(e){var t,i=new XMLHttpRequest;e.onreadystatechange&&(i.onreadystatechange=e.onreadystatechange.bind(window,i)),e.onload&&(i.onload=e.onload.bind(window,i)),i.open(e.method,e.url,!0),e.responseType&&(i.responseType=e.responseType);for(t in e.headers)i.setRequestHeader(t,e.headers[t]);return i.send(e.data||null),i}function I(e,t,i){this.array=[],this.length=this.index=this.running=0,this.num=1,this.func=t,this.endFn=i,this.max=e,this.completed=this.paused=this.stopped=!1}function R(){this._data=[]}function N(e){return(e+"").replace(/([.?*+^$[\]\\(){}|\-])/g,"\\$1")}function O(e){return"/"+e+(e?"/":"")}function M(e){return"/"===e[1]?Zi.prot+e:"/"===e[0]?Zi.prot+"//"+Zi.host+e:e}function j(e){var t=e instanceof zt;return t?0===e.code?e.message||Ln.noConnect[pn]:"HTTP ["+e.code+"] "+e.message:Ln.internalError[pn]+F(e)}function F(e){return e.stack?$i.WebKit?e.stack:e.name+": "+e.message+"\n"+($i.Firefox?e.stack.replace(/^([^@]*).*\/(.+)$/gm,function(e,t,i){return"    at "+(t?t+" ("+i+")":i)}):e.stack):e.name+": "+e.message}function H(e,t){var i=e.lastIndexOf("/"),n=e.substr(i+1);return new RegExp(e.substr(1,i-1),t?n.replace("g",""):n)}function q(e,t,i){e[t]=i,0===t?e[1]=i/e[2]:e[0]=i*e[2]}function D(e,t,i){var n=e[2]>1?1:0;return+e[n]<+t&&q(e,n,t),i&&(n=e[2]>i[2]?0:1,+e[n]>+i[n]&&q(e,n,+i[n])),e}function B(e,i){if($i.isGM)GM_setValue(e,i);else if($i.isChromeStorage){var n={};n[e]=i,i.toString().length<4095?(chrome.storage.sync.set(n,jn),chrome.storage.local.remove(e,jn)):(chrome.storage.local.set(n,jn),chrome.storage.sync.remove(e,jn))}else $i.isScriptStorage?t.setItem(e,i):Yi.setItem(e,i)}function U(e){$i.isGM?GM_deleteValue(e):$i.isChromeStorage?chrome.storage.sync.remove(e,jn):$i.isScriptStorage?t.removeItem(e):Yi.removeItem(e)}function Y(e,t){S(wn,"DESU_Config").then(function(i){Vi=i,t?Vi[e]=t:delete Vi[e],B("DESU_Config",JSON.stringify(Vi))})}function z(e,t){Qi[e]!==t&&(Qi[e]=t,Y(Zi.dm,Qi))}function Q(e){z(e,+!Qi[e])}function V(){return S(wn,"DESU_Favorites")}function G(){var e,t=tn?zi["de-hidden-"+en+tn]:null;return"string"==typeof t&&(e=t.split(","),4===e.length&&+e[0]===(Qi.hideBySpell?hn.hash:0)&&e[1]in Wi&&Wi[e[1]].count===+e[2])?void(Ji=e[3].split("")):void(Ji=[])}function W(){if(tn){var e=un.firstThr.lastNotDeleted;zi["de-hidden-"+en+tn]=(Qi.hideBySpell?hn.hash:"0")+","+e.num+","+e.count+","+Ji.join("")}K(!1),it("hid",!0)}function J(e){var t,i,n,r,s=JSON.stringify(Ki);if(e&&s.length>1e6){t=Date.now()-432e6;for(i in Ki)if(Ki.hasOwnProperty(i)){n=Ki[i];for(r in n)n.hasOwnProperty(r)&&n[r][1]<t&&delete n[r]}s=JSON.stringify(Ki)}B("DESU_Posts_"+Zi.dm,s),it("hid",!0)}function K(e){B("DESU_Threads_"+Zi.dm,JSON.stringify(Gi)),e&&it("hid",!0)}function X(e){B("DESU_Favorites",JSON.stringify(e)),it("fav",!0,e)}function Z(e,t,i,n,r){function s(e){for(var t in e)if("url"!==t&&e.hasOwnProperty(t))return!1;return!0}t in e&&i in e[t]&&n in e[t][i]&&(delete e[t][i][n],s(e[t][i])&&(delete e[t][i],P(e[t])&&delete e[t])),r&&t===Zi.host&&i===en&&n in Wi&&Wi[n].thr.setFavBtn(!1)}function $(){if(Qi.markViewed){var e=zi["de-viewed"];e&&e.split(",").forEach(function(e){var t=Wi[e];t&&(t.el.classList.add("de-viewed"),t.viewed=!0)})}}function et(e,t,i){return'<li><a id="de-btn-'+e+'" class="de-abtn" '+(i?"de-":"")+'title="'+Ln.panelBtn[e][pn]+'" href="'+t+'"></a></li>'}function tt(e){var t,n,r=i(Zi.qThumbImages,e).length;(dn&&dn.pArea[0]||e).insertAdjacentHTML("beforebegin",'<div id="de-main" lang="'+qi()+'"><div id="de-panel"><span id="de-btn-logo" title="'+Ln.panelBtn.attach[pn]+'"></span><ul id="de-panel-btns"'+(Qi.expandPanel?">":' style="display: none">')+(Qi.disabled?et("enable","#",!1):et("settings","#",!0)+et("hidden","#",!0)+et("favor","#",!0)+(Qi.addYouTube?et("video","#",!1):"")+(mn?"":et("refresh","#",!1)+(tn||nn!==Zi.firstPage?et("goback",Zi.getPageUrl(en,nn-1),!0):"")+(tn||nn===Zi.lastPage?"":et("gonext",Zi.getPageUrl(en,nn+1),!0)))+et("goup","#",!1)+et("godown","#",!1)+(0===r?"":et("expimg","#",!1)+et("maskimg","#",!0)+($i.Presto||mn?"":(Qi.preLoadImgs?"":et("preimg","#",!1))+(tn?et("savethr","#",!1):"")))+(!tn||mn?"":et(Qi.ajaxUpdThr?"upd-on":"upd-off","#",!1)+($i.Safari?"":et("audio-off","#",!1)))+(Zi.mak||Zi.tiny||Zi.fch?et("catalog",Zi.prot+"//"+Zi.host+"/"+(Zi.mak?"makaba/makaba.fcgi?task=catalog&board="+en:en+"/catalog.html"),!1):"")+et("enable","#",!1)+(tn?'<span id="de-panel-info" title="'+Ln.panelBtn.counter[pn]+'">'+un.firstThr.pcount+"/"+r+"</span>":""))+'</ul></div><div class="de-content"></div>'+(Qi.disabled?"":'<div id="de-alert"></div><hr style="clear: both;">')+"</div>"),t=a("de-panel"),n={attach:!1,odelay:0,panel:t,handleEvent:function(e){switch(e.type){case"click":switch(e.target.id){case"de-btn-logo":return Qi.expandPanel?(this.panel.lastChild.style.display="none",this.attach=!1):this.attach=!0,void Q("expandPanel");case"de-btn-settings":this.attach=it("cfg",!1);break;case"de-btn-hidden":this.attach=it("hid",!1);break;case"de-btn-favor":this.attach=it("fav",!1);break;case"de-btn-video":this.attach=it("vid",!1);break;case"de-btn-refresh":window.location.reload();break;case"de-btn-goup":scrollTo(0,0);break;case"de-btn-godown":scrollTo(0,Cn.body.scrollHeight||Cn.body.offsetHeight);break;case"de-btn-expimg":gn=!gn,w(s("de-img-center",Cn));for(var t=un.firstThr.op;t;t=t.next)t.toggleImages(gn);break;case"de-btn-preimg":vn=!vn,e.ctrlKey||jt(null);break;case"de-btn-maskimg":Q("maskImgs"),Bi();break;case"de-btn-upd-on":case"de-btn-upd-off":case"de-btn-upd-warn":rn.enabled?rn.disable():rn.enable();break;case"de-btn-audio-on":case"de-btn-audio-off":rn.toggleAudio(0)?(rn.enable(),e.target.id="de-btn-audio-on"):e.target.id="de-btn-audio-off",w(s("de-menu",Cn));break;case"de-btn-savethr":break;case"de-btn-enable":Q("disabled"),window.location.reload();break;default:return}return void k(e);case"mouseover":switch(Qi.expandPanel||(clearTimeout(this.odelay),this.panel.lastChild.style.display=""),e.target.id){case"de-btn-settings":Lt.setTitle(e.target,10);break;case"de-btn-hidden":Lt.setTitle(e.target,7);break;case"de-btn-favor":Lt.setTitle(e.target,6);break;case"de-btn-goback":Lt.setTitle(e.target,4);break;case"de-btn-gonext":Lt.setTitle(e.target,17);break;case"de-btn-maskimg":Lt.setTitle(e.target,9);break;case"de-btn-refresh":if(tn)return;case"de-btn-savethr":case"de-btn-audio-off":Pt(e)}return;default:switch(Qi.expandPanel||this.attach||(this.odelay=setTimeout(function(e){e.panel.lastChild.style.display="none",e.attach=!1},500,this)),e.target.id){case"de-btn-refresh":case"de-btn-savethr":case"de-btn-audio-off":Et(e)}}}},t.addEventListener("click",n,!0),t.addEventListener("mouseover",n,!1),t.addEventListener("mouseout",n,!1)}function it(e,t,i){if(fn)return!1;var n,r=s("de-content",Cn),a="de-content-"+e;return r?t&&r.id!==a?!0:(n=!t&&r.id===a,r.hasChildNodes()&&Qi.animation?($i.animEvent(r,function(t){rt(t,a,e,n,i),a=e=n=i=null}),r.className="de-content de-cfg-close",!n):(rt(r,a,e,n,i),!n)):!1}function nt(e,t){return e.appendChild(f("div",{"class":"de-content-block"},[p("input",{type:"checkbox"},{click:function(){Mn(i(".de-entry > input",this.parentNode),function(e){return e.checked=res})}}),t]))}function rt(e,t,s,a,o){var d,u;return"cfg"===s&&!a&&(d=n('.de-cfg-tab-back[selected="true"] > .de-cfg-tab',e))&&(u=d.getAttribute("info")),e.innerHTML=e.style.backgroundColor="",a?void e.removeAttribute("id"):(e.id=t,"cfg"===s?xt(e,u):Qi.attachPanel&&(e.style.backgroundColor=getComputedStyle(Cn.body).getPropertyValue("background-color")),"fav"===s?void(o?ot(e,o):V().then(function(t){ot(e,t)})):("hid"===s&&!function(){for(var t=null,s=r("de-post-hide",un.el),a=0,o=s.length;o>a;++a){var d=s[a];if(!d.isOp){var u=d.cloneNode(!0);u.removeAttribute("id"),u.style.display="",u.classList.contains(Zi.cRPost)?u.classList.add("de-cloned-post"):u.className=Zi.cReply+" de-cloned-post",u.post=Object.create(u.clone=d.post),u.post.el=u,u.btn=n(".de-btn-hide, .de-btn-hide-user",u),u.btn.parentNode.className="de-post-btns",u.btn.onclick=function(){this.hideContent(this.hidden=!this.hidden)}.bind(u),t||(t=e.appendChild(h('<div class="de-content-block"><b>'+Ln.hiddenPosts[pn]+":</b></div>"))),t.appendChild(f("div",{"class":"de-entry"},[u]))}}t?(e.appendChild(g(Ln.expandAll[pn],"",function(){Mn(i(".de-cloned-post",this.parentNode),function(e){var t=e.post;t.hideContent(t.hidden=!t.hidden)}),this.value=this.value===Ln.undo[pn]?Ln.expandAll[pn]:Ln.undo[pn]})),e.appendChild(g(Ln.save[pn],"",function(){Mn(i(".de-cloned-post",this.parentNode),function(e,t){t.post.hidden||t.clone.setUserVisib(!1,e,!0)}.bind(null,Date.now())),J(!0)}))):e.insertAdjacentHTML("beforeend","<b>"+Ln.noHidPosts[pn]+"</b>"),e.insertAdjacentHTML("beforeend","<hr><b>"+(P(Gi)?Ln.noHidThrds[pn]:Ln.hiddenThrds[pn]+":")+"</b>");for(var c in Gi)if(!P(Gi[c])){t=nt(e,p("b",{text:"/"+c},null));for(var m in Gi[c])t.insertAdjacentHTML("beforeend",'<div class="de-entry '+Zi.cReply+'" info="'+c+";"+m+'"><input type="checkbox"><a href="'+Zi.getThrdUrl(c,m)+'" target="_blank">'+m+"</a> - "+Gi[c][m]+"</div>")}e.insertAdjacentHTML("beforeend","<hr>"),e.appendChild(wt("hidden",function(e){e(Gi,!0,function(e){Gi=e,en in Gi||(Gi[en]={}),un.firstThr.updateHidden(Gi[en]),K(!0),Yi["__de-threads"]=JSON.stringify(Gi),Yi.removeItem("__de-threads")})})),e.appendChild(g(Ln.clear[pn],Ln.clrDeleted[pn],E(regeneratorRuntime.mark(function v(){var e,t,n,r,s,a,o,l=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:n=i(".de-entry[info]",l.parentNode),e=0,t=n.length;case 2:if(!(t>e)){d.next=18;break}return r=n[e].getAttribute("info").split(";"),s=_slicedToArray(r,2),a=s[0],o=s[1],d.prev=7,d.next=10,Qt(Zi.getThrdUrl(a,o),!1,!1);case 10:d.next=15;break;case 12:d.prev=12,d.t7=d["catch"](7),d.t7 instanceof zt&&404===d.t7.code&&(delete Gi[a][o],K(!0));case 15:++e,d.next=2;break;case 18:case"end":return d.stop()}},v,this,[[7,12]])})))),e.appendChild(g(Ln.remove[pn],Ln.clrSelected[pn],function(){Mn(i(".de-entry[info]",this.parentNode),function(e,t){var i=t.getAttribute("info").split(";");l("input",t).checked&&(i[1]in Wi?Wi[i[1]].setUserVisib(!1,e,!0):(Yi["__de-post"]=JSON.stringify({brd:i[0],date:e,isOp:!0,num:i[1],hide:!1}),Yi.removeItem("__de-post")),delete Gi[i[0]][i[1]])}.bind(null,Date.now())),K(!0)}))}(),"vid"===s&&st(e),void(Qi.animation&&(e.className="de-content de-cfg-open"))))}function st(e){var t=r("de-video-link",un.el);if(!t.length)return void(e.innerHTML="<b>"+Ln.noVideoLinks[pn]+"</b>");e.innerHTML='<div class="de-video-obj"></div><center><a class="de-abtn" id="de-video-btn-prev" href="#" title="'+Ln.prevVideo[pn]+'">&#x25C0;</a> <a class="de-abtn" id="de-video-btn-hide" href="#" title="'+Ln.hideLnkList[pn]+'">&#x25B2;</a> <a class="de-abtn" id="de-video-btn-next" href="#" title="'+Ln.nextVideo[pn]+'">&#x25B6;</a></center><div id="de-video-list" style="max-width: '+(+Qi.YTubeWidth+40)+"px; max-height: "+(Cn.documentElement.clientHeight-+Qi.YTubeHeigh-110)+'px;"></div>';var i=e.lastChild;e.addEventListener("click",{linkList:i,listHidden:!1,player:e.firstChild,playerInfo:null,currentLink:null,handleEvent:function(e){var t,i=e.target;if(i.classList.contains("de-abtn"))switch(e.target.id){case"de-video-btn-hide":return this.listHidden?(this.linkList.style.display="",e.target.textContent=""):(this.linkList.style.display="none",e.target.textContent=""),this.listHidden=!this.listHidden,void k(e);case"de-video-btn-prev":return t=this.currentLink.parentNode,t=t.previousSibling||t.parentNode.lastChild,t.firstChild.click(),void k(e);case"de-video-btn-next":return t=this.currentLink.parentNode,t=t.nextSibling||t.parentNode.firstChild,t.firstChild.click(),void k(e)}else if(!i.classList.contains("de-video-link"))return;var n=i.videoInfo;this.playerInfo!==n&&(this.currentLink&&this.currentLink.classList.remove("de-current"),this.currentLink=i,i.classList.add("de-current"),this.playerInfo=n,Ut.addPlayer(this.player,n,i.classList.contains("de-ytube"))),k(e)}},!0);for(var n=0,s=t.length;s>n;++n){var a=t[n].cloneNode(!0);a.videoInfo=t[n].videoInfo,i.insertAdjacentHTML("beforeend",'<div class="de-entry '+Zi.cReply+'"></div>'),i.lastChild.appendChild(a),a.classList.remove("de-current"),0===n&&a.click()}}function at(){var e=i(".de-entry[de-removed]",Cn),t=e.length;t>0&&V().then(function(i){for(var n,r=0;t>r;++r)n=e[r],Z(i,n.getAttribute("de-host"),n.getAttribute("de-board"),n.getAttribute("de-num"),!0);X(i)})}function ot(e,t){var o,d,u,c,h;for(o in t)for(d in t[o]){u=t[o][d],c=nt(e,u.url?p("a",{href:u.url,text:o+"/"+d},null):p("b",{text:o+"/"+d},null)),o===Zi.host&&d===en&&c.classList.add("de-fav-current");for(h in t[o][d])"url"!==h&&(u=t[o][d][h],u.url.startsWith("http")||(u.url=(o===Zi.host?Zi.prot+"//":"http://")+o+u.url),c.insertAdjacentHTML("beforeend",'<div class="de-entry '+Zi.cReply+'" de-host="'+o+'" de-board="'+d+'" de-num="'+h+'" de-url="'+u.url+'"><input type="checkbox"><span class="de-btn-expthr" title="'+Ln.findThrd[pn]+'"></span><a href="'+u.url+'">'+h+'</a><span class="de-fav-title"> - '+u.txt+'</span><span class="de-fav-inf-posts">[<span class="de-fav-inf-old" title="'+Ln.oldPosts[pn]+'">'+u.cnt+'</span>] <span class="de-fav-inf-new" title="'+Ln.newPosts[pn]+'"'+(u["new"]?">":' style="display: none;">')+(u["new"]||0)+'</span> <span class="de-fav-inf-page" title="'+Ln.thrPage[pn]+'"></span> <span class="de-fav-inf-err">'+(u.err||"")+"</span></span></div>"),c.lastChild.firstChild.nextSibling.onclick=function(e){return Gt(e.target)})}e.insertAdjacentHTML("afterbegin","<b>"+Ln[c?"favThrds":"noFavThrds"][pn]+"</b>"),e.insertAdjacentHTML("beforeend","<hr>"),e.appendChild(wt("favor",function(e){V().then(function(t){return e(t,!0,X)})})),e.appendChild(g(Ln.refresh[pn],Ln.infoCount[pn],E(regeneratorRuntime.mark(function f(){var e,t,i,a,o,l,d,u,c,h,p,m;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=r("de-entry",Cn),a=!1,f.delegateYield(wn("DESU_Favorites"),"t8",3);case 3:o=f.t8,e=0,t=i.length;case 5:if(!(t>e)){f.next=33;break}if(l=void 0,d=i[e],u=d.getAttribute("de-host"),c=d.getAttribute("de-board"),h=d.getAttribute("de-num"),p=o[u][c][h],u===Zi.host&&"Closed"!==p.err){f.next=9;break}return f.abrupt("continue",30);case 9:return d=s("de-fav-inf-new",d),d.style.display="",d.textContent="",d.className="de-wait",f.prev=13,f.next=16,Qt(Zi.getThrdUrl(c,h));case 16:l=f.sent,f.next=25;break;case 19:return f.prev=19,f.t9=f["catch"](13),d.classList.remove("de-wait"),p.err=d.nextElementSibling.nextElementSibling.textContent=j(f.t9),a=!0,f.abrupt("continue",30);case 25:m=Zi.getPosts(l).length+1-d.previousElementSibling.textContent,d.textContent=m,d.className="de-fav-inf-new",0===m?d.style.display="none":(p["new"]=m,a=!0),n(Zi.qClosed,l)&&(p.err=d.nextElementSibling.nextElementSibling.textContent="Closed",a=!0);case 30:++e,f.next=5;break;case 33:a&&B("DESU_Favorites",JSON.stringify(o));case 34:case"end":return f.stop()}},f,this,[[13,19]])})))),e.appendChild(g(Ln.page[pn],Ln.infoPage[pn],E(regeneratorRuntime.mark(function m(){var e,t,n,r,o,l,d,u,c,h,p,f,g;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(o=i(".de-fav-current > .de-entry",Cn),l=o.length,d=0,u=[],l){m.next=3;break}return m.abrupt("return");case 3:for(_t(Ln.loading[pn],"load-pages",!0),e=0;l>e;++e)t=o[e],u.push([+t.getAttribute("de-num"),t=s("de-fav-inf-page",t),!1]),t.classList.add("de-wait");n=0,r=(Zi.lastPage||10)+1;case 6:if(!(n<endPAge)){m.next=24;break}return c=void 0,m.prev=8,m.next=11,Qt(Zi.getPageUrl(en,n));case 11:m.t10=m.sent,c=new Ri(m.t10,!0),m.next=18;break;case 15:return m.prev=15,m.t11=m["catch"](8),m.abrupt("continue",21);case 18:for(tNums=c.tNums,e=0;l>e;++e)h=u[e],-1!==tNums.indexOf(h[0])&&(h[1].classList.remove("de-wait"),h[1].textContent="@"+n,h[2]=!0,d++);if(d!==l){m.next=21;break}return m.abrupt("break",24);case 21:++n,m.next=6;break;case 24:for(e=0;l>e;++e)p=_slicedToArray(u[e],3),f=p[1],g=p[2],g||(f.classList.remove("de-wait"),f.textContent="@?");kt(a("de-alert-load-pages"));case 26:case"end":return m.stop()}},m,this,[[8,15]])})))),e.appendChild(g(Ln.clear[pn],Ln.clrDeleted[pn],E(regeneratorRuntime.mark(function v(){var e,t,i,n,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=0,t=r("de-entry",Cn),i=t.length;case 1:if(!(i>e)){o.next=17;break}return n=t[e],a=s("de-fav-inf-err",n),a.classList.add("de-wait"),o.prev=4,o.next=7,Qt(n.getAttribute("de-url"),!1,!1);case 7:o.next=13;break;case 9:o.prev=9,o.t12=o["catch"](4),a.textContent=j(o.t12),o.t12 instanceof zt&&404===o.t12.code&&n.setAttribute("de-removed","");case 13:a.classList.remove("de-wait");case 14:++e,o.next=1;break;case 17:at();case 18:case"end":return o.stop()}},v,this,[[4,9]])})))),e.appendChild(g(Ln.remove[pn],Ln.clrSelected[pn],function(){Mn(r("de-entry",Cn),function(e){l("input",e).checked&&e.setAttribute("de-removed","")}),at()})),Qi.animation&&(e.className="de-content de-cfg-open")}function lt(){function e(e,t){for(var i=t.length,r=!e;i--;)(n(t[i],Cn)||{}).disabled=r}e(Qi.ajaxUpdThr,['input[info="noErrInTitle"]','input[info="favIcoBlink"]','input[info="markNewPosts"]','input[info="desktNotif"]','input[info="updCount"]']),e(Qi.expandImgs,['input[info="imgNavBtns"]','input[info="resizeDPI"]','input[info="resizeImgs"]','input[info="minImgSize"]','input[info="zoomFactor"]','input[info="webmControl"]','input[info="webmVolume"]']),e(Qi.preLoadImgs,['input[info="findImgFile"]']),e(Qi.openImgs,['input[info="openGIFs"]']),e(Qi.linksNavig,['input[info="linksOver"]','input[info="linksOut"]','input[info="markViewed"]','input[info="strikeHidd"]','input[info="noNavigHidd"]']),e(Qi.strikeHidd&&2===Qi.linksNavig,['input[info="removeHidd"]']),e(Qi.addYouTube&&4!==Qi.addYouTube,['select[info="YTubeType"]','input[info="YTubeHD"]','input[info="addVimeo"]']),e(Qi.addYouTube,['input[info="YTubeWidth"]','input[info="YTubeHeigh"]','input[info="YTubeTitles"]']),e(Qi.ajaxReply,['input[info="sendErrNotif"]','input[info="scrAfterRep"]']),e(2===Qi.ajaxReply,['input[info="postSameImg"]','input[info="removeEXIF"]','input[info="removeFName"]']),e(Qi.addTextBtns,['input[info="txtBtnsLoc"]']),e(Qi.updScript,['select[info="scrUpdIntrv"]']),e(Qi.hotKeys,['input[info="loadPages"]'])}function dt(e,t,i){var n=p("input",{info:e,type:"checkbox"},{click:function(){Q(this.getAttribute("info")),lt(),i&&i(this)}});return n.checked=Qi[e],f("label",t?{"class":"de-block"}:null,[n,m(" "+Ln.cfg[e][pn])])}function ut(e,t,i){return p("input",{info:e,type:"text",size:t,value:Qi[e]},{keyup:i?i:function(){z(this.getAttribute("info"),this.value)}})}function ct(e,t,i){for(var n,r=0,s=Ln.cfg[e],a=s.sel[pn].length,o="";a>r;r++)o+='<option value="'+r+'">'+s.sel[pn][r]+"</option>";return n=h('<select info="'+e+'">'+o+"</select>"),n.addEventListener("change",i||function(){z(this.getAttribute("info"),this.selectedIndex),lt()},!1),n.selectedIndex=Qi[e],f("label",t?{"class":"de-block"}:null,[n,m(" "+s.txt[pn])])}function ht(e){return f("div",{"class":Zi.cReply+" de-cfg-tab-back",selected:!1},[p("div",{"class":"de-cfg-tab",text:Ln.cfgTab[e][pn],info:e},{click:function(){var e=this.parentNode;if("true"!==e.getAttribute("selected")){var t=s("de-cfg-body",Cn);t&&(t.className="de-cfg-unvis",n('.de-cfg-tab-back[selected="true"]',Cn).setAttribute("selected",!1)),e.setAttribute("selected",!0);var i=this.getAttribute("info"),r=a("de-cfg-"+i);r||(c(a("de-cfg-bar"),r="filters"===i?ft():"posts"===i?mt():"images"===i?gt():"links"===i?vt():"form"===i?bt():"common"===i?yt():At()),"filters"===i&&pt(a("de-spell-edit"))),r.className="de-cfg-body","filters"===i&&(a("de-spell-edit").value=hn.list),lt()}}})])}function pt(e){var t,i=e.scrollTop,n=e.parentNode.previousSibling.firstChild,r=n.numLines||1,s=15;if((i/12|1)>r-s){for(t="";s--;)t+=r++ +"<br>";n.insertAdjacentHTML("beforeend",t),n.numLines=r}n.scrollTop=i}function ft(){return f("div",{"class":"de-cfg-unvis",id:"de-cfg-filters"},[dt("hideBySpell",!1,$t),f("div",{id:"de-spell-panel"},[p("a",{id:"de-btn-addspell",text:Ln.add[pn],href:"#","class":"de-abtn"},{click:k,mouseover:Pt,mouseout:Et}),p("a",{text:Ln.apply[pn],href:"#","class":"de-abtn"},{click:function(e){k(e),z("hideBySpell",1),n('input[info="hideBySpell"]',Cn).checked=!0,$t()}}),p("a",{text:Ln.clear[pn],href:"#","class":"de-abtn"},{click:function(e){k(e),a("de-spell-edit").value="",$t()}}),h('<a href="https://github.com/SthephanShinkufag/Dollchan-Extension-Tools/wiki/Spells-'+(pn?"en":"ru")+'" class="de-abtn" target="_blank">[?]</a>')]),f("div",{id:"de-spell-div"},[h('<div><div id="de-spell-rowmeter"></div></div>'),f("div",null,[p("textarea",{id:"de-spell-edit",wrap:"off"},{keydown:function(){pt(this)},scroll:function(){pt(this)}})])]),dt("sortSpells",!0,function(){Qi.sortSpells&&$t()}),dt("menuHiddBtn",!0,null),dt("hideRefPsts",!0,null),dt("delHiddPost",!0,function(){Mn(r("de-post-hide",un.el),function(e){e.post.wrap.classList.toggle("de-hidden")}),Bi()})])}function mt(){return f("div",{"class":"de-cfg-unvis",id:"de-cfg-posts"},[dt("ajaxUpdThr",!1,tn?function(){Qi.ajaxUpdThr?rn.enable():rn.disable()}:null),f("label",null,[ut("updThrDelay",2,null),m(Ln.cfg.updThrDelay[pn])]),f("div",{"class":"de-cfg-depend"},[dt("noErrInTitle",!0,null),dt("favIcoBlink",!0,null),dt("markNewPosts",!0,function(){un.firstThr.clearPostsMarks()}),y("Notification"in window,dt("desktNotif",!0,function(){Qi.desktNotif&&Notification.requestPermission()})),dt("updCount",!0,function(){rn.toggleCounter(Qi.updCount)})]),ct("expandPosts",!0,null),ct("postBtnsCSS",!0,null),dt("noSpoilers",!0,Bi),dt("noPostNames",!0,Bi),dt("noPostScrl",!0,Bi),f("div",null,[dt("correctTime",!1,qt.toggleSettings),h('<a href="https://github.com/SthephanShinkufag/Dollchan-Extension-Tools/wiki/Settings-time-'+(pn?"en":"ru")+'" class="de-abtn" target="_blank">[?]</a>')]),f("div",{"class":"de-cfg-depend"},[f("div",null,[ut("timeOffset",2,null),m(Ln.cfg.timeOffset[pn])]),f("div",null,[ut("timePattern",25,null),m(Ln.cfg.timePattern[pn])]),f("div",null,[ut("timeRPattern",25,null),m(Ln.cfg.timeRPattern[pn])])])])}function gt(){return f("div",{"class":"de-cfg-unvis",id:"de-cfg-images"},[ct("expandImgs",!0,null),f("div",{style:"padding-left: 25px;"},[dt("imgNavBtns",!0,Bi),dt("resizeImgs",!0,null),y(vi.sizing.dPxRatio>1,dt("resizeDPI",!0,null)),f("div",null,[ut("minImgSize",4,function(){z("minImgSize",Math.max(+this.value,1))}),m(Ln.cfg.minImgSize[pn])]),ut("zoomFactor",4,function(){z("zoomFactor",Math.min(Math.max(+this.value,1),100))}),m(Ln.cfg.zoomFactor[pn]),dt("webmControl",!0,null),y($i.canPlayWebm,f("div",null,[ut("webmVolume",4,function(){z("webmVolume",Math.min(+this.value,100))}),m(Ln.cfg.webmVolume[pn])]))]),y(!$i.Presto,dt("preLoadImgs",!0,null)),y(!$i.Presto&&!Zi.mak&&!Zi.fch,f("div",{"class":"de-cfg-depend"},[dt("findImgFile",!0,null)])),dt("openImgs",!0,null),f("div",{"class":"de-cfg-depend"},[dt("openGIFs",!1,null)]),dt("imgSrcBtns",!0,null)])}function vt(){return f("div",{"class":"de-cfg-unvis",id:"de-cfg-links"},[ct("linksNavig",!0,null),f("div",{"class":"de-cfg-depend"},[f("div",null,[ut("linksOver",4,function(){z("linksOver",0|+this.value)}),m(Ln.cfg.linksOver[pn]),ut("linksOut",4,function(){z("linksOut",0|+this.value)}),m(Ln.cfg.linksOut[pn])]),dt("markViewed",!0,null),dt("strikeHidd",!0,null),f("div",{"class":"de-cfg-depend"},[dt("removeHidd",!1,Bi)]),dt("noNavigHidd",!0,null)]),dt("crossLinks",!0,null),dt("insertNum",!0,null),dt("addOPLink",!0,null),dt("addImgs",!0,null),dt("addMP3",!1,null),y("http:"===Zi.prot,dt("addVocaroo",!1,null)),ct("addYouTube",!0,null),f("div",{"class":"de-cfg-depend"},[f("div",null,[ct("YTubeType",!1,null),ut("YTubeWidth",4,null),m("?"),ut("YTubeHeigh",4,null),m(" "),dt("YTubeHD",!1,null)]),y(!$i.Opera11||$i.isGM,dt("YTubeTitles",!1,null)),dt("addVimeo",!0,null)])])}function bt(){return f("div",{"class":"de-cfg-unvis",id:"de-cfg-form"},[ct("ajaxReply",!0,null),y(dn.form,f("div",{"class":"de-cfg-depend"},[y(!$i.Opera11,f("div",null,[dt("postSameImg",!0,null),dt("removeEXIF",!1,null),dt("removeFName",!1,null),dt("sendErrNotif",!0,null)])),dt("scrAfterRep",!0,null)])),y(dn.form,ct("addPostForm",!0,function(){z("addPostForm",this.selectedIndex),dn.isBottom=1===Qi.addPostForm,dn.setReply(!1,!tn||Qi.addPostForm>1)})),dt("favOnReply",!0,null),y(dn.subj,dt("warnSubjTrip",!1,null)),y(dn.file&&!$i.Presto,dt("fileThumb",!0,function(){for(var e=dn.fileObj;!0&&(e.updateUtils(),e.next);e=e.next);e.empty&&e.hideInputs(),Zi.kus||Zi.multiFile||dn.setPlaceholders(),Bi()})),y(!Zi.iich&&dn.mail,f("div",null,[dt("addSageBtn",!1,null),dt("saveSage",!1,null)])),y(dn.capTr,ct("captchaLang",!0,null)),y(dn.txta,f("div",null,[ct("addTextBtns",!1,function(){z("addTextBtns",this.selectedIndex),dn.addTextPanel()}),dt("txtBtnsLoc",!1,dn.addTextPanel.bind(dn))])),y(dn.passw,f("div",null,[ut("passwValue",15,ti.setUserPassw),m(Ln.cfg.userPassw[pn]),g(Ln.change[pn],"",function(){n('input[info="passwValue"]',Cn).value=Math.round(1e15*Math.random()).toString(32),ti.setUserPassw()})])),y(dn.name,f("div",null,[ut("nameValue",15,ti.setUserName),dt("userName",!1,ti.setUserName)])),f("div",null,[m(Ln.dontShow[pn]),dt("noBoardRule",!1,Bi),y(dn.gothr,dt("noGoto",!1,function(){A(dn.gothr)})),y(dn.passw,dt("noPassword",!1,function(){A(dn.passw.parentNode.parentNode)})),y(dn.name,dt("noName",!1,function(){A(dn.name.parentNode.parentNode)}))])])}function yt(){return f("div",{"class":"de-cfg-unvis",id:"de-cfg-common"},[ct("scriptStyle",!0,function(){z("scriptStyle",this.selectedIndex);var e=qi();a("de-main").lang=e,a("de-qarea").firstChild.nextSibling.lang=e}),f("div",null,[dt("userCSS",!1,Bi),wt("css",function(e){e(Qi.userCSSTxt,!1,function(){z("userCSSTxt",this.value),Bi(),it("cfg",!0)})})]),dt("attachPanel",!0,function(){it("cfg",!1),Bi()}),dt("panelCounter",!0,Bi),dt("rePageTitle",!0,null),y($i.Anim,dt("animation",!0,null)),dt("closePopups",!0,null),f("div",null,[dt("hotKeys",!1,function(){Qi.hotKeys?sn?sn.enable():sn=new St:sn&&sn.disable()}),g(Ln.edit[pn],"",function(e){k(e),a("de-alert-edit-hotkeys")||St.readKeys().then(function(e){var t,i,n=Lt.getEditMarkup(e);_t(n[1],"edit-hotkeys",!1),t=a("de-alert-edit-hotkeys"),i=new Lt(t,e,n[0]),t.addEventListener("focus",i,!0),t.addEventListener("blur",i,!0),t.addEventListener("click",i,!0),t.addEventListener("keydown",i,!0),t.addEventListener("keyup",i,!0)})})]),f("div",{"class":"de-cfg-depend"},[ut("loadPages",2,null),m(Ln.cfg.loadPages[pn])]),y(!$i.isChromeStorage&&!$i.Presto||$i.isGM,f("div",null,[dt("updScript",!0,null),f("div",{"class":"de-cfg-depend"},[ct("scrUpdIntrv",!1,null),g(Ln.checkNow[pn],"",function(){_t(Ln.loading[pn],"updavail",!0),Hi(!0,function(e){_t(e,"updavail",!1)})})])])),y($i.isGlobal,f("div",null,[m(Ln.cfg.excludeList[pn]),p("input",{type:"text",id:"de-exclude-edit",size:45,style:"display: block;",value:yn},{keyup:function(){B("DESU_Exclude",this.value)}}),dt("turnOff",!0,function(){for(var e in Vi)e!==Zi.dm&&"global"!==e&&"lastUpd"!==e&&(Vi[e].disabled=Qi.turnOff);B("DESU_Config",JSON.stringify(Vi)||"")})]))])}function At(){function e(){var e,t,i=0;for(e in Gi)for(t in Gi[e])i++;return i}return f("div",{"class":"de-cfg-unvis",id:"de-cfg-info"},[h('<div style="padding-bottom: 10px;"><a href="https://github.com/SthephanShinkufag/Dollchan-Extension-Tools/wiki/versions" target="_blank">v'+En+'</a>&nbsp;|&nbsp;<a href="http://www.freedollchan.org/scripts/" target="_blank">Freedollchan</a>&nbsp;|&nbsp;<a href="https://github.com/SthephanShinkufag/Dollchan-Extension-Tools/wiki/'+(pn?"home-en/":"")+'" target="_blank">Github</a></div>'),h('<div><div style="display: inline-block; vertical-align: top; width: 186px; height: 230px;">'+Ln.thrViewed[pn]+Qi.stats.view+"<br>"+Ln.thrCreated[pn]+Qi.stats.op+"<br>"+Ln.thrHidden[pn]+e()+"<br>"+Ln.postsSent[pn]+Qi.stats.reply+'</div><table style="display: inline-block; padding-left: 7px; height: 230px; border-left: 1px solid grey; overflow-y: auto; border-collapse: separate; border-spacing: 1px; width: 170px;">'+(new ln).getTable()+"</table></div>"),g(Ln.debug[pn],Ln.infoDebug[pn],function(){_t(Ln.infoDebug[pn]+':<textarea readonly id="de-debug-info" class="de-editor"></textarea>',"help-debug",!1),a("de-debug-info").value=JSON.stringify({version:En,location:String(window.location),nav:$i,cfg:Qi,sSpells:hn.list.split("\n"),oSpells:zi["de-spells-"+en+(tn||"")],perf:(new ln).getData(!0)},function(e,t){return e in Sn&&(t===Sn[e]||"nameValue"===e||"passwValue"===e)?void 0:"stats"===e?void 0:t},"	")})])}function wt(e,t){return g(Ln.edit[pn],Ln.editInTxt[pn],function(t){t(function(t,i,n){var r,o=p("textarea",{"class":"de-editor",value:i?JSON.stringify(t,null,"	"):t},null);_t("","edit-"+e,!1),r=s("de-alert-msg",a("de-alert-edit-"+e)),r.appendChild(m(Ln.editor[e][pn])),r.appendChild(o),r.appendChild(g(Ln.save[pn],Ln.saveChanges[pn],i?function(t){var i;try{i=JSON.parse(this.value.trim().replace(/[\n\r\t]/g,"")||"{}")}finally{i?(t(i),kt(a("de-alert-edit-"+e)),kt(a("de-alert-err-invaliddata"))):_t(Ln.invalidData[pn],"err-invaliddata",!1)}}.bind(o,n):n.bind(o)))})}.bind(null,t))}function xt(e,t){e.appendChild(f("div",{"class":Zi.cReply},[p("div",{"class":"de-cfg-head",text:"Dollchan Extension Tools"},null),f("div",{id:"de-cfg-bar"},[ht("filters"),ht("posts"),ht("images"),ht("links"),y(dn.form||dn.oeForm,ht("form")),ht("common"),ht("info")]),f("div",{id:"de-cfg-btns"},[ct("language",!1,function(){z("language",pn=this.selectedIndex),w(a("de-main")),w(a("de-css")),w(a("de-css-dynamic")),Di(),tt(un.el),it("cfg",!1)
}),f("div",{style:"float: right;"},[wt("cfg",function(e){e(Qi,!0,function(e){Y(Zi.dm,e),window.location.reload()})}),y($i.isGlobal,g(Ln.load[pn],Ln.loadGlobal[pn],function(){"global"in Vi&&!P(Vi.global)?(Y(Zi.dm,null),window.location.reload()):_t(Ln.noGlobalCfg[pn],"err-noglobalcfg",!1)})),y($i.isGlobal,g(Ln.save[pn],Ln.saveGlobal[pn],function(){var e,t={},i=Vi[Zi.dm];for(e in i)"correctTime"!==e&&"timePattern"!==e&&"userCSS"!==e&&"userCSSTxt"!==e&&i[e]!==Sn[e]&&"stats"!==e&&(t[e]=i[e]);Y("global",t),it("cfg",!0)})),g(Ln.reset[pn],Ln.resetCfg[pn],function(){confirm(Ln.conReset[pn])&&(U("DESU_Config"),U("DESU_Favorites"),U("DESU_Posts_"+Zi.dm),U("DESU_Threads_"+Zi.dm),U("DESU_keys"),window.location.reload())})]),p("div",{style:"clear: both;"},null)])])),n('.de-cfg-tab[info="'+(t||"filters")+'"]',e).click()}function kt(e){e&&(e.closeTimeout=null,Qi.animation?($i.animEvent(e,function(e){var t=e&&e.parentNode;t&&t.removeChild(e)}),e.classList.add("de-close")):w(e))}function _t(e,t,i){var n,r=a("de-alert-"+t),s="de-alert-btn"+(i?" de-wait":""),o=i?"":" ";r?(l("div",r).innerHTML=e.trim(),n=l("span",r),n.className=s,n.textContent=o,clearTimeout(r.closeTimeout),!i&&Qi.animation&&($i.animEvent(r,function(e){e.classList.remove("de-blink")}),r.classList.add("de-blink"))):(r=a("de-alert").appendChild(f("div",{"class":Zi.cReply,id:"de-alert-"+t},[p("span",{"class":s,text:o},{click:function(){kt(this.parentNode)}}),h('<div class="de-alert-msg">'+e.trim()+"</div>")])),Qi.animation&&($i.animEvent(r,function(e){e.classList.remove("de-open")}),r.classList.add("de-open"))),!Qi.closePopups||i||t.contains("help")||t.contains("edit")||(r.closeTimeout=setTimeout(kt,4e3,r))}function Tt(e,t,i,n){var r,s,a,o=e.getBoundingClientRect();Qi.attachPanel&&i?(s="fixed",r="bottom: 25"):(s="absolute",r="top: "+(window.pageYOffset+o.bottom)),Cn.body.insertAdjacentHTML("beforeend",'<div class="'+Zi.cReply+' de-menu" style="position: '+s+"; right: "+(Cn.documentElement.clientWidth-o.right-window.pageXOffset)+"px; "+r+'px;">'+t+"</div>"),a=Cn.body.lastChild,a.addEventListener("mouseover",function(e){clearTimeout(e.currentTarget.odelay)},!0),a.addEventListener("mouseout",Et,!0),a.addEventListener("click",function(e){var t=e.target;if("de-menu-item"===t.className){setTimeout(this,10,t);do t=t.parentElement;while(!t.classList.contains("de-menu"));w(t)}}.bind(n),!1)}function Pt(e){e.target.odelay=setTimeout(function(e){switch(e.id){case"de-btn-addspell":return void Tt(e,'<div style="display: inline-block; border-right: 1px solid grey;"><span class="de-menu-item">'+"#words,#exp,#exph,#imgn,#ihash,#subj,#name,#trip,#img,<br>".split(",").join('</span><span class="de-menu-item">')+'</span></div><div style="display: inline-block;"><span class="de-menu-item">'+"#sage,#op,#tlen,#all,#video,#vauthor,#num,#wipe,#rep,#outrep".split(",").join('</span><span class="de-menu-item">')+"</span></div>",!1,function(e){var t=e.textContent,i=Jt.names.indexOf(t.substr(1));_(a("de-spell-edit"),t+(tn&&"#op"!==t&&"#rep"!==t&&"#outrep"!==t?"["+en+","+tn+"]":"")+(Jt.needArg[i]?"(":""))});case"de-btn-refresh":return void Tt(e,'<span class="de-menu-item">'+Ln.selAjaxPages[pn].join('</span><span class="de-menu-item">')+"</span>",!0,function(e){Fn(In.indexOf.call(e.parentNode.children,e)+1)});case"de-btn-savethr":return void Tt(e,'<span class="de-menu-item">'+Ln.selSaveThr[pn].join('</span><span class="de-menu-item">')+"</span>",!0,function(e){if(!a("de-alert-savethr")){var t=!!In.indexOf.call(e.parentNode.children,e);Nn.preloading?(_t(Ln.loading[pn],"savethr",!0),Nn.afterpreload=Ht.bind(null,t),Nn.progressId="savethr"):Ht(t)}});case"de-btn-audio-off":Tt(e,'<span class="de-menu-item">'+Ln.selAudioNotif[pn].join('</span><span class="de-menu-item">')+"</span>",!0,function(e){var t=In.indexOf.call(e.parentNode.children,e);rn.enable(),rn.toggleAudio(0===t?3e4:1===t?6e4:2===t?12e4:3e5),a("de-btn-audio-off").id="de-btn-audio-on"})}},Qi.linksOver,e.target)}function Et(e){var t=s("de-menu",Cn),i=e.relatedTarget;clearTimeout(e.target.odelay),!t||i&&(i===t||t.contains(i))||(t.odelay=setTimeout(w,75,t))}function St(){var e=this;S(St.readKeys).then(function(t){return e._init(t)})}function Lt(e,t,i){var n,s,a,o,l=In.slice.call(r("de-input-key",e));for(a=0,o=i.length;o>a;++a)if(s=i[a],0!==s)for(n=a+1;o>n;++n)if(s===i[n]){l[a].classList.add("de-error-key"),l[n].classList.add("de-error-key");break}this.aEl=e,this.keys=t,this.initKeys=JSON.parse(JSON.stringify(t)),this.allKeys=i,this.allInputs=l,this.errCount=r("de-error-key",e).length,0!==this.errCount&&(this.saveButton.disabled=!0)}function Ct(){window.addEventListener("message",function(e){var t=e.data.substring(1);switch(e.data[0]){case"A":return void("pform"===t.substr(10,5)?(si(x(t.substr(15))),n('iframe[name="de-iframe-pform"]',Cn).src="about:blank"):(oi(x(t.substr(15))),n('iframe[name="de-iframe-dform"]',Cn).src="about:blank"));case"B":a("de-iframe-fav").style.height=t+"px",kt(a("de-alert-load-favthr"))}},!1)}function It(e){var t,i,n=new Uint8Array(e),r=n.length;if(255===n[0]&&216===n[1]){for(t=0,i=0;r-1>t;t++)if(255===n[t])if(216===n[t+1])i++;else if(217===n[t+1]&&0===--i){t+=2;break}}else{if(137!==n[0]||80!==n[1])return{};for(t=0;r-7>t;t++)if(73===n[t]&&69===n[t+1]&&78===n[t+2]&&68===n[t+3]){t+=8;break}}if(t!==r&&r-t>60)for(r=t+90;r>t;t++){if(55===n[t]&&122===n[t+1]&&188===n[t+2])return{type:0,idx:t,data:e};if(80===n[t]&&75===n[t+1]&&3===n[t+2])return{type:1,idx:t,data:e};if(82===n[t]&&97===n[t+1]&&114===n[t+2])return{type:2,idx:t,data:e};if(79===n[t]&&103===n[t+1]&&103===n[t+2])return{type:3,idx:t,data:e};if(73===n[t]&&68===n[t+1]&&51===n[t+2])return{type:4,idx:t,data:e}}return{}}function Rt(e,t,i){if(!$i.hasWorker)return void(this.run=function(e,i,n){return n(t(e))});var n=window.URL.createObjectURL(new Blob(["self.onmessage = function(e) {\n		var info = ("+String(t)+")(e.data[1]);\n		if(info.data) {\n			self.postMessage([e.data[0], info], [info.data]);\n		} else {\n			self.postMessage([e.data[0], info]);\n		}\n	}"],{type:"text/javascript"}));for(this._pool=new I(e,this._createWorker.bind(this),null),this._freeWorkers=[],this._url=n,this._errFn=i;e--;)this._freeWorkers.push(new Worker(n))}function Nt(e,t,i){var n,r,s=i.type;"undefined"!=typeof s&&(2===s?(n="application/x-rar-compressed",r="rar"):1===s?(n="application/zip",r="zip"):0===s?(n="application/x-7z-compressed",r="7z"):3===s?(n="audio/ogg",r="ogg"):(n="audio/mpeg",r="mp3"),e.insertAdjacentHTML("afterend",'<a href="'+window.URL.createObjectURL(new Blob([new Uint8Array(i.data).subarray(i.idx)],{type:n}))+'" class="de-img-'+(s>2?"audio":"arch")+'" title="'+Ln.downloadFile[pn]+'" download="'+t.substring(0,t.lastIndexOf("."))+"."+r+'">.'+r+"</a>"))}function Ot(e){return E(Tn)(e,!0)}function Mt(e){return new Promise(function(t){if(e.onreadystatechange=function(e){4===e.readyState&&t(e)},Zi.fch&&$i.Firefox&&!e.url.startsWith("blob"))e.overrideMimeType="text/plain; charset=x-user-defined",GM_xmlhttpRequest(e);else{e.responseType="arraybuffer";try{C(e)}catch(i){t(null)}}})}function jt(e){if(Qi.preLoadImgs||Qi.openImgs||vn){var t,r=e?1:4,s=1,a=(vn||Qi.findImgFile)&&new Rt(r,It,function(e){console.error("FILE DETECTOR ERROR, line: "+e.lineno+" - "+e.message)});(vn||Qi.preLoadImgs)&&(t=new I(r,E(regeneratorRuntime.mark(function g(e,t){var i,r,o,l,d,u,c,h,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_slicedToArray(t,5),r=i[0],o=i[1],l=i[2],d=i[3],u=i[4],e.next=8,Ot(r);case 8:c=e.sent,t&&(h=r.substring(r.lastIndexOf("/")+1),p=n(Zi.qImgLink,Zi.getImgWrap(o)),p.setAttribute("download",h),o.href=window.URL.createObjectURL(new Blob([t],{type:l})),o.setAttribute("de-name",h),"video/webm"===l&&u.setAttribute("de-video",""),d&&(u.src=o.href),a&&a.run(t.buffer,[t.buffer],Nt.bind(null,p,h))),Nn.progressId&&_t(Ln.loadImage[pn]+s+"/"+len,Nn.progressId,!0),s++;case 12:case"end":return e.stop()}},g,this)})),function(){Nn.preloading=!1,Nn.afterpreload&&(Nn.afterpreload(),Nn.afterpreload=Nn.progressId=null),a&&a.clear()}),Nn.preloading=!0);for(var o=i(Zi.qThumbImages,e||un.el),l=0,u=o.length;u>l;++l){var c=o[l],h=d(c=o[l],"A");if(h){var p=void 0,f=h.href,m=!!Qi.openImgs;if(/\.gif$/i.test(f))p="image/gif";else{if(/\.jpe?g$/i.test(f))p="image/jpeg";else if(/\.png$/i.test(f))p="image/png";else{if(!/\.webm$/i.test(f))continue;p="video/webm",m=!1}m&=!Qi.openGIFs}t?t.run([f,h,p,m,c]):m&&(c.src=f)}}t&&t.complete()}}function Ft(e){var t=Nn.canvas||(Nn.canvas=Cn.createElement("canvas"));return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),new Uint8Array(atob(t.toDataURL("image/png").split(",")[1]).split("").map(function(e){return e.charCodeAt()}))}function Ht(t){var r,s,u,c,h=0,f=1,m="",g=new R,v=t?Cn:Cn.documentElement.cloneNode(!0);Nn.pool=new I(4,E(regeneratorRuntime.mark(function b(e,i){var r,s,a,o,l,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_slicedToArray(i,4),s=r[0],a=r[1],o=r[2],l=r[3],d=a.replace(/[\\\/:*?"<>|]/g,"_"),e.next=8,Ot(s);case 8:h=e.sent,u.value=f,c.innerHTML=f,f++,l?(h||(m+="<br>"+Ln.cantLoad[pn]+'<a href="'+s+'">'+s+"</a><br>"+Ln.willSavePview[pn],_t(Ln.loadErrors[pn]+m,"floadwarn",!1),d="thumb-"+d.replace(/\.[a-z]+$/,".png"),h=Ft(o)),t||(o.classList.add("de-thumb"),o.src=l.href=n(Zi.qImgLink,Zi.getImgWrap(l)).href=d="images/"+d),g.addFile(d,h)):h&&h.length>0?g.addFile(o.href=o.src="data/"+d,h):w(o);case 13:case"end":return e.stop()}},b,this)})),function(){var i,n,r,s=Zi.dm+"-"+en.replace(/[\\\/:*?"<>|]/g,"")+"-"+tn;t||(r=Cn.doctype,l("head",v).insertAdjacentHTML("beforeend",'<script type="text/javascript" src="data/dollscript.js"></script>'),g.addString("data/dollscript.js","("+String(e)+")(null, true);"),g.addString(s+".html","<!DOCTYPE "+r.name+(r.publicId?' PUBLIC "'+r.publicId+'"':r.systemId?" SYSTEM":"")+(r.systemId?' "'+r.systemId+'"':"")+">"+v.outerHTML)),i=window.URL.createObjectURL(g.get()),n=p("a",{href:i,download:s+(t?"-images.tar":".tar")},null),Cn.body.appendChild(n),n.click(),setTimeout(function(e,t){window.URL.revokeObjectURL(t),w(e)},0,n,i),w(a("de-alert-filesload")),Nn.pool=g=m=h=f=t=u=c=null}),r=In.slice.call(i(Zi.qThumbImages,n("[de-form]",v))),h+=r.length,r.forEach(function(e){var t,i=d(e,"A");i&&(t=i.href,Zi.tiny&&(t=t.replace(/^.*?\?v=|&.*?$/g,"")),Nn.pool.run([t,i.getAttribute("de-name")||t.substring(t.lastIndexOf("/")+1),e,i]))}),t||(s=[],Mn(i('#de-main, .de-parea, .de-post-btns, #de-qarea, .de-refmap, #de-updater-div, .de-video-obj, link[rel="alternate stylesheet"], script, '+Zi.qPostForm,v),w),Mn(o("a",v),function(e){var t,i=e.textContent;e.href=">"===i[0]&&">"===i[1]&&(t=+i.substr(2))&&t in Wi?Zi.anchor+t:M(e.href),e.classList.contains("de-link-pref")||(e.className="de-link-pref "+e.className)}),Mn(i("."+Zi.cRPost,v),function(e,t){e.setAttribute("de-num",0===t?tn:Zi.getPNum(e))}),Mn(i("link, *[src]",v),function(e){if(-1===r.indexOf(e)){var t,i,n,a,o="LINK"===e.tagName?e.href:e.src;if(!this.test(o))return void w(e);if(a=o.substring(o.lastIndexOf("/")+1).replace(/[\\\/:*?"<>|]/g,"_").toLowerCase(),-1!==s.indexOf(a)){for(t=o.lastIndexOf("."),n=o.substring(t),o=o.substring(0,t),a=a.substring(0,a.lastIndexOf(".")),i=0;t=a+"("+i+")"+n,-1!==s.indexOf(t);++i);a=t}s.push(a),Nn.pool.run([o,a,e,null]),h++}}.bind(new RegExp("^\\/\\/?|^https?:\\/\\/([^\\/]*.)?"+N(Zi.dm)+"\\/","i")))),_t((t?Ln.loadImage[pn]:Ln.loadFile[pn])+'<br><progress id="de-loadprogress" value="0" max="'+h+'"></progress> <span>1</span>/'+h,"filesload",!0),u=a("de-loadprogress"),c=u.nextElementSibling,Nn.pool.complete(),r=null}function qt(e,t,i,n,r){return qt.checkPattern(e)?void(this.disabled=!0):(this.regex=e.replace(/(?:[sihdny]\?){2,}/g,function(){return"(?:"+arguments[0].replace(/\?/g,"")+")?"}).replace(/\-/g,"[^<]").replace(/\+/g,"[^0-9]").replace(/([sihdny]+)/g,"($1)").replace(/[sihdny]/g,"\\d").replace(/m|w/g,"([a-zA-Z--]+)"),this.pattern=e.replace(/[\?\-\+]+/g,"").replace(/([a-z])\1+/g,"$1"),this.diff=parseInt(i,10),this.sDiff=(this.diff<0?"":"+")+this.diff,this.arrW=Ln.week[n],this.arrM=Ln.month[n],this.arrFM=Ln.fullMonth[n],this.rPattern=t,void(this.onRPat=r))}function Dt(e){return new Promise(function(t){return GM_xmlhttpRequest({method:"GET",url:Zi.prot+"//gdata.youtube.com/feeds/api/videos/"+e+"?alt=json&fields=title/text(),author/name,yt:statistics/@viewCount,published",onreadystatechange:function(e){4===e.readyState&&t(e)}})})}function Bt(e,t){GM_xmlhttpRequest({method:"GET",url:Zi.prot+"//vimeo.com/api/v2/video/"+t[1]+".json",onload:function(t){var i=JSON.parse(t.responseText)[0],n=new RegExp(/(.*)\s(.*)?/).exec(i.upload_date);e.textContent=i.title,e.title=Ln.author[pn]+i.user_name+", "+Ln.views[pn]+i.stats_number_of_plays+", "+Ln.published[pn]+n[1]}})}function Ut(e){var t=void 0===arguments[1]?null:arguments[1],i=void 0===arguments[2]?null:arguments[2];this.post=e,this.vData=[],t&&i&&Object.defineProperties(this,{player:{value:t},playerInfo:{writable:!0,value:i}})}function Yt(e){var t,r,s,a,o,l;if(Qi.addMP3)for(a=0,o=i('a[href*=".mp3"]',e?e.el:un.el),l=o.length;l>a;++a)r=o[a],("_blank"===r.target||"nofollow"===r.rel)&&(s=r.href,t=(e||Zi.getPostEl(r).post).mp3Obj,$i.canPlayMP3?n('audio[src="'+s+'"]',t)||(t.insertAdjacentHTML("beforeend",'<p><audio src="'+s+'" preload="none" controls></audio></p>'),r=t.lastChild.firstChild,r.addEventListener("play",rn.addPlayingTag,!1),r.addEventListener("pause",rn.removePlayingTag,!1)):n('object[FlashVars*="'+s+'"]',t)||t.insertAdjacentHTML("beforeend",'<object data="http://junglebook2007.narod.ru/audio/player.swf" type="application/x-shockwave-flash" wmode="transparent" width="220" height="16" FlashVars="playerID=1&amp;bg=0x808080&amp;leftbg=0xB3B3B3&amp;lefticon=0x000000&amp;rightbg=0x808080&amp;rightbghover=0x999999&amp;rightcon=0x000000&amp;righticonhover=0xffffff&amp;text=0xffffff&amp;slider=0x222222&amp;track=0xf5f5dc&amp;border=0x666666&amp;loader=0x7fc7ff&amp;loop=yes&amp;autostart=no&amp;soundFile='+s+'"><br>'));if(Qi.addVocaroo)for(a=0,o=i('a[href*="vocaroo.com"]',e?e.el:un.el),l=o.length;l>a;++a)r=o[a],s=r.href.split("/").pop(),(t=r.previousSibling)&&"de-vocaroo"===t.className||r.insertAdjacentHTML("beforebegin",'<div class="de-vocaroo"><embed width="148" height="44" wmode="transparent" type="application/x-shockwave-flash" src="http://vocaroo.com/player.swf?playMediaID='+s+'"></div>')}function zt(e,t){this.name="AjaxError",this.code=e,this.message=t}function Qt(e){var t=void 0===arguments[1]?!0:arguments[1],i=void 0===arguments[2]?!0:arguments[2];return new Promise(function(r,s){return GM_xmlhttpRequest({method:"GET",url:$i.fixLink(e),onreadystatechange:function(e){if(4===e.readyState)if(200!==e.status)s(new zt(e.status,e.statusText));else if(i){var a,o=e.responseText;(Zi.futa?/<!--gz-->$/:/<\/html?>[\s\n\r]*$/).test(o)&&(a=t?n(Zi.qDForm,x(o)):x(o)),a?r(a):s(new zt(0,Ln.errCorruptData[pn]))}else r(null)}})})}function Vt(e){return new Promise(function(t,i){return GM_xmlhttpRequest({method:"GET",url:$i.fixLink(e),onreadystatechange:function(e){if(4===e.readyState)if(304===e.status)t(null);else if(200===e.status)try{t(JSON.parse(e.responseText))}catch(n){i(n)}else i(new zt(xht.status,e.message))}})})}function Gt(e){var t,i=e.parentNode,n=l("iframe",i),r=s("de-content",Cn);return n?(w(n),void(r.style.overflowY="auto")):(t=Wi[i.getAttribute("de-num")])&&!t.hidden?void scrollTo(0,window.pageYOffset+t.el.getBoundingClientRect().top):(w(a("de-iframe-fav")),s("de-content",Cn).style.overflowY="scroll",_t(Ln.loading[pn],"load-favthr",!0),void i.insertAdjacentHTML("beforeend",'<iframe name="de-iframe-fav" id="de-iframe-fav" src="'+l("a",i).href+'" scrolling="no" style="display: block; border: none; width: '+(Cn.documentElement.clientWidth-55)+'px; height: 1px;"></iframe>'))}function Wt(e,t){var i=e instanceof zt,n=i?e.code:0;200===n||304===n?kt(a("de-alert-newposts")):i&&0===n?_t(e.message||Ln.noConnect[pn],"newposts",!1):(_t(Ln.thrNotFound[pn]+tn+"): \n"+j(e),"newposts",!1),-1!==t&&(Cn.title="{"+n+"} "+Cn.title))}function Jt(e){e?this._read(!0):this.disable(!1)}function Kt(e){this._line=1,this._col=1,this._sList=e,this.hasError=!1}function Xt(e,t,i){this._post=e,this._ctx=[i,t,0],this._deep=0}function Zt(){if(hn.enable){Ji=tn?"1".repeat(un.firstThr.pcount).split(""):[];for(var e=un.firstThr.op;e;e=e.next)e.spellHidden&&!e.userToggled&&e.spellUnhide()}kt(a("de-alert-help-err-spell"))}function $t(){var e,t=a("de-spell-edit"),i=t.value;i&&(e=hn.parseText(i))?(Zt(),hn.setSpells(e,!0),t.value=hn.list):(i?Yi["__de-spells"]='{"hide": false, "data": null}':(Zt(),hn.disable(),z("spells",""),Yi["__de-spells"]='{"hide": false, "data": ""}'),Yi.removeItem("__de-spells"),n('input[info="hideBySpell"]',Cn).checked=hn.enable=!1)}function ei(e,t,i){var r,s=a("de-spell-edit"),o=s&&s.value,l=n('input[info="hideBySpell"]',Cn);if(!o||(r=hn.parseText(o))){if(Zt(),hn.addSpell(e,t,tn?[en,tn]:null,i,r),o=hn.list,z("hideBySpell",!!o),o){for(var d=un.firstThr.op;d;d=d.next)hn.check(d);hn.end(W)}else z("spells",""),hn.enable=!1;return void(s&&(l.checked=!!(s.value=o)))}hn.enable=!1,l&&(l.checked=!1)}function ti(e,t,i,r){function s(e,t){return r.evaluate(e,t,null,8,null).singleNodeValue}if(this.oeForm=n('form[name="oeform"], form[action*="paint"]',r),!t&&!e)return void(this.oeForm?Qt(Zi.getThrdUrl(en,un.firstThr.num),!1).then(function(e){dn=new ti(n(Zi.qPostForm,e),!0,i,e)},function(){dn=new ti(null,!0,i,r)}):this.form=null);var a='.//tr[not(contains(@style,"none"))]//input[not(@type="hidden") and ';this.tNum=tn,this.form=e,this.cap=n('input[type="text"][name*="aptcha"], div[id*="captcha"]',e),this.txta=n('tr:not([style*="none"]) textarea:not([style*="display:none"])',e),this.subm=n('tr input[type="submit"]',e),this.file=n('tr input[type="file"]',e),this.file&&(this.fileTd=d(this.file,"TD")),this.passw=n('tr input[type="password"]',e),this.dpass=n('input[type="password"], input[name="password"]',un.el),this.name=s(a+'(@name="field1" or @name="name" or @name="internal_n" or @name="nya1" or @name="akane")]',e),this.mail=s(a+(Zi._410?'@name="sage"]':'(@name="field2" or @name="em" or @name="sage" or @name="email" or @name="nya2" or @name="nabiki" or @name="dont_bump")]'),e),this.subj=s(a+'(@name="field3" or @name="sub" or @name="subject" or @name="internal_s" or @name="nya3" or @name="kasumi")]',e),this.video=n('tr input[name="video"], tr input[name="embed"]',e),this.gothr=Zi.qPostRedir&&(a=n(Zi.qPostRedir,e))&&d(a,"TR"),i&&this._init()}function ii(e,t,i){this.el=t,this.place=t.parentNode,this.form=e,this.prev=i,i&&(i.next=this)}function ni(e,t,i){this.dir=e,this.vertical="top"===e||"bottom"===e,this.qa=i.qArea,this.qaStyle=i.qArea.style,this.txStyle=i.txta.style,t.addEventListener("mousedown",this,!1)}function ri(e){var t="",r=n(Zi.qDForm,e);if(e.body.hasChildNodes()&&!r){if(Zi.mak)try{return Ln.error[pn]+":\n"+JSON.parse(e.body.innerHTML).Reason}catch(s){}for(var a=i(Zi.qError,e),o=0,l=a.length;l>o;++o)t+=a[o].innerHTML+"\n";t=t.replace(/<a [^>]+>.+|<br.+/,"")||Ln.error[pn]+":\n"+e.body.innerHTML,t=/:null|successful|uploaded|updating||[\.]/i.test(t)?"":t.replace(/"/g,"'")}return t}function si(e){Zi.krau&&(dn.form.action=dn.form.action.split("?")[0],a("postform_row_progress").style.display="none",Zi.btnZeroLUTime.click()),rn["continue"]();var t,i=ri(e);return i?(dn.isQuick&&dn.setReply(!0,!1),/captch|||verifizie/i.test(i)&&dn.refreshCapImg(!0),_t(i,"upload",!1),void rn.sendErrNotif()):(dn.txta.value="",dn.file&&dn.delFilesUtils(),dn.video&&(dn.video.value=""),Qi.stats[dn.tNum?"reply":"op"]++,Y(Zi.dm,Qi),dn.tNum?(t=Zi.tiny||Zi.kus||null!==Zi.qPostRedir&&!n(Zi.qPostRedir,e)?null:n(Zi.qDForm,e),tn?(un.firstThr.clearPostsMarks(),t?(un.firstThr.loadNewFromForm(t),Qi.scrAfterRep&&scrollTo(0,window.pageYOffset+un.firstThr.last.el.getBoundingClientRect().top),kt(a("de-alert-upload"))):un.firstThr.loadNew(!0).then(function(){return zt.Success},function(e){return e}).then(function(e){Wt(e,0),Qi.scrAfterRep&&scrollTo(0,window.pageYOffset+un.firstThr.last.el.getBoundingClientRect().top),kt(a("de-alert-upload"))})):t?(Wi[dn.tNum].thr.loadFromForm(Rn,!1,t),kt(a("de-alert-upload"))):Wi[dn.tNum].thr.load(Rn,!1,!1).then(function(){return kt(a("de-alert-upload"))}),dn.closeQReply(),dn.refreshCapImg(!1),void(dn.filesCount=0)):void(window.location=Zi.getThrdUrl(en,Zi.getTNum(n(Zi.qDForm,e)))))}function ai(){var e=a("de-alert-deleting");e&&(kt(e),_t(Ln.succDeleted[pn],"deleted",!1))}function oi(e){var t,n,r,s,a,o,l,d=ri(e);if(d)return _t(Ln.errDelete[pn]+d,"deleting",!1),void rn.sendErrNotif();for(o=[],l=(Cn.location.hash.match(/\d+/)||[null])[0],l&&(a=Wi[l])&&(a.isOp||(a.el.className=Zi.cReply),Cn.location.hash=""),n=0,r=i("."+Zi.cRPost+" input:checked",un.el),s=r.length;s>n;++n)t=r[n],t.checked=!1,tn||-1!==o.indexOf(l=Zi.getPostEl(t).post.tNum)||o.push(l);tn?(un.firstThr.clearPostsMarks(),un.firstThr.loadNew(!1).then(function(){return zt.Success},function(e){return e}).then(function(e){Wt(e,0),ai()},!1)):o.forEach(function(e){Wi[e].thr.load(Rn,!1,!1).then(ai)})}function li(e,t,n){this.boundary="---------------------------"+Math.round(1e11*Math.random()),this.data=[],this.busy=0,this.error=!1,this.url=e.action,this.fn=n,Mn(i('input:not([type="submit"]):not([type="button"]), textarea, select',e),this.append.bind(this)),this.append(t),this.submit()}function di(e){var t,i,n,r,s,a,o,l=new Uint8Array(e[0]),d=e[1],u=e[2],c=d*u,h=8,p=8,f=3,m=256/f,g=256/(f-1),v=0;for(t=0,i=0;c>t;t++,i+=4)l[t]=.3*l[i]+.59*l[i+1]+.11*l[i+2];for(t=0;h>t;t++)for(i=0;p>i;i++)c=t/(h-1)*(u-1),n=Math.min(0|c,u-2),a=c-n,c=i/(p-1)*(d-1),r=Math.min(0|c,d-2),s=c-r,v=(v<<4)+Math.min(g*((l[n*d+r]*(1-s)*(1-a)+l[n*d+r+1]*s*(1-a)+l[(n+1)*d+r+1]*s*a+l[(n+1)*d+r]*(1-s)*a)/m|0),255),o=4026531840&v,o&&(v^=o>>>24),v&=~o;return{hash:v}}function ui(e,t){un.el.insertAdjacentHTML("beforeend",'<div style="display: none;"><div id="de-img-btn-next" de-title="'+Ln.nextImg[pn]+'"><div></div></div><div id="de-img-btn-prev" de-title="'+Ln.prevImg[pn]+'"><div></div></div></div>');var i=un.el.lastChild;this._btns=i,this._btnsStyle=i.style,this._nextFn=e,this._prevFn=t,window.addEventListener("mousemove",this,!1),i.addEventListener("mouseover",this,!1)}function ci(e){this._show(e)}function hi(){}function pi(e,t){this.post=e,this.el=t}function fi(e,t){this.post=e,this.el=t}function mi(e){for(var t,n=0,r=i(Zi.qImgLink,e),s=r.length;s>n;n++)t=r[n],/google\.|tineye\.com|iqdb\.org/.test(t.href)?w(t):t.firstElementChild||t.insertAdjacentHTML("beforebegin",'<span class="de-btn-src" de-menu="imgsrc"></span>')}function gi(e){for(var t=0,n=i(Zi.qMsgImgLink,e),r=n.length;r>t;++t){var s=n[t];if("SMALL"===s.parentNode.tagName)return;var a=s.cloneNode(!1);a.target="_blank",a.innerHTML='<img class="de-img-pre" src="'+a.href+'">',u(s,a)}}function vi(e,t,i,r,s,a,o){var l,d;this.count=r,this.el=e,this.isOp=s,this.num=i,this.thr=t,this.prev=a,a&&(a.next=this),o||(this._pref=l=n(Zi.qRef,e),this.ref=[],e.post=this,d='<span class="de-post-btns'+(s?"":" de-post-counter")+'"><span class="de-btn-hide" de-menu="hide"></span><span class="de-btn-rep"></span>',s&&(tn||(d+='<span class="de-btn-expthr" de-menu="expand"></span>'),d+='<span class="de-btn-fav" title="'+Ln.addFav[pn]+'"></span>'),this.sage=Zi.getSage(e),this.sage&&(d+='<span class="de-btn-sage" title="SAGE"></span>'),l.insertAdjacentHTML("afterend",d+"</span>"),this.btns=l.nextSibling,1===Qi.expandPosts&&this.trunc&&this._getFull(this.trunc,!0),e.addEventListener("mouseover",this,!0))}function bi(e){this.el=e.el,this.post=e}function yi(e){for(var t=In.slice.call(i(Zi.qThumbImages,e.el)),n=[],r=0,s=t.length;s>r;++r)n.push(new fi(e,t[r],r));this.data=n,this.els=t,this.length=this.els.length,this.contains=0!==this.length}function Ai(e){var t,i;if(Qi.addImgs){t=In.slice.call(r("de-img-pre",this.el));for(var n=0,s=t.length;s>n;++n)val.push(new pi(e,t[n],n))}else t=i=[];this.data=i,this.els=t,this.length=t.length,this.count=this.length+e.images.length,this._attachedImages=e.images}function wi(e,t,i,n){var r,s=this,a=Wi[n];return this.parent=e,this._link=t,this.num=n,this.thr=e.thr,Object.defineProperty(this,"tNum",{value:i}),!a||a.isOp&&e.isPview&&e._loaded?(r=t.pathname.match(/^\/?(.+\/)/)[1].replace(Zi.res,"").replace(/\/$/,""),a=this._cache&&this._cache[r+i]&&this._cache[r+i].getPost(n),void(a?(this._loaded=!0,this._showPost(a)):(this._showText('<span class="de-wait">'+Ln.loading[pn]+"</span>"),Qt(Zi.getThrdUrl(r,i)).then(function(e){return s._onload(r,e)},function(e){return s._onerror(e)})))):void this._showPost(a)}function xi(e,t,i){var r,s,a,o={},l=vi.prototype,d=n(Zi.qThread,e)||e,u=Zi.getPosts(d);for(r=0,s=u.length;s>r;++r)a=u[r],o[Zi.getPNum(a)]=Object.create(l,{count:{value:r+1},el:{value:a,writable:!0},inited:{value:!1},pvInited:{value:!1,writable:!0},ref:{value:[],writable:!0}});o[i]=this._opObj=Object.create(l,{inited:{value:!1},isOp:{value:!0},msg:{value:n(Zi.qMsg,d),writable:!0},ref:{value:[],writable:!0}}),this._brd=t,this._thr=d,this._tNum=i,this._tUrl=Zi.getThrdUrl(t,i),this._posts=o,2===Qi.linksNavig&&Pi(o,this._tUrl)}function ki(){this.style[$i.animName]&&(this.classList.remove("de-pview-anim"),this.style.cssText=this.newPos,this.newPos=!1,Mn(r("de-css-move",Cn.head),w),this.removeEventListener($i.animEnd,ki,!1))}function _i(e,t,i){if(t.link!==e){var n,r,s,a,o=e.getBoundingClientRect(),l=o.left+window.pageXOffset+e.offsetWidth/2,d=o.top+window.pageYOffset,u=Cn.documentElement.clientWidth,c=u/2>l,h=c?l:l-Math.min(parseInt(t.offsetWidth,10),l-10),p="max-width:"+(u-h-10)+"px; left:"+h+"px;";if(i?(s=t.style.cssText,t.style.cssText="opacity: 0; "+p):t.style.cssText=p,r=t.offsetHeight,n=r+o.top+e.offsetHeight<Cn.documentElement.clientHeight||o.top-r<5,r=(n?d+e.offsetHeight:d-r)+"px",t.link=e,t.aLeft=c,t.aTop=n,!i)return void(t.style.top=r);a="de-movecss-"+Math.round(1e3*Math.random()),b("@"+$i.cssFix+"keyframes "+a+" {to { "+p+" top:"+r+"; }}").className="de-css-move",t.newPos?(t.style.cssText=t.newPos,t.removeEventListener($i.animEnd,ki,!1)):t.style.cssText=s,t.newPos=p+" top:"+r+";",t.addEventListener($i.animEnd,ki,!1),t.classList.add("de-pview-anim"),t.style[$i.animName]=a}}function Ti(e,t){var i,n,r,s="<a "+Zi.rLinkClick+' href="'+t+Zi.anchor,a=['<div class="de-refmap">'];for(i=0,n=e.ref,r=n.length;r>i;++i)a.push(s,n[i],'" class="de-link-ref">&gt;&gt;',n[i],'</a><span class="de-refcomma">, </span>');a.push("</div>"),Zi.dobr?(n=e.msg.nextElementSibling,n&&n.insertAdjacentHTML("beforeend",a.join(""))):e.msg.insertAdjacentHTML("afterend",a.join(""))}function Pi(e,t){var i,n,r,s,a,l,d,u,c,h=un.tNums;for(c in e)for(a=0,d=o("a",e[c].msg),l=d.length;l>a;++a)i=d[a].textContent,">"===i[0]&&">"===i[1]&&(n=+i.substr(2))&&n in e&&(r=e[n],s=r.ref,-1===s.indexOf(c)&&(s.push(c),r.hasRef=!0),-1!==h.indexOf(n)&&d[a].classList.add("de-ref-op"),t&&(u=d[a].getAttribute("href"),"#"===u[0]&&d[a].setAttribute("href",t+u)))}function Ei(e,t){var i,n,r,a,l,d,u,c,h,p=e.num,f=t&&Qi.strikeHidd&&0!==vi.hiddenNums.length?vi.hiddenNums:null,m=t&&un.tNums;for(u=0,h=o("a",e.msg),c=h.length;c>u;++u)if(a=h[u],i=a.textContent,">"===i[0]&&">"===i[1]&&(l=+i.substr(2))&&l in Wi){if(d=Wi[l],tn||(a.href="#"+(Zi.fch?"p":"")+l),t){if(f&&-1!==f.lastIndexOf(l)&&a.classList.add("de-link-hid"),-1!==m.indexOf(l)&&a.classList.add("de-ref-op"),-1!==d.ref.indexOf(p))continue;d.ref.push(p),e.hasRef=!0,Qi.hideRefPsts&&d.hidden&&(e.hidden||e.hideRefs(),e.setVisib(!0),e.setNote("reference to >>"+l))}else if(d.hasRef){if(n=d.ref,r=n.indexOf(p),-1===r)continue;if(n.splice(r,1),0===n.length){d.hasRef=!1,w(s("de-refmap",d.el));continue}}w(s("de-refmap",d.el)),Ti(d,"")}}function Si(e,t,i){var r,a,o,l=Zi.getPosts(e),d=l.length,u=Zi.getTNum(e),h=tn?1:Zi.getOmitted(n(Zi.qOmitted,e),d);for(this.num=u,this.pcount=h+d,this.el=e,this.prev=t,t&&(t.next=this),Wi[u]=o=this.op=e.post=new vi(Zi.getOp(e),this,u,0,!0,t?t.last:null,i),r=0;d>r;r++)u=Zi.getPNum(a=l[r]),Wi[u]=o=new vi(a,this,u,h+r,!1,o,i);this.last=o,i||(e.style.counterReset="de-cnt "+h,e.removeAttribute("id"),e.setAttribute("de-thread",null),Rn=Math.max(Rn,d),(Zi._420||Zi.tiny)&&(a=e.lastChild,a!==this.op.el&&c(e,a),w(s("clear",e))))}function Li(){"toJSON"in In&&delete In.toJSON,"URL"in window||(window.URL=window.webkitURL);var e=window.navigator.userAgent,i=e.contains("Gecko/"),n=window.opera?+window.opera.version():0,r=n?12.1>n:!1,s=e.contains("WebKit/"),a=s&&e.contains("Chrome/"),o=s&&!a,l=!("function"!=typeof GM_setValue||a&&GM_setValue.toString().contains("not supported")),d=window.chrome&&!!window.chrome.storage,u=!!t&&!e.contains("Opera Mobi");return"function"!=typeof GM_xmlhttpRequest&&(window.GM_xmlhttpRequest=C),Object.defineProperties({Firefox:i,Opera11:r,Presto:n,WebKit:s,Chrome:a,Safari:o,isGM:l,isChromeStorage:d,isScriptStorage:u,isGlobal:l||d||u,scriptInstall:i?"undefined"!=typeof GM_info?"Greasemonkey":"Scriptish":d?"Chrome extension":l?"Monkey":"Native userscript",cssFix:s?"-webkit-":r?"-o-":"",Anim:!r,animName:s?"webkitAnimationName":r?"OAnimationName":"animationName",animEnd:s?"webkitAnimationEnd":r?"oAnimationEnd":"animationend",animEvent:function(e,t){e.addEventListener(this.animEnd,function i(){this.removeEventListener($i.animEnd,i,!1),t(this),t=null},!1)},fixLink:o?M:function(e){return e},getUnsafeUint8Array:function(e,t,i){var n;return"undefined"==typeof t?(n=new Uint8Array(e),n instanceof Uint8Array?n:new unsafeWindow.Uint8Array(e)):(n=new Uint8Array(e,t,i),n instanceof Uint8Array?n:new unsafeWindow.Uint8Array(e,t,i))},getUnsafeDataView:function(e,t){var i=new DataView(e,t||0);return i instanceof DataView?i:new unsafeWindow.DataView(e,t||0)}},{ua:{get:function(){return navigator.userAgent+(this.Firefox?" ["+navigator.buildID+"]":"")},enumerable:!0,configurable:!0},hasWorker:{get:function(){var e;try{e="Worker"in window}catch(t){e=!1}return Object.defineProperty(this,"hasWorker",{value:e}),e},enumerable:!0,configurable:!0},canPlayMP3:{get:function(){var e=!!(new Audio).canPlayType("audio/mpeg;");return Object.defineProperty(this,"canPlayMP3",{value:e}),e},enumerable:!0,configurable:!0},canPlayWebm:{get:function(){var e=!!(new Audio).canPlayType('video/webm; codecs="vp8,vorbis"');return Object.defineProperty(this,"canPlayWebm",{value:e}),e},enumerable:!0,configurable:!0},matchesSelector:{get:function(){var e=Cn.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector,i=Function.prototype.call.bind(t);return Object.defineProperty(this,"matchesSelector",{value:i}),i},enumerable:!0,configurable:!0}})}function Ci(e,t){var o=window.location.protocol,u=Object.defineProperties({"02ch.net":[{qPostRedir:{value:'input[name="gb2"][value="thread"]'},ru:{value:!0},timePattern:{value:"yyyy+nn+dd++w++hh+ii+ss"}}],"2chru.net":[{_2chru:{value:!0}},'form[action*="imgboard.php?delete"]'],"2--ch.ru":[{tire:{value:!0},qPages:{value:'table[border="1"] tr:first-of-type > td:first-of-type a'},qPostRedir:{value:null},qTable:{value:"table:not(.postfiles)"},qThread:{value:".threadz"},getOmitted:{value:function(e,t){var i;return e&&(i=e.textContent)?+(i.match(/\d+/)||[0])[0]-t:1}},getPageUrl:{value:function(e,t){return O(e)+(t>0?t:0)+".memhtml"}},css:{value:'span[id$="_display"], #fastload { display: none !important; }'},docExt:{value:".html"},fixFileInputs:{value:function(e){var t='><input name="file" maxlength="4" accept="|sid|7z|bz2|m4a|flac|lzh|mo3|rar|spc|fla|nsf|jpg|mpp|aac|gz|xm|wav|mp3|png|it|lha|torrent|swf|zip|mpc|ogg|jpeg|gif|mod" type="file"></input></div>';e.parentNode.innerHTML="<div"+t+('<div style="display: none;"'+t).repeat(3)}},hasPicWrap:{value:!0},markupBB:{value:!0},multiFile:{value:!0},ru:{value:!0}}],"410chan.org":[{_410:{value:!0},qPostRedir:{value:"input#noko"},getSage:{value:function(e){var t=s("filetitle",e);return t&&t.textContent.contains("")}},css:{value:"#resizer { display: none !important; }"},markupBB:{value:!1},markupTags:{value:["**","*","__","^^","%%","`","","","q"]},timePattern:{value:"dd+nn+yyyy++w++hh+ii+ss"}},'script[src*="kusaba"]'],"420chan.org":[{_420:{value:!0},qBan:{value:".ban"},qError:{value:"pre"},qHide:{value:".replyheader ~ *"},qPages:{value:".pagelist > a:last-child"},qPostRedir:{value:null},qThread:{value:'[id*="thread"]'},getTNum:{value:function(e){return n("a[id]",e).id.match(/\d+/)[0]
}},css:{value:"#content > hr, .hidethread, .ignorebtn, .opqrbtn, .qrbtn, noscript { display: none !important; }\n				.de-thr-hid { margin: 1em 0; }"},docExt:{value:".php"},markupBB:{value:!0},markupTags:{value:["**","*","","","%","pre","","","q"]}}],"4chan.org":[{fch:{value:!0},cFileInfo:{value:"fileText"},cOPost:{value:"op"},cReply:{value:"post reply"},cSubj:{value:"subject"},qBan:{value:'strong[style="color: red;"]'},qClosed:{value:".archivedIcon"},qDelBut:{value:'.deleteform > input[type="submit"]'},qError:{value:"#errmsg"},qHide:{value:".postInfo ~ *"},qImgLink:{value:".fileText > a"},qName:{value:".name"},qOmitted:{value:".summary.desktop"},qPages:{value:".pagelist > .pages:not(.cataloglink) > a:last-of-type"},qPostForm:{value:'form[name="post"]'},qPostRedir:{value:null},qRef:{value:".postInfo > .postNum"},qTable:{value:".replyContainer"},qThumbImages:{value:".fileThumb > img"},getFileInfo:{value:function(e){var t=s(this.cFileInfo,e);return t?t.lastChild.textContent:""}},getPageUrl:{value:function(e,t){return O(e)+(t>1?t:"")}},getSage:{value:function(e){return!!n('.id_Heaven, .useremail[href^="mailto:sage"]',e)}},getTNum:{value:function(e){return n('input[type="checkbox"]',e).name.match(/\d+/)[0]}},getWrap:{value:function(e){return e.parentNode}},anchor:{value:"#p"},css:{value:".backlink, .extButton, hr.desktop, .navLinks, .postMenuBtn, #togglePostFormLink { display: none !important; }\n				.postForm { display: table !important; }\n				textarea { margin-right: 0 !important; }"},docExt:{value:""},firstPage:{value:1},init:{value:function(){var e=a("captchaFormPart");e&&(Cn.body.insertAdjacentHTML("beforeend",'<div style="display: none;"><div onclick="initRecaptcha();"></div></div>'),this.updateCaptcha=function(e){a("g-recaptcha").innerHTML="",this.click(),e.style.display=""}.bind(Cn.body.lastChild.firstChild,e))}},markupBB:{value:!0},markupTags:{value:["","","","","spoiler","","","","q"]},rLinkClick:{value:""},rep:{value:!0},res:{value:"thread/"},timePattern:{value:"nn+dd+yy+w+hh+ii-?s?s?"},thrid:{value:"resto"}}],"7chan.org":[{init:{value:function(){return!0}}}],"8ch.net":[{css:{value:".fileinfo { width: 250px; }\n				.multifile { width: auto !important; }\n				.post-hide-link { display: none !important; }"}},'form[name*="postcontrols"]'],"8chan.co":[{init:{value:function(){v("multi_image();")}}},'form[name*="postcontrols"]'],"arhivach.org":[{cReply:{value:"post"},cRPost:{value:"post"},qDForm:{value:"body > .container-fluid"},qMsg:{value:".post_comment_body"},qRef:{value:".post_id"},qThread:{value:".thread_inner"},getTNum:{value:function(e){return e.postid}},css:{value:".post_replies { display: none !important; }\n				.post { overflow-x: auto !important; }"},docExt:{value:""},res:{value:"thread/"},rLinkClick:{value:""}}],"britfa.gs":[{init:{value:function(){return!0}}}],"diochan.com":[{dio:{value:!0},css:{value:".resize { display: none !important; }"}},'script[src*="kusaba"]'],"dobrochan.com":[{dobr:{value:!0},anchor:{value:"#i"},cFileInfo:{value:"fileinfo"},cSubj:{value:"replytitle"},qClosed:{value:'img[src="/images/locked.png"]'},qDForm:{value:'form[action*="delete"]'},qError:{value:".post-error, h2"},qMsg:{value:".postbody"},qOmitted:{value:".abbrev > span:first-of-type"},qPages:{value:".pages > tbody > tr > td"},qPostRedir:{value:'select[name="goto"]'},qTrunc:{value:".abbrev > span:nth-last-child(2)"},getImgLink:{value:function(e){var t=e.parentNode;return"A"===t.tagName?t:n(".fileinfo > a",e.previousElementSibling?t:t.parentNode)}},getImgWrap:{value:function(e){return"A"===e.tagName?(e.previousElementSibling?e:e.parentNode).parentNode:"IMG"===e.firstElementChild.tagName?e.parentNode:e}},getPageUrl:{value:function(e,t){return O(e)+(t>0?t+this.docExt:"index.xhtml")}},getTNum:{value:function(e){return n("a[name]",e).name.match(/\d+/)[0]}},insertYtPlayer:{value:function(e,t){var i=e.previousElementSibling,n="BR"===i.tagName?i:e;return n.insertAdjacentHTML("beforebegin",t),n.previousSibling}},css:{value:".delete > img, .popup, .reply_, .search_google, .search_iqdb { display: none !important; }\n				.delete { background: none; }\n				.delete_checkbox { position: static !important; }\n				.file + .de-video-obj { float: left; margin: 5px 20px 5px 5px; }\n				.de-video-obj + div { clear: left; }"},disableRedirection:{value:function(e){(n(this.qPostRedir,e)||{}).selectedIndex=1}},fixFileInputs:{value:function(e){e=a("files_parent"),Mn(i('input[type="file"]',e),function(e){e.removeAttribute("onchange")}),e.firstElementChild.value=1}},hasPicWrap:{value:!0},hDTFix:{configurable:!0,get:function(){var e=new qt("yyyy-nn-dd-hh-ii-ss","_d _M _Y (_w) _h:_i ",nCfg.timeOffset||0,nCfg.correctTime?pn:1,null);return Object.defineProperty(this,"weight",{value:e}),e}},init:{value:function(){return"/settings"===window.location.pathname?($i=Li(),n('input[type="button"]',Cn).addEventListener("click",function(){S(xn).then(function(){return z("__hanarating",a("rating").value)})},!1),!0):void 0}},multiFile:{value:!0},rLinkClick:{value:'onclick="Highlight(event, this.textContent.substr(2))"'},ru:{value:!0},timePattern:{value:"dd+m+?+?+?+?+?+yyyy++w++hh+ii-?s?s?"}}],"dva-ch.net":[{dvachnet:{value:!0}}],"hii.pm":[{qPostRedir:{value:'input[name="redirecttothread"][value="1"]'},css:{value:'#captcha_status, .content-background > hr, div[style="position: relative;"] { display: none !important; }'},ru:{value:!0}},'script[src*="kusaba"]'],"hiddenchan.i2p":[{hid:{value:!0}},'script[src*="kusaba"]'],"iichan.hk":[{iich:{value:!0}}],"inach.org":[{qPostRedir:{value:'input[name="fieldnoko"]'},css:{value:"#postform > table > tbody > tr:first-child { display: none !important; }"},markupBB:{value:!0},timePattern:{value:"nn+dd+yyyy++w++hh+ii+ss"}}],"krautchan.net":[{krau:{value:!0},cFileInfo:{value:"fileinfo"},cReply:{value:"postreply"},cRPost:{value:"postreply"},cSubj:{value:"postsubject"},qBan:{value:".ban_mark"},qClosed:{value:'img[src="/images/locked.gif"]'},qDForm:{value:'form[action*="delete"]'},qError:{value:".message_text"},qHide:{value:"div:not(.postheader)"},qImgLink:{value:".filename > a"},qOmitted:{value:".omittedinfo"},qPages:{value:'table[border="1"] > tbody > tr > td > a:nth-last-child(2) + a'},qPostRedir:{value:"input#forward_thread"},qRef:{value:".postnumber"},qThread:{value:".thread_body"},qThumbImages:{value:'img[id^="thumbnail_"]'},qTrunc:{value:'p[id^="post_truncated"]'},getImgWrap:{value:function(e){return e.parentNode}},getSage:{value:function(e){return!!s("sage",e)}},getTNum:{value:function(e){return n('input[type="checkbox"]',e).name.match(/\d+/)[0]}},insertYtPlayer:{value:function(e,t){var i=e.parentNode,n=i.previousElementSibling,r=n.hasAttribute("style")?n:i;return r.insertAdjacentHTML("beforebegin",t),r.previousSibling}},css:{value:'img[id^="translate_button"], img[src$="button-expand.gif"], img[src$="button-close.gif"], body > center > hr, form > div:first-of-type > hr, h2, .sage { display: none !important; }\n					div[id^="Wz"] { z-index: 10000 !important; }\n					.de-thr-hid { margin-bottom: '+(tn?"2":"7")+'px; float: none !important; }\n					.file_reply + .de-video-obj, .file_thread + .de-video-obj { margin: 5px 20px 5px 5px; float: left; }\n					.de-video-obj + div { clear: left; }\n					form[action="/paint"] > select { width: 105px; }\n					form[action="/paint"] > input[type="text"] { width: 24px !important; }'},fixFileInputs:{value:function(){var e,t,i=a("files_parent"),n="";for(e=0,t=4;t>e;++e)n+="<div"+(0===e?"":' style="display: none;"')+'><input type="file" name="file_'+e+'" tabindex="7"></input></div>';i.innerHTML=n,i.removeAttribute("id")}},hasPicWrap:{value:!0},init:{value:function(){Cn.body.insertAdjacentHTML("beforeend",'<div style="display: none;"><div onclick="window.lastUpdateTime = 0;"></div><div onclick="if(boardRequiresCaptcha) { requestCaptcha(true); }"></div><div onclick="setupProgressTracking();"></div></div>');var e=Cn.body.lastChild.children;this.btnZeroLUTime=e[0],this.initCaptcha=e[1],this.addProgressTrack=e[2]}},markupBB:{value:!0},markupTags:{value:["b","i","u","s","spoiler","aa","","","q"]},multiFile:{value:!0},rep:{value:!0},res:{value:"thread-"},rLinkClick:{value:'onclick="highlightPost(this.textContent.substr(2))"'},timePattern:{value:"yyyy+nn+dd+hh+ii+ss+--?-?-?-?-?"}}],"mlpg.co":[{cOPost:{value:"opContainer"},getWrap:{value:function(e){return e.parentNode}},css:{value:'.image-hover, form > div[style="text-align: center;"], form > div[style="text-align: center;"] + hr { display: none !important; }'},markupBB:{value:!0},markupTags:{value:["b","i","u","-","spoiler","c","","","q"]}},'form[name*="postcontrols"]'],"ponya.ch":[{multiFile:{value:!0},thrid:{value:"replythread"}}],"ponychan.net":[{pony:{value:!0},cOPost:{value:"op"},qPages:{value:'table[border="0"] > tbody > tr > td:nth-child(2) > a:last-of-type'},css:{value:"#bodywrap3 > hr { display: none !important; }"}},'script[src*="kusaba"]'],"reptila.ch":[{qMsg:{value:".message"}},'form[action*="imgboard.php?delete"]'],"syn-ch.ru":[{synch:{value:!0},cFileInfo:{value:"unimportant"},css:{value:".fa-sort, .image_id { display: none !important; }\n				time:after { content: none; }"},init:{value:function(){var e='{"simpleNavbar":true,"showInfo":true}';Yi.getItem("settings")!==e&&(Yi.setItem("settings",e),window.location.reload())}},markupBB:{value:!0},markupTags:{value:["b","i","u","s","spoiler","code","sub","sup","q"]}},'form[name*="postcontrols"]']},{"2-chru.net":{get:function(){return this["2chru.net"]},enumerable:!0,configurable:!0},"2-ch.su":{get:function(){return this["2--ch.ru"]},enumerable:!0,configurable:!0},"2ch.hk":{get:function(){return[c["body.makaba"]]},enumerable:!0,configurable:!0},"2ch.pm":{get:function(){return[c["body.makaba"]]},enumerable:!0,configurable:!0},"2ch.re":{get:function(){return[c["body.makaba"]]},enumerable:!0,configurable:!0},"2ch.tf":{get:function(){return[c["body.makaba"]]},enumerable:!0,configurable:!0},"2ch.wf":{get:function(){return[c["body.makaba"]]},enumerable:!0,configurable:!0},"2ch.yt":{get:function(){return[c["body.makaba"]]},enumerable:!0,configurable:!0},"2-ch.so":{get:function(){return[c["body.makaba"]]},enumerable:!0,configurable:!0},"dmirrgetyojz735v.onion":{get:function(){return this["2chru.net"]},enumerable:!0,configurable:!0},"dobrochan.org":{get:function(){return this["dobrochan.com"]},enumerable:!0,configurable:!0},"dobrochan.ru":{get:function(){return this["dobrochan.com"]},enumerable:!0,configurable:!0},"niuchan.org":{get:function(){return this["diochan.com"]},enumerable:!0,configurable:!0},"ponyach.cf":{get:function(){return this["ponya.ch"]},enumerable:!0,configurable:!0},"ponyach.ga":{get:function(){return this["ponya.ch"]},enumerable:!0,configurable:!0},"ponyach.ml":{get:function(){return this["ponya.ch"]},enumerable:!0,configurable:!0},"ponyach.ru":{get:function(){return this["ponya.ch"]},enumerable:!0,configurable:!0},"ponychan.ru":{get:function(){return this["ponya.ch"]},enumerable:!0,configurable:!0},"syn-ch.com":{get:function(){return this["syn-ch.ru"]},enumerable:!0,configurable:!0},"syn-ch.org":{get:function(){return this["syn-ch.ru"]},enumerable:!0,configurable:!0}}),c=Object.defineProperties({"body.makaba":{mak:{value:!0},cReply:{value:"post reply"},cSubj:{value:"post-title"},qBan:{value:".pomyanem"},qClosed:{value:'.sticky-img[src$="locked.png"]'},qDForm:{value:"#posts-form"},qHide:{value:".post-details ~ *"},qImgLink:{value:".file-attr > .desktop"},qMsg:{value:".post-message"},qName:{value:".ananimas, .post-email"},qOmitted:{value:".mess-post"},qPostRedir:{value:null},qThumbImages:{value:".preview"},qTrunc:{value:null},getImgParent:{value:function(e){var t=d(e,"FIGURE"),i=t.parentNode;return i.lastElementChild===t?i:t}},getImgWrap:{value:function(e){return d(e,"FIGURE")}},getPNum:{value:function(e){return e.getAttribute("data-num")}},getWrap:{value:function(e){return e.parentNode}},cssEn:{get:function(){return'.ABU-refmap, .box[onclick="ToggleSage()"], img[alt="webm file"], .de-qarea-hanging .kupi-passcode-suka, header > :not(.logo) + hr, .media-expand-button, .news, .norm-reply, .message-byte-len, .postform-hr, .postpanel > :not(img), .posts > hr, .reflink:before, .thread-nav, #ABU-alert-wait, #media-thumbnail { display: none !important; }\n				.captcha-image > img { cursor: pointer; }\n				.de-abtn { transition: none; }\n				#de-txt-panel { font-size: 16px !important; }\n				.images-area input { float: left; }\n				.images-single + .de-video-obj { display: inline-block; }\n				.mess-post { display: block; }\n				.images-area input { float: none !important; display: inline !important; }\n				'+(1===Qi.expandPosts?'.expand-large-comment, div[id^="shrinked-post"] { display: none !important; } div[id^="original-post"] { display: block !important; }':"")}},hasPicWrap:{value:!0},init:{value:function(){var e=this;v("window.FormData = void 0;"),Mn(r("autorefresh",Cn),w),Mn(r("postform-image",Cn),function(e){e.insertAdjacentHTML("afterend",'<div style="clear: both;"></div>'),e.nextSibling.appendChild(e)});var t=n("td > .anoniconsselectlist",Cn);t&&n(".option-area > td:last-child",Cn).appendChild(t),t=n("tr:not([class])",Cn.body),t&&(Cn.body.insertAdjacentHTML("beforeend",'<div style="display: none;"><div onclick="loadCaptcha();"></div></div>'),this.updateCaptcha=function(e,t){this.click(),e.style.display="",e=a("captcha-value"),e&&(dn.cap=e,e.tabIndex=999,t&&e.focus())}.bind(Cn.body.lastChild.firstChild,t),t.addEventListener("click",function(t){"IMG"===t.target.tagName&&(e.updateCaptcha(!0),t.stopPropagation())},!0))}},fixFileInputs:{value:function(){var e,t,i=n("#postform .images-area",Cn).lastElementChild,r="";for(e=0,t=4;t>e;++e)r+="<div"+(0===e?"":' style="display: none;"')+'><input type="file" name="image'+(e+1)+'"></input></div>';i.innerHTML=r}},lastPage:{configurable:!0,get:function(){var e=i(".pager > a:not([class])",Cn),t=e?e.length:1;return Object.defineProperty(this,"lastPage",{value:t}),t}},markupBB:{value:!0},markupTags:{value:["B","I","U","S","SPOILER","CODE","SUP","SUB","q"]},multiFile:{value:!0},rLinkClick:{value:""},timePattern:{value:"dd+nn+yy+w+hh+ii+ss"}},'form[action*="futaba.php"]':{futa:{value:!0},qDForm:{value:"form:not([enctype])"},qImgLink:{value:'a[href$=".jpg"], a[href$=".png"], a[href$=".gif"]'},qOmitted:{value:'font[color="#707070"]'},qPostForm:{value:"form:nth-of-type(1)"},qPostRedir:{value:null},qRef:{value:".del"},qThumbImages:{value:'a[href$=".jpg"] > img, a[href$=".png"] > img, a[href$=".gif"] > img'},getPageUrl:{value:function(e,t){return O(e)+(t>0?t+this.docExt:"futaba.htm")}},getPNum:{value:function(e){return l("input",e).name}},getPostEl:{value:function(e){for(;e&&"TD"!==e.tagName&&!e.hasAttribute("de-thread");)e=e.parentElement;return e}},getPosts:{value:function(e){return i("td:nth-child(2)",e)}},getTNum:{value:function(e){return n('input[type="checkbox"]',e).name.match(/\d+/)[0]}},cssEn:{value:".de-cfg-body, .de-content { font-family: arial; }\n				.ftbl { width: auto; margin: 0; }\n				.reply { background: #f0e0d6; }\n				span { font-size: inherit; }"},docExt:{value:".htm"},thrid:{value:"resto"}},'form[action*="imgboard.php?delete"]':{tinyIb:{value:!0},qPostRedir:{value:null},ru:{value:!0}},'form[name*="postcontrols"]':{tiny:{value:!0},cFileInfo:{value:"fileinfo"},cReply:{value:"post reply"},qClosed:{value:".fa-lock"},cSubj:{value:"subject"},cTrip:{value:"trip"},qDForm:{value:'form[name*="postcontrols"]'},qHide:{value:".intro ~ *"},qImgLink:{value:"p.fileinfo > a:first-of-type"},qMsg:{value:".body"},qName:{value:".name"},qOmitted:{value:".omitted"},qPages:{value:".pages > a:nth-last-of-type(2)"},qPostForm:{value:'form[name="post"]'},qPostRedir:{value:null},qRef:{value:".post_no:nth-of-type(2)"},qTable:{value:".post.reply"},qTrunc:{value:".toolong"},fixVideo:{value:function(e){var t,n,r,s,a=[];for(t=0,n=i(".video-container, #ytplayer",e?e.el:un.el),s=n.length;s>t;++t)r=n[t],a.push([e||this.getPostEl(r).post,"ytplayer"===r.id?r.src.match(YouTube.ytReg):["",r.getAttribute("data-video")],!0]),w(r);return a}},getPageUrl:{value:function(e,t){return t>1?O(e)+t+this.docExt:O(e)}},getTNum:{value:function(e){return n('input[type="checkbox"]',e).name.match(/\d+/)[0]}},firstPage:{value:1},markupTags:{value:["'''","''","__","^H","**","`","","","q"]},cssEn:{get:function(){return".banner, "+(tn?"":".de-btn-rep,")+" .hide-thread-link, .mentioned, .post-hover { display: none !important; }\n				div.post.reply { float: left; clear: left; display: block; }\n				form, form table { margin: 0; }"}},rLinkClick:{value:'onclick="highlightReply(this.textContent.substr(2))"'},timePattern:{value:"nn+dd+yy++w++hh+ii+ss"},thrid:{value:"thread"}},'script[src*="kusaba"]':{kus:{value:!0},cOPost:{value:"postnode"},qError:{value:'h1, h2, div[style*="1.25em"]'},qPostRedir:{value:null},cssEn:{value:".extrabtns, #newposts_get, .replymode, .ui-resizable-handle, blockquote + a { display: none !important; }\n				.ui-wrapper { display: inline-block; width: auto !important; height: auto !important; padding: 0 !important; }"},markupBB:{value:!0},rLinkClick:{value:'onclick="highlight(this.textContent.substr(2), true)"'}},'link[href$="phutaba.css"]':{cOPost:{value:"thread_OP"},cReply:{value:"post"},cRPost:{value:"thread_reply"},cSubj:{value:"subject"},cTrip:{value:"tripcode"},qError:{value:".error"},qHide:{value:".post > .post_body"},qImgLink:{value:".filename > a"},qMsg:{value:".text"},qPages:{value:".pagelist > li:nth-last-child(2)"},qPostRedir:{value:'input[name="gb2"][value="thread"]'},qTrunc:{value:".tldr"},getImgWrap:{value:function(e){return e.parentNode.parentNode}},getSage:{value:function(e){return!!n(".sage",e)}},css:{value:".content > hr, .de-parea > hr { display: none !important }"},docExt:{value:""},fixFileInputs:{value:function(e){var t='><input name="file" type="file"></input></div>';e.removeAttribute("onchange"),e.parentNode.parentNode.innerHTML="<div"+t+('<div style="display: none;"'+t).repeat(3)}},markupBB:{value:!0},multiFile:{value:!0},res:{value:"thread/"},rLinkClick:{value:""}}},{'form[action$="board.php"]':{get:function(){return this['script[src*="kusaba"]']},enumerable:!0,configurable:!0}}),h=Object.defineProperties({cFileInfo:"filesize",cOPost:"oppost",cReply:"reply",cRPost:"reply",cSubj:"filetitle",cTrip:"postertrip",qBan:"",qDelBut:'input[type="submit"]',qDForm:'#delform, form[name="delform"]',qError:'h1, h2, font[size="5"]',qHide:".de-post-btns ~ *",qMsg:"blockquote",qName:".postername, .commentpostername",qOmitted:".omittedposts",qPages:'table[border="1"] > tbody > tr > td:nth-child(2) > a:last-of-type',qPostForm:"#postform",qPostRedir:'input[name="postredir"][value="1"]',qRef:".reflink",qTable:'form > table, div > table, div[id^="repl"]',qThumbImages:'.thumb, .de-thumb, .ca_thumb, img[src*="thumb"], img[src*="/spoiler"], img[src^="blob:"]',qTrunc:".abbrev, .abbr, .shortened",fixVideo:function(e){var t,n,r,s=[];for(t=0,n=i("embed, object, iframe",e?e.el:un.el),r=n.length;r>t;++t){var a=n[t],o=a.src||a.data,l=o.match(YouTube.ytReg);l&&(s.push([e||this.getPostEl(a).post,l,!0]),w(a)),Qi.addVimeo&&(l=o.match(YouTube.vimReg))&&(s.push([e||this.getPostEl(a).post,l,!1]),w(a))}return s},getFileInfo:function(e){var t=s(this.cFileInfo,e);return t?t.textContent:""},getImgLink:function(e){var t=e.parentNode;return"SPAN"===t.tagName?t.parentNode:t},getImgParent:function(e){return this.getImgWrap(e)},getImgWrap:function(e){var t=("SPAN"===e.tagName?e.parentNode:e).parentNode;return"SPAN"===t.tagName?t.parentNode:t},getOmitted:function(e){var t;return e&&(t=e.textContent)?+(t.match(/\d+/)||[0])[0]+1:1},getOp:function(e){var t,i,r=mn?n("div[de-oppost]",e):s(this.cOPost,e);if(r)return r;for(r=e.ownerDocument.createElement("div"),r.setAttribute("de-oppost",""),i=n(this.qTable,e);(t=e.firstChild)!==i;)r.appendChild(t);return e.hasChildNodes()?e.insertBefore(r,e.firstChild):e.appendChild(r),r},getPNum:function(e){return e.id.match(/\d+/)[0]},getPageUrl:function(e,t){return O(e)+(t>0?t+this.docExt:"")},getPostEl:function(e){for(;e&&!e.classList.contains(this.cRPost)&&!e.hasAttribute("de-thread");)e=e.parentElement;return e},getPosts:function(e){return i("."+this.cRPost,e)},getSage:function(e){var t=n('a[href^="mailto:"], a[href="sage"]',e);return!!t&&/sage/i.test(t.href)},getThrdUrl:function(e,t){return this.prot+"//"+this.host+O(e)+this.res+t+this.docExt},getTNum:function(e){return n('input[type="checkbox"]',e).value},getWrap:function(e,t){return t?e:("TD"===e.tagName?Object.defineProperty(this,"getWrap",{value:function(e,t){return t?e:d(e,"TABLE")}}):Object.defineProperty(this,"getWrap",{value:function(e){return e}}),this.getWrap(e,t))},insertYtPlayer:function(e,t){return e.insertAdjacentHTML("beforebegin",t),e.previousSibling},anchor:"#",css:"",cssEn:"",disableRedirection:function(e){this.qPostRedir&&((n(this.qPostRedir,e)||{}).checked=!0)},dm:"",docExt:".html",firstPage:0,fixFileInputs:jn,hasPicWrap:!1,host:window.location.hostname,init:null,markupBB:!1,multiFile:!1,prot:o,res:"res/",rLinkClick:'onclick="highlight(this.textContent.substr(2))"',ru:!1,timePattern:"w+dd+m+yyyy+hh+ii+ss",thrid:"parent"},{qImgLink:{get:function(){var e="."+this.cFileInfo+' a[href$=".jpg"], .'+this.cFileInfo+' a[href$=".jpeg"], .'+this.cFileInfo+' a[href$=".png"], .'+this.cFileInfo+' a[href$=".gif"], .'+this.cFileInfo+' a[href$=".webm"]';return Object.defineProperty(this,"qImgLink",{value:e}),e},enumerable:!0,configurable:!0},qMsgImgLink:{get:function(){var e=this.qMsg+' a[href*=".jpg"], '+this.qMsg+' a[href*=".png"], '+this.qMsg+' a[href*=".gif"], '+this.qMsg+' a[href*=".jpeg"]';return Object.defineProperty(this,"qMsgImgLink",{value:e}),e},enumerable:!0,configurable:!0},qThread:{get:function(){var e=s("thread",Cn)?".thread":n('div[id*="_info"][style*="float"]',Cn)?'div[id^="t"]:not([style])':'[id^="thread"]';return Object.defineProperty(this,"qThread",{value:e}),e},enumerable:!0,configurable:!0},lastPage:{get:function(){var e=n(this.qPages,Cn),t=e&&+In.pop.call(e.textContent.match(/\d+/g)||[])||0;return nn===t+1&&t++,Object.defineProperty(this,"lastPage",{value:t}),t},enumerable:!0,configurable:!0},markupTags:{get:function(){return this.markupBB?["b","i","u","s","spoiler","code","","","q"]:["**","*","","^H","%%","`","","","q"]},enumerable:!0,configurable:!0},reCrossLinks:{get:function(){var e=new RegExp(">https?:\\/\\/[^\\/]*"+this.dm+"\\/([a-z0-9]+)\\/"+N(this.res)+"(\\d+)(?:[^#<]+)?(?:#i?(\\d+))?<","g");return Object.defineProperty(this,"reCrossLinks",{value:e}),e},enumerable:!0,configurable:!0},rep:{get:function(){var e=an||hn.haveReps||Qi.crossLinks;return Object.defineProperty(this,"rep",{value:e}),e},enumerable:!0,configurable:!0}});mn="file:"===o;var p,f=null,m=mn?(window.location.pathname.match(/\/([^-]+)-[^-]+-[^\.]+\.[a-z]+$/)||[,""])[1]:window.location.hostname.match(/(?:(?:[^.]+\.)(?=org\.|net\.|com\.))?[^.]+\.[^.]+$|^\d+\.\d+\.\d+\.\d+$|localhost/)[0];if(e&&m in u&&(f=function g(e){return Object.create(e[2]?g(u[e[2]]):e[1]?Object.create(h,c[e[1]]):h,e[0])}(u[m]),t=!1),t){for(p in c)if(n(p,Cn)){f=Object.create(h,c[p]);break}f||(f=h)}return f&&(f.dm=m),f}function Ii(e){var t,i,r;if(/^(?:about|chrome|opera|res)/i.test(window.location))return null;try{Yi=window.localStorage,zi=window.sessionStorage,zi["__de-test"]=1}catch(s){"undefined"!=typeof unsafeWindow&&(Yi=unsafeWindow.localStorage,zi=unsafeWindow.sessionStorage)}if(!Yi||"object"!=typeof Yi||!zi)return console.log("WEBSTORAGE ERROR: please, enable webstorage!"),null;switch(window.name){case"":break;case"de-iframe-pform":case"de-iframe-dform":return v('window.top.postMessage("A'+window.name+'" + document.documentElement.outerHTML, "*");'),null;case"de-iframe-fav":t=setInterval(function(){v('window.top.postMessage("B'+(Cn.body.offsetHeight+5)+'", "*");')},1500),window.addEventListener("load",setTimeout.bind(window,clearInterval,3e4,t),!1),fn=!0,dn={}}return Zi||(Zi=Ci(e,!0)),Zi.init&&Zi.init()||a("de-panel")?null:(r=n(Zi.qDForm+", form[de-form]",Cn))?($i=Li(),window.addEventListener("storage",function(e){var t,i,r,s=e.newValue;if(s)switch(e.key){case"__de-post":return void function(){try{t=JSON.parse(s)}catch(e){return}if(i=t.hide,t.brd===en&&(r=Wi[t.num])&&r.hidden^i?r.setUserVisib(i,t.date,!1):(t.brd in Ki||(Ki[t.brd]={}),Ki[t.brd][t.num]=[+!i,t.date]),t.isOp){if(!(t.brd in Gi)){if(!i)return void it("hid",!0);Gi[t.brd]={}}i?Gi[t.brd][t.num]=t.title:delete Gi[t.brd][t.num]}it("hid",!0)}();case"__de-threads":return void function(){try{Gi=JSON.parse(s)}catch(e){return}en in Gi||(Gi[en]={}),un.firstThr.updateHidden(Gi[en]),it("hid",!0)}();case"__de-spells":!function(){try{t=JSON.parse(s)}catch(e){return}Qi.hideBySpell=t.hide,i=n('input[info="hideBySpell"]',Cn),i&&(i.checked=t.hide),Cn.body.style.display="none",Zt(),t.data?(hn.setSpells(t.data,!1),i=a("de-spell-edit"),i&&(i.value=hn.list)):(""===t.data&&(hn.disable(),i=a("de-spell-edit"),i&&(i.value=""),z("spells","")),hn.enable=!1),Cn.body.style.display=""}();default:return}},!1),mn?(i=window.location.pathname.match(/\/[^-]+-([^-]+)-([^\.]+)\.[a-z]+$/),Zi.prot="http:",Zi.host=Zi.dm,en=i?i[1]:"",tn=i?i[2]:"",nn=0,Zi.docExt=".html"):(i=(window.location.pathname||"").match(new RegExp("^(?:\\/?([^\\.]*?(?:\\/[^\\/]*?)?)\\/?)?("+N(Zi.res.slice(0,-1))+")?(?:[\\/-](\\d+|index|wakaba|futaba))?(\\.(?:[a-z]+))?(?:\\/|$)")),en=i[1].replace(/\/$/,""),tn=i[2]?i[3]:Zi.futa?+(window.location.search.match(/\d+/)||[!1])[0]:!1,nn=i[3]&&!tn?+i[3]||Zi.firstPage:Zi.firstPage,!Zi.hasOwnProperty("docExt")&&i[4]&&(Zi.docExt=i[4])),tn&&window.addEventListener("beforeunload",function(){zi["de-scroll-"+en+tn]=window.pageYOffset},!1),cn=Cn.createElement("div"),r):null}function Ri(e,t){this.el=e,this.isLight=t,this.tNums=[],this.addFormContent(e,!1),e.setAttribute("de-form",""),e.removeAttribute("id")}function Ni(e){return an&&(e=an.fix(e)),(Zi.fch||Zi.krau)&&(Zi.fch&&(e=e.replace(/<\/?wbr>/g,"").replace(/ \(OP\)<\/a/g,"</a")),Zi.krau&&(e=e.replace(/href="(#\d+)"/g,'href="/'+en+"/thread-"+tn+'.html$1"').replace(/<span class="invalidquotelink">&gt;&gt;(\d+)<\/span>/g,'<a class="de-ref-del" href="#$1" onclick="highlightPost($1)">&gt;&gt;$1</a>')),e=e.replace(/(^|>|\s|&gt;)(https*:\/\/[^"<>]*?)(<\/a>)?(?=$|<|\s)/gi,function(e,t,i,n){return n?e:t+'<a href="'+i+'">'+i+"</a>"})),hn.haveReps&&(e=hn.replace(e)),Qi.crossLinks&&(e=e.replace(Zi.reCrossLinks,function(e,t,i,n){return">&gt;&gt;/"+t+"/"+(n||i)+"<"})),e}function Oi(e){return Zi.rep&&(e.innerHTML=Ni(e.innerHTML)),e}function Mi(e,t){function i(){x=null,k=null,_=!1,T=1e3*Qi.updThrDelay,P=0,S=I=q=!0,C=(n('head link[rel="shortcut icon"]',Cn)||{}).href,N=!!Qi.updCount,r(!0)}function r(e){F=O=!0,M=!1,U=0,N&&(R=a("de-updater-count"),R.style.display=""),e&&o(!0)}function s(e){if(H=e,F){l(e&&!M,!0),F=_=!1,m("off");var t=a("de-btn-audio-on");t&&(t.id="de-btn-audio-off")}}function o(e){var t=E(j,!0)(N,e),i=_slicedToArray(t,1);y=i[0]}function l(e,t){e&&y["return"](),N&&(t?R.style.display="none":R.innerHTML='<span class="de-wait"></span>')}function d(){b?_=!1:(x.play(),setTimeout(d,A),_=!0)}function u(){I=!1,Notification.requestPermission(function(e){"denied"===e.toLowerCase()?z("desktNotif",0):I=!0})}function c(e){if(e){if(!O)return!1;O=!1,setTimeout(function(){O=!0},1e4)}return!0}function h(e){if(F||H){if(!c(e))return}else if(r(!1),!c(e))return;l(F&&!M,!1),o(!1)}function f(){w(n('link[rel="shortcut icon"]',Cn.head)),Cn.head.insertAdjacentHTML("afterbegin",'<link rel="shortcut icon" href="'+(S?"data:image/x-icon;base64,"+this:C)+'">'),S=!S}function m(e){var t=k||(k=n('a[id^="de-btn-upd"]',Cn));t.id="de-btn-upd-"+e,t.title=Ln.panelBtn["upd-"+("off"===e?"off":"on")][pn]}function g(){Qi.favIcoBlink&&C&&(clearInterval(P),S=!0,w(n('link[rel="shortcut icon"]',Cn.head)),Cn.head.insertAdjacentHTML("afterbegin",'<link rel="shortcut icon" href="'+C+'">')),U=0,b=!0,B=!1,setTimeout(function(){v(),F&&h(!0)},200)}function v(){Cn.title=(0===Y?"":"d ")+(B===!0?"{"+Ln.error[pn]+"} ":"")+(200===D?"":"{"+D+"} ")+(0===U?"":"["+U+"] ")+e}var b,y,A,x,k,_,T,P,S,C,I,R,N,O,M,j=regeneratorRuntime.mark(function Q(e,t){var i,n,r,a,o,l,c,h,p,g;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:r=!1,a=T;case 1:if(!t){y.next=14;break}return e&&(R.textContent=n=a/1e3,i=setInterval(function(){return R.textContent=--n},1e3)),o=!1,y.prev=5,y.next=8,L(a);case 8:return y.prev=8,clearInterval(i),y.finish(8);case 11:e&&(R.innerHTML='<span class="de-wait"></span>'),y.next=15;break;case 14:t=!0;case 15:return l=zt.Success,c=0,y.prev=16,y.next=19,un.firstThr.loadNew(!0);case 19:c=y.sent,y.next=25;break;case 22:y.prev=22,y.t25=y["catch"](16),l=y.t25;case 25:if(Wt(l,-1),h=l instanceof zt,h&&(D=l.code),h&&(200===l.code||304===l.code)){y.next=41;break}if(Qi.favIcoBlink&&!b&&C&&(clearInterval(P),P=setInterval(f.bind("iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAA3NCSVQICAjb4U/gAAAALVBMVEX////QRDfQRDfQRDfQRDfQRDfQRDfQRDfQRDfQRDfQRDfQRDfQRDfQRDfQRDdiAd5MAAAAD3RSTlMAESIzRFVmd4iZu8zd7v9ufV8LAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFXRFWHRDcmVhdGlvbiBUaW1lADEwLzIvMTOFMzGTAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAAH9JREFUCJljYEAAjbO3C0E067l37946ABlxLxWY6q4wMDDde+PAwPxGgYHj5bnLDAx1BQw8j3yBKvQ2MPA9YL53mIHvAJDB4PPOAMjgfsTA/O4wUIrjOQODzdt5CQyM9wwYmO+9EWBg8H2uwDTvMdBkFqAVbwxAlqmvOV2I5AYASFUrcXUe0gcAAAAASUVORK5CYII="),800)),Qi.noErrInTitle||v(),!(0!==D&&500>D)){y.next=39;break}if(r||404!==D&&400!==D){y.next=36;break}r=!0,y.next=39;break;case 36:return v(),s(!1),y.abrupt("return");case 39:return m("warn"),y.abrupt("continue",1);case 41:b||(0!==c?(Qi.favIcoBlink&&C&&0===U&&(P=setInterval(f.bind("iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII="),800)),U+=c,v(),Qi.desktNotif&&I&&(p=un.firstThr.last,g=new Notification(Zi.dm+"/"+en+"/"+tn+": "+U+Ln.newPost[pn][0!==pn?+(1!==U):U%10>4||U%10===0||1===(U%100/10|0)?2:U%10===1?0:1]+Ln.newPost[pn][3],{body:p.text.substring(0,250).replace(/\s+/g," "),tag:Zi.dm+en+tn,icon:p.images.first||C}),g.onshow=setTimeout.bind(window,g.close.bind(g),12e3),g.onclick=window.focus,g.onerror=function(){window.focus(),u()}),_&&(A?d():x.play()),a=T):12e4!==a&&(a=Math.min(a+T,12e4))),y.next=1;break;case 44:case"end":return y.stop()}},Q,this,[[5,,8,11],[16,22]])}),F=!1,H=!0,q=!1,D=200,B=!1,U=0,Y=0;if("hidden"in Cn||"webkitHidden"in Cn?(b=!(Cn.hidden||Cn.webkitHidden),Cn.addEventListener(($i.WebKit?"webkit":"")+"visibilitychange",function(){Cn.hidden||Cn.webkitHidden?(b=!1,un.firstThr&&un.firstThr.clearPostsMarks()):g()},!1)):(b=!1,window.addEventListener("focus",g,!1),window.addEventListener("blur",function(){b=!1,un.firstThr.clearPostsMarks()},!1),window.addEventListener("mousemove",function V(){window.removeEventListener("mousemove",V,!1),g()},!1)),t&&i(),b&&Qi.desktNotif&&"permission"in Notification)switch(Notification.permission.toLowerCase()){case"default":u();break;case"denied":z("desktNotif",0)}return Object.defineProperties({forceLoad:h.bind(null,!1),enable:function(e){var t=function(){return e.apply(this,arguments)};return t.toString=function(){return e.toString()},t}(function(){if(q){if(F)return;r(!0)}else i();m("on")}),pause:function(){F&&!M&&(l(!0,!1),M=!0)},"continue":function(){F&&M&&(o(),M=!1)},disable:s.bind(null,!0),toggleAudio:function(e){return x||(x=p("audio",{preload:"auto",src:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/signal.ogg"},null)),A=e,_=!_},toggleCounter:function(e){e?(R||(R=a("de-updater-count")),R.style.display="",N=!0,h(!1)):(R.style.display="none",N=!1)},addPlayingTag:function(){Y++,1===Y&&v()},removePlayingTag:function(){Y=Math.max(Y-1,0),0===Y&&v()},sendErrNotif:function(){Qi.sendErrNotif&&!b&&(B=!0,v())}},{enabled:{get:function(){return F},enumerable:!0,configurable:!0},focused:{get:function(){return b},enumerable:!0,configurable:!0}})}function ji(){Qi.updScript&&Hi(!1,function(e){_t(e,"updavail",!1)}),tn&&(Qi.rePageTitle&&(Cn.title="/"+en+" - "+un.firstThr.op.title),mn||(un.firstThr.el.insertAdjacentHTML("afterend",'<div id="de-updater-div">&gt;&gt; [<a class="de-abtn" id="de-updater-btn" href="#"></a><span id="de-updater-count" style="display: none;"></span>]'+(Zi.mak?'[<a class="de-abtn" href="#" onclick="UnbanShow();"> </a>]':"")+"</div>"),un.firstThr.el.nextSibling.addEventListener("click",Si.loadNewPosts,!1))),rn=Mi(Cn.title,tn&&Qi.ajaxUpdThr)
}function Fi(){return tn?void setTimeout(function(){var e,t,i,n=+zi["de-scroll-"+en+tn];n?(window.scrollTo(0,n),zi.removeItem("de-scroll-"+en+tn)):(i=window.location.hash)&&(t=i.match(/#i?(\d+)$/))&&(t=t[1])&&(e=Wi[t])&&e.el.scrollIntoView(!0)},0):void(rn.focused&&0===window.pageYOffset||window.scrollTo(0,0))}function Hi(e,t){var i,n=Qi.scrUpdIntrv;if(!e){switch(i=1728e5,n){case 0:n=i;break;case 1:n=2*i;break;case 2:n=7*i;break;case 3:n=14*i;break;default:n=30*i}if(Date.now()-+Vi.lastUpd<n)return}GM_xmlhttpRequest({method:"GET",url:"https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.meta.js",headers:{"Content-Type":"text/plain"},onreadystatechange:function(i){if(4===i.readyState)if(200===i.status){var n=i.responseText.match(/@version\s+([0-9.]+)/)[1].split("."),r=En.split("."),s=r.length>n.length?r.length:n.length,a=0,o=!1;if(!n)return void(e&&t('<div style="color: red; font-weigth: bold;">'+Ln.noConnect[pn]+"</div>"));for(Y("lastUpd",Date.now());s>a;){if((+n[a]||0)>(+r[a]||0)){o=!0;break}if((+n[a]||0)<(+r[a]||0))break;a++}o?t('<a style="color: blue; font-weight: bold;" href="https://raw.github.com/SthephanShinkufag/Dollchan-Extension-Tools/master/Dollchan_Extension_Tools.user.js">'+Ln.updAvail[pn]+"</a>"):e&&t(Ln.haveLatest[pn])}else e&&t('<div style="color: red; font-weigth: bold;">'+Ln.noConnect[pn]+"</div>")}})}function qi(){return Qi.scriptStyle?1===Qi.scriptStyle?"en":"de":"fr"}function Di(){function e(e,t){return e+':before { content: ""; padding: 0 16px 0 0; margin: 0 4px; background: url('+t+") no-repeat center; }"}function t(e,t){return e+" { background: url(data:image/gif;base64,"+t+") no-repeat center !important; }"}var i,n="";return n+='#de-main { -moz-box-sizing: content-box; box-sizing: content-box; }		.de-block { display: block; }		#de-content-cfg > div { float: left; border-radius: 10px 10px 0 0; width: auto; min-width: 0; padding: 0; margin: 5px 20px; }		.de-cfg-head { padding: 2px; border-radius: 10px 10px 0 0; color: #fff; text-align: center; font: bold 14px arial; cursor: default; }		.de-cfg-head:lang(en), #de-panel:lang(en) { background: linear-gradient(to bottom, #4b90df, #3d77be 5px, #376cb0 7px, #295591 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #183d77 13px, #1f4485 18px, #264c90 20px, #325f9e 25px); }		.de-cfg-head:lang(fr), #de-panel:lang(fr) { background: linear-gradient(to bottom, #7b849b, #616b86 2px, #3a414f 13px, rgba(0,0,0,0) 13px), linear-gradient(to bottom, rgba(0,0,0,0) 12px, #121212 13px, #1f2740 25px); }		.de-cfg-head:lang(de), #de-panel:lang(de) { background: #777; }		.de-cfg-body { min-height: 308px; min-width: 357px; padding: 11px 7px 7px; margin-top: -1px; font: 13px sans-serif !important;}		.de-cfg-body input, .de-cfg-body label, .de-cfg-body select { width: auto; padding: 0 !important; margin: 1px 2px !important; }		.de-cfg-body input[type="button"], .de-cfg-body input[type="text"] { padding: 1px 2px !important; }		.de-cfg-body, #de-cfg-btns { border: 1px solid #183d77; border-top: none; }		.de-cfg-body:lang(de), #de-cfg-btns:lang(de) { border-color: #444; }		#de-cfg-btns { padding: 3px; font-size: 13px !important; }		#de-cfg-btns input { padding: 0 3px; }		#de-cfg-bar { width: 100%; display: table; background-color: #1f2740; margin: 0; padding: 0; }		#de-cfg-bar:lang(en) { background-color: #325f9e; }		#de-cfg-bar:lang(de) { background-color: #777; }		.de-cfg-depend { padding-left: 25px; }		.de-cfg-tab { padding: 4px 4px; border-radius: 4px 4px 0 0; font: bold 12px arial; text-align: center; cursor: default; }		.de-cfg-tab-back { display: table-cell !important; float: none !important; width:auto; min-width: 0 !important; padding: 0 !important; box-shadow: none !important; border: 1px solid #183d77 !important; border-radius: 4px 4px 0 0 !important; opacity: 1; }		.de-cfg-tab-back:lang(de) { border-color: #444 !important; }		.de-cfg-tab-back:lang(fr) { border-color: #121421 !important; }		.de-cfg-tab-back[selected="true"] { border-bottom: none !important; }		.de-cfg-tab-back[selected="false"] > .de-cfg-tab { background-color: rgba(0,0,0,.2); }		.de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:lang(fr) { background: linear-gradient(to bottom, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }		.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover { background-color: rgba(99,99,99,.2); }		.de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(en), .de-cfg-tab-back[selected="false"] > .de-cfg-tab:hover:lang(fr)  { background: linear-gradient(to top, rgba(132,132,132,.35) 0%, rgba(79,79,79,.35) 50%, rgba(40,40,40,.35) 50%, rgba(80,80,80,.35) 100%) !important; }		.de-cfg-tab::'+($i.Firefox?"-moz-":"")+"selection { background: transparent; }		.de-cfg-unvis { display: none; }		#de-spell-panel { float: right; }		#de-spell-panel > a { padding: 0 4px; }		#de-spell-div { display: table; }		#de-spell-div > div { display: table-cell; vertical-align: top; }		#de-spell-edit { padding: 2px !important; width: 325px; height: 180px; max-width: 100%; border: none !important; outline: none !important; }		#de-spell-rowmeter { padding: 2px 3px 0 0; margin: 2px 0; overflow: hidden; width: 2em; height: 182px; text-align: right; color: #fff; font: 12px courier new; }		#de-spell-rowmeter:lang(en), #de-spell-rowmeter:lang(fr) { background-color: #616b86; }		#de-spell-rowmeter:lang(de) { background-color: #777; }",n+="#de-btn-logo { margin-right: 3px; cursor: pointer; }		#de-panel { height: 25px; z-index: 9999; border-radius: 15px 0 0 0; cursor: default;}		#de-panel-btns { display: inline-block; padding: 0 0 0 2px; margin: 0; height: 25px; border-left: 1px solid #8fbbed; }		#de-panel-btns:lang(de), #de-panel-info:lang(de) { border-color: #ccc; }		#de-panel-btns:lang(fr), #de-panel-info:lang(fr) { border-color: #616b86; }		#de-panel-btns > li { margin: 0 1px; padding: 0; }		#de-panel-btns > li, #de-panel-btns > li > a, #de-btn-logo { display: inline-block; width: 25px; height: 25px; }		#de-panel-btns:lang(en) > li, #de-panel-btns:lang(fr) > li  { transition: all 0.3s ease; }		#de-panel-btns:lang(en) > li:hover, #de-panel-btns:lang(fr) > li:hover { background-color: rgba(255,255,255,.15); box-shadow: 0 0 3px rgba(143,187,237,.5); }		#de-panel-btns:lang(de) > li > a { border-radius: 5px; }		#de-panel-btns:lang(de) > li > a:hover { width: 21px; height: 21px; border: 2px solid #444; }		#de-panel-info { vertical-align: 6px; padding: "+($i.Chrome?3:2)+"px 6px; margin-left: 2px; height: 25px; border-left: 1px solid #8fbbed; color: #fff; font: 18px serif; }",i="R0lGODlhGQAZAIAAAPDw8P///yH5BAEAAAEALAAAAAAZABkA",n+=t("#de-btn-logo",i+"QAI5jI+pywEPWoIIRomz3tN6K30ixZXM+HCgtjpk1rbmTNc0erHvLOt4vvj1KqnD8FQ0HIPCpbIJtB0KADs="),n+=t("#de-btn-settings",i+"QAJAjI+pa+API0Mv1Ymz3hYuiQHHFYjcOZmlM3Jkw4aeAn7R/aL6zuu5VpH8aMJaKtZR2ZBEZnMJLM5kIqnP2csUAAA7"),n+=t("#de-btn-hidden",i+"QAI5jI+pa+CeHmRHgmCp3rxvO3WhMnomUqIXl2UmuLJSNJ/2jed4Tad96JLBbsEXLPbhFRc8lU8HTRQAADs="),n+=t("#de-btn-favor",i+"QAIzjI+py+AMjZs02ovzobzb1wDaeIkkwp3dpLEoeMbynJmzG6fYysNh3+IFWbqPb3OkKRUFADs="),n+=t("#de-btn-video",i+"AAI9jI+py+0Po5wTWEvN3VjyH20a6HDHB5TiaTIkuyov3MltEuM3nS5z8EPsgsIY6rE6QlA5JDMDbEKn1KqhAAA7"),n+=t("#de-btn-refresh",i+"AAJBjI+py+0Po5zUgItBxDZrmHUcGAbe15xiybCm5iYegsaHfY8Kvrb6/qPhZr7LgrcyJlHFE1LoVG6ilVewis1qDQUAOw=="),n+=t("#de-btn-goback",i+"QAIrjI+pmwAMm4u02gud3lzjD4biJgbd6VVPybbua61lGqIoY98ZPcvwD4QUAAA7"),n+=t("#de-btn-gonext",i+"QAIrjI+pywjQonuy2iuf3lzjD4Zis0Xd6YnQyLbua61tSqJnbXcqHVLwD0QUAAA7"),n+=t("#de-btn-goup",i+"QAIsjI+pm+DvmDRw2ouzrbq9DmKcBpVfN4ZpyLYuCbgmaK7iydpw1OqZf+O9LgUAOw=="),n+=t("#de-btn-godown",i+"QAItjI+pu+DA4ps02osznrq9DnZceIxkYILUd7bue6WhrLInLdokHq96tnI5YJoCADs="),n+=t("#de-btn-expimg",i+"QAI9jI+pGwDn4GPL2Wep3rxXFEFel42mBE6kcYXqFqYnVc72jTPtS/KNr5OJOJMdq4diAXWvS065NNVwseehAAA7"),n+=t("#de-btn-preimg",i+"QAJFjI+pGwCcHJPGWdoe3Lz7qh1WFJLXiX4qgrbXVEIYadLLnMX4yve+7ErBYorRjXiEeXagGguZAbWaSdHLOow4j8Hrj1EAADs="),n+=t("#de-btn-maskimg",i+"QAJQjI+pGwD3TGxtJgezrKz7DzLYRlKj4qTqmoYuysbtgk02ZCG1Rkk53gvafq+i8QiSxTozIY7IcZJOl9PNBx1de1Sdldeslq7dJ9gsUq6QnwIAOw=="),n+=t("#de-btn-savethr",i+"QAJFjI+pG+CQnHlwSYYu3rz7RoVipWib+aVUVD3YysAledKZHePpzvecPGnpDkBQEEV03Y7DkRMZ9ECNnemUlZMOQc+iT1EAADs="),n+=t("#de-btn-catalog",i+"QAI2jI+pa+DhAHyRNYpltbz7j1Rixo0aCaaJOZ2SxbIwKTMxqub6zuu32wP9WsHPcFMs0XDJ5qEAADs="),n+=t("#de-btn-audio-off",i+"QAI7jI+pq+DO1psvQHOj3rxTik1dCIzmSZqfmGXIWlkiB6L2jedhPqOfCitVYolgKcUwyoQuSe3WwzV1kQIAOw=="),n+=t("#de-btn-audio-on",i+"QAJHjI+pq+AewJHs2WdoZLz7X11WRkEgNoHqimadOG7uAqOm+Y6atvb+D0TgfjHS6RIp8YQ1pbHRfA4n0eSTI7JqP8Wtahr0FAAAOw=="),n+=t("#de-btn-enable",i+"AAJAjI+py+0Po5wUWKoswOF27z2aMX6bo51lioal2bzwISPyHSZ1lts9fwKKfjQiyXgkslq95TAFnUCdUirnis0eCgA7"),i="Dw8P///wAAACH5BAEAAAIALAAAAAAZABkAQAJElI+pe2EBoxOTNYmr3bz7OwHiCDzQh6bq06QSCUhcZMCmNrfrzvf+XsF1MpjhCSainBg0AbKkFCJko6g0MSGyftwuowAAOw==",n+=t("#de-btn-upd-on","R0lGODlhGQAZAJEAADL/Mv"+i),n+=t("#de-btn-upd-off","R0lGODlhGQAZAJEAAP8yMv"+i),n+=t("#de-btn-upd-warn","R0lGODlhGQAZAJEAAP/0Qf"+i),Qi.disabled?(b(n).id="de-css",b("").id="de-css-dynamic",void Bi()):(n+=".de-post-btns { margin-left: 4px; }		.de-post-note { color: inherit; margin: 0 4px; vertical-align: 1px; font: italic bold 12px serif; }		.de-thread-note { font-style: italic; }		.de-btn-expthr, .de-btn-fav, .de-btn-fav-sel, .de-btn-hide, .de-btn-hide-user, .de-btn-rep, .de-btn-sage, .de-btn-src, .de-btn-stick, .de-btn-stick-on { transform:rotate(0deg); display: inline-block; margin: 0 4px -2px 0 !important; cursor: pointer; ",0===Qi.postBtnsCSS?n+='color: #4F7942; font-size: 14px; }			.de-post-hide .de-btn-hide:after { content: ""; }			.de-post-hide .de-btn-hide-user:after { content: ""; }			.de-btn-expthr:after { content: ""; }			.de-btn-fav:after { content: ""; }			.de-btn-fav-sel:after { content: "[]"; }			.de-btn-hide:after { content: ""; }			.de-btn-hide-user:after { content: ""; color: red !important; }			.de-btn-rep:after { content: ""; }			.de-btn-sage:after { content: ""; }			.de-btn-src:after { content: "[S]"; }			.de-btn-stick:after { content: ""; }			.de-btn-stick-on:after { content: ""; }':1===Qi.postBtnsCSS?(i="R0lGODlhDgAOAKIAAPDw8KCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AAAM",n+="padding: 0 14px 14px 0; }",n+=t(".de-post-hide .de-btn-hide",i+"4SLLcqyHKGRe1E1cARPaSwIGVI3bOIAxc26oD7LqwusZcbMcNC9gLHsMHvFFixwFlGRgQdNAoIQEAOw=="),n+=t(".de-post-hide .de-btn-hide-user","R0lGODlhDgAOAKIAAP+/v6CgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AAAM4SLLcqyHKGRe1E1cARPaSwIGVI3bOIAxc26oD7LqwusZcbMcNC9gLHsMHvFFixwFlGRgQdNAoIQEAOw=="),n+=t(".de-btn-expthr",i+"5SLLcqyHGJaeoAoAr6dQaF3gZGFpO6AzNoLHMAC8uMAty+7ZwbfYzny02qNSKElkloDQSZNAolJAAADs="),n+=t(".de-btn-fav",i+"4SLLcqyHGJaeoAoAradec1Wigk5FoOQhDSq7DyrpyvLRpDb84AO++m+YXiVWMAWRlmSTEntAnIQEAOw=="),n+=t(".de-btn-fav-sel","R0lGODlhDgAOAKIAAP/hAKCgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AAAM4SLLcqyHGJaeoAoAradec1Wigk5FoOQhDSq7DyrpyvLRpDb84AO++m+YXiVWMAWRlmSTEntAnIQEAOw=="),n+=t(".de-btn-hide",i+"7SLLcqyHKGZcUE1ctAPdb0AHeCDpkWi4DM6gtGwtvOg9xDcu0rbc4FiA3lEkGE2QER2kGBgScdColJAAAOw=="),n+=t(".de-btn-hide-user","R0lGODlhDgAOAKIAAL//v6CgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AAAM7SLLcqyHKGZcUE1ctAPdb0AHeCDpkWi4DM6gtGwtvOg9xDcu0rbc4FiA3lEkGE2QER2kGBgScdColJAAAOw=="),n+=t(".de-btn-rep",i+"2SLLcqyHKGZe0NGABAL5C1XWfM47NsAznqA6qwLbAG8/nfeexvNe91UACywSKxsmAAGs6m4QEADs="),n+=t(".de-btn-sage","R0lGODlhDgAOAJEAAPDw8EtLS////wAAACH5BAEAAAIALAAAAAAOAA4AAAIZVI55pu0AgZs0SoqTzdnu5l1P1ImcwmBCAQA7"),n+=t(".de-btn-src",i+"/SLLcqyEuKWKYF4Cl6/VCF26UJHaUIzaDMGjA8Gqt7MJ47Naw3O832kxnay1sx11g6KMtBxEZ9DkdEKTYLCEBADs="),n+=t(".de-btn-stick",i+"xSLLcqyHKGRe9wVYntQBgKGxMKDJDaQJouqzsMrgDTNO27Apzv88YCjAoGRB8yB4hAQA7"),n+=t(".de-btn-stick-on","R0lGODlhDgAOAKIAAL//v6CgoICAgEtLS////wAAAAAAAAAAACH5BAEAAAQALAAAAAAOAA4AAAMxSLLcqyHKGRe9wVYntQBgKGxMKDJDaQJouqzsMrgDTNO27Apzv88YCjAoGRB8yB4hAQA7")):(i="R0lGODlhDgAOAJEAAPDw8IyMjP///wAAACH5BAEAAAIALAAAAAAOAA4AAAI",n+="padding: 0 14px 14px 0; }",n+=t(".de-post-hide .de-btn-hide",i+"ZVI55pu3vAIBI0mOf3LtxDmWUGE7XSTFpAQA7"),n+=t(".de-post-hide .de-btn-hide-user","R0lGODlhDgAOAJEAAP+/v4yMjP///wAAACH5BAEAAAIALAAAAAAOAA4AAAIZVI55pu3vAIBI0mOf3LtxDmWUGE7XSTFpAQA7 "),n+=t(".de-btn-expthr",i+"bVI55pu0BwEMxzlonlHp331kXxjlYWH4KowkFADs="),n+=t(".de-btn-fav",i+"dVI55pu0BwEtxnlgb3ljxrnHP54AgJSGZxT6MJRQAOw=="),n+=t(".de-btn-fav-sel","R0lGODlhDgAOAJEAAP/hAIyMjP///wAAACH5BAEAAAIALAAAAAAOAA4AAAIdVI55pu0BwEtxnlgb3ljxrnHP54AgJSGZxT6MJRQAOw=="),n+=t(".de-btn-hide",i+"dVI55pu2vQJIN2GNpzPdxGHwep01d5pQlyDoMKBQAOw=="),n+=t(".de-btn-hide-user","R0lGODlhDgAOAJEAAL//v4yMjP///wAAACH5BAEAAAIALAAAAAAOAA4AAAIdVI55pu2vQJIN2GNpzPdxGHwep01d5pQlyDoMKBQAOw=="),n+=t(".de-btn-rep",i+"aVI55pu2vAIBISmrty7rx63FbN1LmiTCUUAAAOw=="),n+=t(".de-btn-sage","R0lGODlhDgAOAJEAAPDw8FBQUP///wAAACH5BAEAAAIALAAAAAAOAA4AAAIZVI55pu0AgZs0SoqTzdnu5l1P1ImcwmBCAQA7"),n+=t(".de-btn-src",i+"fVI55pt0ADnRh1uispfvpLkEieGGiZ5IUGmJrw7xCAQA7"),n+=t(".de-btn-stick",i+"XVI55pu0PI5j00erutJpfj0XiKDKRUAAAOw=="),n+=t(".de-btn-stick-on","R0lGODlhDgAOAJEAAL//v4yMjP///wAAACH5BAEAAAIALAAAAAAOAA4AAAIXVI55pu0PI5j00erutJpfj0XiKDKRUAAAOw==")),dn.form||dn.oeForm||(n+=".de-btn-rep { display: none; }"),n+=e(".de-src-google","https://google.com/favicon.ico"),n+=e(".de-src-tineye","https://tineye.com/favicon.ico"),n+=e(".de-src-iqdb","//iqdb.org/favicon.ico"),n+=e(".de-src-saucenao","https://saucenao.com/favicon.ico"),n+='.de-post-counter:after { counter-increment: de-cnt 1; content: counter(de-cnt); margin-right: 4px; vertical-align: 1px; color: #4f7942; font: bold 11px tahoma; cursor: default; }		.de-post-deleted:after { content: "'+Ln.deleted[pn]+'"; margin-right: 4px; vertical-align: 1px; color: #727579; font: bold 11px tahoma; cursor: default; }',n+="#de-txt-panel { display: block; height: 23px; font-weight: bold; cursor: pointer; }		#de-txt-panel > span:empty { display: inline-block; width: 27px; height: 23px; }",i="R0lGODlhFwAWAJEAAPDw8GRkZAAAAP///yH5BAEAAAMALAAAAAAXABYAQAJ",n+=t("#de-btn-bold:empty",i+"T3IKpq4YAoZgR0KqqnfzipIUikFWc6ZHBwbQtG4zyonW2Vkb2iYOo8Ps8ZLOV69gYEkU5yQ7YUzqhzmgsOLXWnlRIc9PleX06rnbJ/KITDqTLUAAAOw=="),n+=t("#de-btn-italic:empty",i+"K3IKpq4YAYxRCSmUhzTfx3z3c9iEHg6JnAJYYSFpvRlXcLNUg3srBmgr+RL0MzxILsYpGzyepfEIjR43t5kResUQmtdpKOIQpQwEAOw=="),n+=t("#de-btn-under:empty",i+"V3IKpq4YAoRARzAoV3hzoDnoJNlGSWSEHw7JrEHILiVp1NlZXtKe5XiptPrFh4NVKHh9FI5NX60WIJ6ATZoVeaVnf8xSU4r7NMRYcFk6pzYRD2TIUAAA7"),n+=t("#de-btn-strike:empty",i+"S3IKpq4YAoRBR0qqqnVeD7IUaKHIecjCqmgbiu3jcfCbAjOfTZ0fmVnu8YIHW6lgUDkOkCo7Z8+2AmCiVqHTSgi6pZlrN3nJQ8TISO4cdyJWhAAA7"),n+=t("#de-btn-spoil:empty","R0lGODlhFwAWAJEAAPDw8GRkZP///wAAACH5BAEAAAIALAAAAAAXABYAQAJBlIKpq4YAmHwxwYtzVrprXk0LhBziGZiBx44hur4kTIGsZ99fSk+mjrMAd7XerEg7xnpLIVM5JMaiFxc14WBiBQUAOw=="),n+=t("#de-btn-code:empty",i+"O3IKpq4YAoZgR0KpqnFxokH2iFm7eGCEHw7JrgI6L2F1YotloKek6iIvJAq+WkfgQinjKVLBS45CePSXzt6RaTjHmNjpNNm9aq6p4XBgKADs="),n+=t("#de-btn-sup:empty",i+"Q3IKpq4YAgZiSQhGByrzn7YURGFGWhxzMuqqBGC7wRUNkeU7nnWNoMosFXKzi8BHs3EQnDRAHLY2e0BxnWfEJkRdT80NNTrliG3aWcBhZhgIAOw=="),n+=t("#de-btn-sub:empty",i+"R3IKpq4YAgZiSxquujtOCvIUayAkVZEoRcjCu2wbivMw2WaYi7vVYYqMFYq/i8BEM4ZIrYOmpdD49m2VFd2oiUZTORWcNYT9SpnZrTjiML0MBADs="),n+=t("#de-btn-quote:empty",i+"L3IKpq4YAYxRUSKguvRzkDkZfWFlicDCqmgYhuGjVO74zlnQlnL98uwqiHr5ODbDxHSE7Y490wxF90eUkepoysRxrMVaUJBzClaEAADs="),$i.Anim&&(n+="@keyframes de-open {				0% { transform: translateY(-100%); }				100% { transform: translateY(0); }			}			@keyframes de-close {				0% { transform: translateY(0); }				100% { transform: translateY(-100%); }			}			@keyframes de-blink {				0%, 100% { transform: translateX(0); }				10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }				20%, 40%, 60%, 80% { transform: translateX(10px); }			}			@keyframes de-cfg-open { from { transform: translate(0,50%) scaleY(0); opacity: 0; } }			@keyframes de-cfg-close { to { transform: translate(0,50%) scaleY(0); opacity: 0; } }			@keyframes de-post-open-tl { from { transform: translate(-50%,-50%) scale(0); opacity: 0; } }			@keyframes de-post-open-bl { from { transform: translate(-50%,50%) scale(0); opacity: 0; } }			@keyframes de-post-open-tr { from { transform: translate(50%,-50%) scale(0); opacity: 0; } }			@keyframes de-post-open-br { from { transform: translate(50%,50%) scale(0); opacity: 0; } }			@keyframes de-post-close-tl { to { transform: translate(-50%,-50%) scale(0); opacity: 0; } }			@keyframes de-post-close-bl { to { transform: translate(-50%,50%) scale(0); opacity: 0; } }			@keyframes de-post-close-tr { to { transform: translate(50%,-50%) scale(0); opacity: 0; } }			@keyframes de-post-close-br { to { transform: translate(50%,50%) scale(0); opacity: 0; } }			@keyframes de-post-new { from { transform: translate(0,-50%) scaleY(0); opacity: 0; } }			.de-pview-anim { animation-duration: .2s; animation-timing-function: ease-in-out; animation-fill-mode: both; }			.de-open { animation: de-open .15s ease-out both; }			.de-close { animation: de-close .15s ease-in both; }			.de-blink { animation: de-blink .7s ease-in-out both; }			.de-cfg-open { animation: de-cfg-open .2s ease-out backwards; }			.de-cfg-close { animation: de-cfg-close .2s ease-in both; }			.de-post-new { animation: de-post-new .2s ease-out both; }"),n+=e(".de-video-link.de-ytube","https://youtube.com/favicon.ico"),n+=e(".de-video-link.de-vimeo","https://vimeo.com/favicon.ico"),n+=e(".de-img-arch","data:image/gif;base64,R0lGODlhEAAQALMAAF82SsxdwQMEP6+zzRA872NmZQesBylPHYBBHP///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAAAQABAAQARTMMlJaxqjiL2L51sGjCOCkGiBGWyLtC0KmPIoqUOg78i+ZwOCUOgpDIW3g3KJWC4t0ElBRqtdMr6AKRsA1qYy3JGgMR4xGpAAoRYkVDDWKx6NRgAAOw=="),n+=e(".de-img-audio","data:image/gif;base64,R0lGODlhEAAQAKIAAGya4wFLukKG4oq3802i7Bqy9P///wAAACH5BAEAAAYALAAAAAAQABAAQANBaLrcHsMN4QQYhE01OoCcQIyOYQGooKpV1GwNuAwAa9RkqTPpWqGj0YTSELg0RIYM+TjOkgba0sOaAEbGBW7HTQAAOw=="),n+='.de-current:after { content: " "; }		.de-img-arch, .de-img-audio { color: inherit; text-decoration: none; font-weight: bold; }		.de-img-pre, .de-img-full { display: block; border: none; outline: none; cursor: pointer; }		.de-img-pre { max-width: 200px; max-height: 200px; }		.de-img-full { float: left; }		.de-img-center { position: fixed; margin: 0 !important; z-index: 9999; background-color: #ccc; border: 1px solid black !important; -moz-box-sizing: content-box; box-sizing: content-box; }		#de-img-btn-next > div, #de-img-btn-prev > div { height: 36px; width: 36px; }'+t("#de-img-btn-next > div","R0lGODlhIAAgAIAAAPDw8P///yH5BAEAAAEALAAAAAAgACAAQAJPjI8JkO1vlpzS0YvzhUdX/nigR2ZgSJ6IqY5Uy5UwJK/l/eI6A9etP1N8grQhUbg5RlLKAJD4DAJ3uCX1isU4s6xZ9PR1iY7j5nZibixgBQA7")+t("#de-img-btn-prev > div","R0lGODlhIAAgAIAAAPDw8P///yH5BAEAAAEALAAAAAAgACAAQAJOjI8JkO24ooxPzYvzfJrWf3Rg2JUYVI4qea1g6zZmPLvmDeM6Y4mxU/v1eEKOpziUIA1BW+rXXEVVu6o1dQ1mNcnTckp7In3LAKyMchUAADs=")+'#de-img-btn-next, #de-img-btn-prev { position: fixed; top: 50%; z-index: 10000; margin-top: -8px; background-color: black; cursor: pointer; }		#de-img-btn-next { right: 0; border-radius: 10px 0 0 10px; }		#de-img-btn-prev { left: 0; border-radius: 0 10px 10px 0; }		.de-mp3, .de-video-obj { margin: 5px 20px; white-space: nowrap; clear: both; }		.de-video-expanded > embed, .de-video-expanded > iframe, .de-video-expanded > a > img { width: 848px; height: 480px; }		#de-video-list { padding: 0 0 4px; overflow-y: scroll; }		.de-video-resizer:after { content: " "; margin-right: -15px; vertical-align: 8px; color: black; font-size: 12px; cursor: pointer; }		.de-video-title[de-time]:after { content: " [" attr(de-time) "]"; color: red; }		td > a + .de-video-obj, td > img + .de-video-obj { display: inline-block; }		video { background: black; }		.de-vocaroo > embed { display: inline-block; }',i=Zi.multiFile?90:130,n+=".de-file { display: inline-block; margin: 1px; height: "+i+"px; width: "+i+'px; text-align: center; border: 1px dashed grey; }		.de-file > .de-file-del { float: right; }		.de-file > .de-file-rar { float: left; }		.de-file > .de-file-rarmsg { float: left; padding: 0 4px 2px; color: #fff; background-color: rgba(55, 55, 55, 0.5); }		.de-file > .de-file-utils { display: none; }		.de-file > div { display: table; width: 100%; height: 100%; cursor: pointer; }		.de-file > div > div { display: table-cell; vertical-align: middle; }		.de-file + [type="file"] { opacity: 0; margin: 1px 0 0 -'+(i+2)+"px !important; vertical-align: top; width: "+(i+2)+"px !important; height: "+(i+2)+"px; border: none !important; cursor: pointer; }		#de-file-area { border-spacing: 0; margin-top: 1px; width: 275px; min-width:100%; max-width: 100%; overflow-x: auto; overflow-y: hidden; white-space: nowrap; }		.de-file-drag { background: rgba(88, 88, 88, 0.4); border: 1px solid grey; }		.de-file-hover > .de-file-utils { display: block; position: relative; margin: -18px 2px; }		.de-file-img > img, .de-file-img > video { max-width: "+(i-4)+"px; max-height: "+(i-4)+'px; }		.de-file-input { max-width: 300px; }		.de-file-off > div > div:after { content: "'+Ln.noFile[pn]+'" }		.de-file-rarmsg { margin: 0 5px; font: bold 11px tahoma; cursor: default; }		.de-file-del, .de-file-rar { display: inline-block; margin: 0 4px -3px; width: 16px; height: 16px; cursor: pointer; }',n+=t(".de-file-del","R0lGODlhEAAQALMOAP8zAMopAJMAAP/M//+DIP8pAP86Av9MDP9sFP9zHv9aC/9gFf9+HJsAAP///wAAACH5BAEAAA4ALAAAAAAQABAAAARU0MlJKw3B4hrGyFP3hQNBjE5nooLJMF/3msIkJAmCeDpeU4LFQkFUCH8VwWHJRHIM0CiIMwBYryhS4XotZDuFLUAg6LLC1l/5imykgW+gU0K22C0RADs="),n+=t(".de-file-rar","R0lGODlhEAAQALMAAF82SsxdwQMEP6+zzRA872NmZQesBylPHYBBHP///wAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAAAQABAAQARTMMlJaxqjiL2L51sGjCOCkGiBGWyLtC0KmPIoqUOg78i+ZwOCUOgpDIW3g3KJWC4t0ElBRqtdMr6AKRsA1qYy3JGgMR4xGpAAoRYkVDDWKx6NRgAAOw=="),n+="#de-txta-resizer { display: inline-block !important; float: none !important; padding: 5px; margin: "+($i.Presto?"-2px -10px":"0 0 -1px -11px")+'; vertical-align: bottom; border-bottom: 2px solid #666; border-right: 2px solid #666; cursor: se-resize; }		.de-parea { text-align: center; }		.de-parea-btn-close:after { content: "'+Ln.hideForm[pn]+'" }		.de-parea-btn-thrd:after { content: "'+Ln.makeThrd[pn]+'" }		.de-parea-btn-reply:after { content: "'+Ln.makeReply[pn]+'" }		#de-pform { display: inline-block; vertical-align: middle; }		#de-pform > form { padding: 0; margin: 0; border: none; }		#de-pform input[type="text"], #de-pform input[type="file"] { width: 200px; }		#de-qarea { width: auto !important; min-width: 0; padding: 0 !important; border: none !important; }		#de-qarea > div:nth-child(2) { text-align: center; }		.de-qarea-hanging { position: fixed; z-index: 9990; padding: 0 !important; margin: 0 !important; border-radius: 10px 10px 0 0; }		.de-qarea-hanging > .de-cfg-head { cursor: move; }		.de-qarea-hanging #de-qarea-utils > span:hover { color: #ff6; }		.de-qarea-hanging > #de-pform { padding: 2px 2px 0 1px; border: 1px solid gray; }		.de-qarea-hanging .de-textarea { min-width: 98% !important; resize: none !important; }		.de-qarea-hanging #de-txta-resizer { display: none !important; }		.de-qarea-hanging #de-resizer-bottom { position: absolute; margin: -3px; height: 6px; width: 100%; cursor: ns-resize; }		.de-qarea-hanging #de-resizer-left { position: absolute; margin: -3px; bottom: 3px; top: 3px; width: 6px; cursor: ew-resize; }		.de-qarea-hanging #de-resizer-right { position: absolute; margin: -3px; bottom: 3px; top: 3px; display: inline-block; width: 6px; cursor: ew-resize; }		.de-qarea-hanging #de-resizer-top { position: absolute; margin: -3px; height: 6px; width: 100%; cursor: ns-resize; }		.de-qarea-inline { float: none; clear: left; display: inline-block; width: auto; padding: 3px; margin: 2px 0; }		#de-qarea-target { font-weight: bold; margin-left: 4px; }		#de-qarea-utils { float: right; margin-top: '+($i.Chrome?-1:-4)+"px; font: normal 16px arial; cursor: pointer; }		#de-qarea-utils > span { margin-right: 4px; }		#de-sagebtn { margin: 4px !important; vertical-align: top; cursor: pointer; }		.de-textarea { display: inline-block; padding: 3px !important; min-width: 275px !important; min-height: 90px !important; resize: both; transition: none !important; }",n+=e(".de-wait","data:image/gif;base64,R0lGODlhEAAQALMMAKqooJGOhp2bk7e1rZ2bkre1rJCPhqqon8PBudDOxXd1bISCef///wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAAMACwAAAAAEAAQAAAET5DJyYyhmAZ7sxQEs1nMsmACGJKmSaVEOLXnK1PuBADepCiMg/DQ+/2GRI8RKOxJfpTCIJNIYArS6aRajWYZCASDa41Ow+Fx2YMWOyfpTAQAIfkEBQAADAAsAAAAABAAEAAABE6QyckEoZgKe7MEQMUxhoEd6FFdQWlOqTq15SlT9VQM3rQsjMKO5/n9hANixgjc9SQ/CgKRUSgw0ynFapVmGYkEg3v1gsPibg8tfk7CnggAIfkEBQAADAAsAAAAABAAEAAABE2QycnOoZjaA/IsRWV1goCBoMiUJTW8A0XMBPZmM4Ug3hQEjN2uZygahDyP0RBMEpmTRCKzWGCkUkq1SsFOFQrG1tr9gsPc3jnco4A9EQAh+QQFAAAMACwAAAAAEAAQAAAETpDJyUqhmFqbJ0LMIA7McWDfF5LmAVApOLUvLFMmlSTdJAiM3a73+wl5HYKSEET2lBSFIhMIYKRSimFriGIZiwWD2/WCw+Jt7xxeU9qZCAAh+QQFAAAMACwAAAAAEAAQAAAETZDJyRCimFqbZ0rVxgwF9n3hSJbeSQ2rCWIkpSjddBzMfee7nQ/XCfJ+OQYAQFksMgQBxumkEKLSCfVpMDCugqyW2w18xZmuwZycdDsRACH5BAUAAAwALAAAAAAQABAAAARNkMnJUqKYWpunUtXGIAj2feFIlt5JrWybkdSydNNQMLaND7pC79YBFnY+HENHMRgyhwPGaQhQotGm00oQMLBSLYPQ9QIASrLAq5x0OxEAIfkEBQAADAAsAAAAABAAEAAABE2QycmUopham+da1cYkCfZ94UiW3kmtbJuRlGF0E4Iwto3rut6tA9wFAjiJjkIgZAYDTLNJgUIpgqyAcTgwCuACJssAdL3gpLmbpLAzEQA7"),n+=".de-abtn { text-decoration: none !important; outline: none; }		.de-after-fimg { clear: left; }		#de-alert { position: fixed; right: 0; top: 0; z-index: 9999; font: 14px arial; cursor: default; }		#de-alert > div { overflow: visible !important; float: right; clear: both; width: auto; min-width: 0pt; padding: 10px; margin: 1px; border: 1px solid grey; white-space: pre-wrap; }		.de-alert-btn { display: inline-block; vertical-align: top; color: green; cursor: pointer; }		.de-alert-btn:not(.de-wait) + div { margin-top: .15em; }		.de-alert-msg { display: inline-block; }		.de-content textarea { display: block; margin: 2px 0; font: 12px courier new; "+($i.Presto?"":"resize: none !important; ")+"}		.de-content-block > a { color: inherit; font-weight: bold; font-size: 14px; }		.de-content-block > input { margin: 0 4px; }		#de-content-fav, #de-content-hid, #de-content-vid { font-size: 16px; padding: 10px; border: 1px solid gray; border-radius: 8px; }		.de-editor { display: block; font: 12px courier new; width: 619px; height: 337px; tab-size: 4; -moz-tab-size: 4; -o-tab-size: 4; }		.de-entry { display: block !important; float: none !important; width: auto; max-width: 100% !important; margin: 2px 0 !important; padding: 0 !important; border: none; font-size: 14px; "+($i.Presto?"white-space: nowrap; ":"")+'}		.de-entry > a { text-decoration: none; border: none; }		.de-entry > input { margin: 2px 4px; }		.de-fav-inf-err { color: #c33; font-size: 12px; }		.de-fav-inf-new { color: #424f79; }		.de-fav-inf-new:before { content: "+ "; }		.de-fav-inf-old { color: #4f7942; }		.de-fav-inf-posts { float: right; margin-right: 4px; font: bold 14px serif; cursor: default; }		.de-fav-title { margin-right: 15px; }		.de-hidden { float: left; overflow: hidden !important; margin: 0 !important; width: 0 !important; height: 0 !important; display: inline !important; }		.de-link-hid { text-decoration: line-through !important; }		.de-link-parent { outline: 1px dotted !important; }		.de-link-pview { font-weight: bold; }		.de-link-ref { text-decoration: none; }		.de-menu { padding: 0 !important; margin: 0 !important; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey !important;}		.de-menu-item { display: block; padding: 3px 10px; color: inherit; text-decoration: none; font: 13px arial; white-space: nowrap; cursor: pointer; }		.de-menu-item:hover { background-color: #222; color: #fff; }		.de-new-post { '+($i.Presto?"border-left: 4px solid blue; border-right: 4px solid blue; }":"box-shadow: 6px 0 2px -2px blue, -6px 0 2px -2px blue; }")+'		.de-omitted { color: grey; font-style: italic; }		.de-omitted:before { content: "'+Ln.postsOmitted[pn]+'"; }		.de-pview { position: absolute; width: auto; min-width: 0; z-index: 9999; border: 1px solid grey !important; margin: 0 !important; display: block !important; }		.de-pview-info { padding: 3px 6px !important; }		.de-ref-op:after { content: " [OP]"; }		.de-ref-del:after { content: " [del]"; }		.de-refmap { margin: 10px 4px 4px 4px; font-size: 75%; font-style: italic; }		.de-refmap:before { content: "'+Ln.replies[pn]+' "; }		.de-refcomma:last-child { display: none; }		.de-selected, .de-error-key { '+($i.Presto?"border-left: 4px solid red; border-right: 4px solid red; }":"box-shadow: 6px 0 2px -2px red, -6px 0 2px -2px red; }")+'		#de-updater-btn:after { content: "'+Ln.getNewPosts[pn]+'" }		#de-updater-count:before { content: ": " }		#de-updater-div { clear: left; margin-top: 10px; cursor: pointer; }		.de-viewed { color: #888 !important; }		small[id^="rfmap"], body > hr, .theader, .postarea, .thumbnailmsg { display: none !important; }		form > hr { clear: both }		'+Zi.css+Zi.cssEn+".de-post-hide > "+Zi.qHide+" { display: none !important; }",$i.Firefox||(n=n.replace(/(transition|keyframes|transform|animation|linear-gradient)/g,$i.cssFix+"$1"),$i.Presto||(n=n.replace(/\(to bottom/g,"(top").replace(/\(to top/g,"(bottom"))),b(n).id="de-css",b("").id="de-css-dynamic",b("").id="de-css-user",void Bi())}function Bi(){var e="";return e+=Qi.attachPanel?".de-content { position: fixed; right: 0; bottom: 25px; z-index: 9999; max-height: 95%; overflow-x: visible; overflow-y: auto; }		#de-content-fav, #de-content-hid { overflow-y: scroll; }		#de-panel { position: fixed; right: 0; bottom: 0; }":".de-content { clear: both; float: right; }		#de-panel { float: right; clear: both; }",Qi.disabled?void(a("de-css-dynamic").textContent=e):(Qi.panelCounter||(e+="#de-panel-info { display: none; }"),Qi.imgNavBtns||(e+="#de-img-btn-next, #de-img-btn-prev { display: none; }"),Qi.maskImgs&&(e+='.de-img-pre, .de-video-obj, .thumb, .ca_thumb, .fileThumb, img[src*="spoiler"], img[src*="thumb"], img[src^="blob"] { opacity: 0.07 !important; }			.de-img-pre:hover, .de-video-obj:hover, .thumb:hover, .ca_thumb:hover, .fileThumb:hover, img[src*="spoiler"]:hover, img[src*="thumb"]:hover, img[src^="blob"]:hover { opacity: 1 !important; }'),Zi.dobr||Zi.krau||Zi.mak||(e+=".de-img-full { margin: 2px 5px; }"),Qi.delHiddPost&&(e+=".de-thr-hid, .de-thr-hid + div + hr, .de-thr-hid + div + br, .de-thr-hid + div + br + hr { display: none; }"),Qi.removeHidd&&(e+=".de-link-ref.de-link-hid, .de-link-ref.de-link-hid + .de-refcomma { display: none; }"),Qi.noPostNames&&(e+=Zi.qName+", ."+Zi.cTrip+" { display: none; }"),Qi.noSpoilers&&(e+=Zi.krau||Zi.fch||Zi._410||Zi.dio?".spoiler, s { color: #fff !important; }				.spoiler > a, s > a { color: #fff !important; }":".spoiler { color: inherit !important; }				.spoiler > a { color: inherit !important; }"),Qi.noPostScrl&&(e+="blockquote, blockquote > p, .code_part { height: auto !important; max-height: 100% !important; overflow: visible !important; }"),Qi.noBoardRule&&(e+=(Zi.futa?".chui":".rules, #rules, #rules_row")+" { display: none; }"),Zi.kus||!Zi.multiFile&&Qi.fileThumb||(e+="#de-pform form > table > tbody > tr > td:not([colspan]):first-child, #de-pform form > table > tbody > tr > th:first-child { display: none; }"),a("de-css-dynamic").textContent=e,void(a("de-css-user").textContent=Qi.userCSS?Qi.userCSSTxt:""))}function Ui(e){if(jt(null),e&&(new ln).log("Preload images"),Yt(null),e&&(new ln).log("Audio links"),Ut.parseLinks(null),e&&(new ln).log("Video links"),Qi.addImgs&&(gi(un.el),e&&(new ln).log("Image links")),Qi.imgSrcBtns&&(mi(un.el),e&&(new ln).log("Sauce buttons")),un.firstThr&&2===Qi.linksNavig){Pi(Wi,"");for(var t=un.firstThr.op;t;t=t.next)t.hasRef&&Ti(t,"");e&&(new ln).log("Reflinks map")}}var Yi,zi,Qi,Vi,Gi,Wi,Ji,Ki,Xi,Zi,$i,en,tn,nn,rn,sn,an,on,ln,dn,un,cn,hn,pn,fn,mn,gn,vn,bn,yn,An=regeneratorRuntime.mark(function Hn(e){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!$i.isGM){i.next=4;break}return i.abrupt("return",GM_getValue(e));case 4:if(!$i.isChromeStorage){i.next=10;break}return i.next=7,new Promise(function(t){chrome.storage.local.get(e,function(i){Object.keys(i).length?t(i[e]):chrome.storage.sync.get(e,function(i){t(i[e])
})})});case 7:return i.abrupt("return",i.sent);case 10:if(!$i.isScriptStorage){i.next=14;break}return i.abrupt("return",t.getItem(e));case 14:return i.abrupt("return",Yi.getItem(e));case 15:case"end":return i.stop()}},Hn,this)}),wn=regeneratorRuntime.mark(function qn(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(An(e),"t2",1);case 1:if(t.t1=t.t2,t.t1){t.next=4;break}t.t1="{}";case 4:if(t.t0=JSON.parse(t.t1),t.t0){t.next=7;break}t.t0={};case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}},qn,this)}),xn=regeneratorRuntime.mark(function Dn(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.delegateYield(wn("DESU_Config"),"t3",1);case 1:t=i.t3,Vi=t,Zi.dm in Vi&&!P(e=Vi[Zi.dm])||(e=$i.isGlobal?Vi.global||{}:{},e.captchaLang=Zi.ru?2:1,e.correctTime=0),Qi=Object.assign(Object.create(Sn),e),Qi.timeOffset||(Qi.timeOffset="+0"),Qi.timePattern||(Qi.timePattern=Zi.timePattern),($i.Opera11||Zi.fch||Zi.tiny)&&2===Qi.ajaxReply&&(Qi.ajaxReply=1),Zi.tiny&&(Qi.fileThumb=0),"http:"!==Zi.prot&&(Qi.addVocaroo=0),"Notification"in window||(Qi.desktNotif=0),$i.Presto&&($i.Opera11&&($i.isGM||(Qi.YTubeTitles=0),Qi.animation=0),2===Qi.YTubeType&&(Qi.YTubeType=1),Qi.preLoadImgs=0,Qi.findImgFile=0,$i.isGM||(Qi.updScript=0),Qi.fileThumb=0),$i.isChromeStorage&&(Qi.updScript=0),Qi.updThrDelay<10&&(Qi.updThrDelay=10),Qi.saveSage||(Qi.sageReply=0),Qi.passwValue||(Qi.passwValue=Math.round(1e15*Math.random()).toString(32)),Qi.stats||(Qi.stats={view:0,op:0,reply:0}),tn&&Qi.stats.view++,(Zi.mak||Zi.fch)&&(Qi.findImgFile=0),Zi.synch&&(Qi.timePattern="w+dd+m+yyyy+hh+ii+ss",Qi.timeOffset=4,Qi.correctTime=1),Y(Zi.dm,Qi),pn=Qi.language,Qi.correctTime&&(an=new qt(Qi.timePattern,Qi.timeRPattern,Qi.timeOffset,pn,function(e){z("timeRPattern",e)}));case 23:case"end":return i.stop()}},Dn,this)}),kn=regeneratorRuntime.mark(function Bn(){var e,t,i,n,r,s,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.delegateYield(wn("DESU_Posts_"+Zi.dm),"t4",1);case 1:return Ki=o.t4,o.delegateYield(wn("DESU_Threads_"+Zi.dm),"t5",3);case 3:if(Gi=o.t5,n=Date.now(),r=!1,s=Qi.hideBySpell,e=en in Ki?Ki[en]:Ki[en]={},en in Gi||(Gi[en]={}),un.firstThr){o.next=9;break}return o.abrupt("return");case 9:i=un.firstThr.op;case 10:if(!i){o.next=29;break}if(a=i.num,!(a in e)){o.next=16;break}return i.isOp&&(e[a][0]=+!(a in Gi[en])),0===e[a][0]?i.setUserVisib(!0,n,!1):(e[a][1]=n,i.btns.firstChild.className="de-btn-hide-user",i.userToggled=!0),o.abrupt("continue",26);case 16:if(!i.isOp){o.next=20;break}a in Gi[en]?t="0":"0"===t&&(t=null),o.next=25;break;case 20:if(!s){o.next=24;break}t=Ji[i.count],o.next=25;break;case 24:return o.abrupt("continue",26);case 25:"0"===t?(i.hidden||(i.setVisib(!0),i.hideRefs()),i.spellHidden=!0):"1"!==t&&hn.check(i);case 26:i=i.next,o.next=10;break;case 29:hn.end(W),r&&(Ki[en]=e,J(!1));case 31:case"end":return o.stop()}},Bn,this)}),_n=regeneratorRuntime.mark(function Un(){var e,t,i,n,r;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=!1,s.delegateYield(wn("DESU_Favorites"),"t6",2);case 2:if(r=s.t6,Zi.host in r){s.next=5;break}return s.abrupt("return");case 5:if(t=r[Zi.host],en in t){s.next=8;break}return s.abrupt("return");case 8:for(t=t[en],e=un.firstThr;e;e=e.next)(i=e.num)in t&&(e.setFavBtn(!0),tn?(t[i].cnt=e.pcount,t[i]["new"]=0):t[i]["new"]=e.pcount-t[i].cnt,n=!0);n&&X(r);case 11:case"end":return s.stop()}},Un,this)}),Tn=regeneratorRuntime.mark(function Yn(e,t){var i,n,r,s,a,o;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Mt({method:"GET",url:e});case 2:if(n=l.sent){l.next=5;break}return l.abrupt("return",null);case 5:if(i="arraybuffer"===n.responseType,0!==n.status||!i){l.next=10;break}return l.abrupt("return",new Uint8Array(n.response));case 10:if(200===n.status){l.next=19;break}if(404!==n.status&&t){l.next=15;break}return l.abrupt("return",null);case 15:return l.delegateYield(Yn(e,!1),"t14",16);case 16:return l.abrupt("return",l.t14);case 17:l.next=25;break;case 19:if(!i){l.next=23;break}return l.abrupt("return",new Uint8Array(n.response));case 23:for(r=void 0,s=0,a=n.responseText,o=new Uint8Array(len=a.length);r>s;++s)o[s]=255&a.charCodeAt(s);return l.abrupt("return",rv);case 25:case"end":return l.stop()}},Yn,this)}),Pn=regeneratorRuntime.mark(function zn(e){var t,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if((new ln).init(),t=Ii(e)){r.next=4;break}return r.abrupt("return");case 4:return(new ln).log("Init"),r.delegateYield(An("DESU_Exclude"),"t26",6);case 6:if(i=r.t26,!i||!i.contains(Zi.dm)){r.next=9;break}return r.abrupt("return");case 9:return yn=i||"",r.delegateYield(xn(),"t27",11);case 11:if((new ln).log("Config loading"),!Qi.disabled){r.next=16;break}return tt(t),Di(),r.abrupt("return");case 16:hn=new Jt(!!Qi.hideBySpell),(new ln).log("Parsing spells"),Cn.body.style.display="none",t=Ri.doReplace(t),(new ln).log("Replace delform"),Wi=Object.create(null),r.prev=22,un=new Ri(t,!1),r.next=31;break;case 26:return r.prev=26,r.t28=r["catch"](22),console.log("DELFORM ERROR:\n"+F(r.t28)),Cn.body.style.display="",r.abrupt("return");case 31:return un.initAjax(),(new ln).log("Parse delform"),dn=new ti(n(Zi.qPostForm,Cn),!1,!fn,Cn),(new ln).log("Parse postform"),Qi.hotKeys&&(sn=new St,(new ln).log("Init keybinds")),fn||(ji(),(new ln).log("Init page"),tt(t),(new ln).log("Add panel")),Ct(),Ui(!0),$(),Di(),(new ln).log("Apply CSS"),Xi&&Fi(),Cn.body.style.display="",(new ln).log("Scroll page"),G(),r.delegateYield(kn(),"t29",47);case 47:return r.delegateYield(_n(),"t30",48);case 48:setTimeout(bi.purge,0),(new ln).log("Apply spells"),(new ln).finish();case 51:case"end":return r.stop()}},zn,this,[[22,26]])}),En="15.1.28.0",Sn={disabled:0,language:0,hideBySpell:1,spells:"",sortSpells:0,menuHiddBtn:1,hideRefPsts:0,delHiddPost:0,ajaxUpdThr:1,updThrDelay:20,noErrInTitle:0,favIcoBlink:0,markNewPosts:1,desktNotif:0,updCount:1,expandPosts:2,postBtnsCSS:2,noSpoilers:1,noPostNames:0,noPostScrl:1,correctTime:0,timeOffset:"+0",timePattern:"",timeRPattern:"",expandImgs:2,imgNavBtns:1,resizeDPI:0,resizeImgs:1,minImgSize:100,zoomFactor:25,webmControl:1,webmVolume:100,maskImgs:0,preLoadImgs:0,findImgFile:0,openImgs:0,openGIFs:0,imgSrcBtns:1,linksNavig:2,linksOver:100,linksOut:1500,markViewed:0,strikeHidd:0,removeHidd:0,noNavigHidd:0,crossLinks:0,insertNum:1,addOPLink:0,addImgs:0,addMP3:1,addVocaroo:1,addYouTube:3,YTubeType:0,YTubeWidth:360,YTubeHeigh:270,YTubeHD:0,YTubeTitles:0,addVimeo:1,ajaxReply:2,postSameImg:1,removeEXIF:1,removeFName:0,sendErrNotif:1,scrAfterRep:0,addPostForm:2,hangQReply:1,favOnReply:1,warnSubjTrip:0,fileThumb:1,addSageBtn:1,saveSage:1,sageReply:0,captchaLang:1,addTextBtns:1,txtBtnsLoc:1,passwValue:"",userName:0,nameValue:"",noBoardRule:1,noGoto:1,noPassword:1,noName:0,scriptStyle:0,userCSS:0,userCSSTxt:"",expandPanel:0,attachPanel:1,panelCounter:1,rePageTitle:1,animation:1,closePopups:0,hotKeys:1,loadPages:1,updScript:1,scrUpdIntrv:1,turnOff:0,textaWidth:300,textaHeight:115,qReplyX:"right: 0",qReplyY:"bottom: 25px"},Ln={cfg:{hideBySpell:[": ","Magic spells: "],sortSpells:["    ","Sort spells and delete duplicates"],menuHiddBtn:["    ","Additional menu of hide buttons"],hideRefPsts:["    *","Hide replies to hidden posts*"],delHiddPost:["  ","Delete hidden posts"],ajaxUpdThr:["AJAX   ","AJAX thread update "],updThrDelay:[" ()"," (sec)"],noErrInTitle:["     ","Don't show error number in title"],favIcoBlink:["    ","Favicon blinking on new posts"],markNewPosts:["      ","Mark new posts on page focus"],desktNotif:["   ","Desktop notifications"],updCount:["    ","Show countdown to thread update"],expandPosts:{sel:[[".",""," "],["Disable","Auto","On click"]],txt:["AJAX   *","AJAX upload of shorted posts*"]},postBtnsCSS:{sel:[["Text","Classic","Solid grey"],["Text","Classic","Solid grey"]],txt:["  *","Post buttons style*"]},noSpoilers:["  ","Open text spoilers"],noPostNames:["   ","Hide names in posts"],noPostScrl:["   ","No scroll in posts"],hotKeys:["  ","Keyboard hotkeys "],loadPages:["  ,   F5"," Number of pages that are loaded on F5 "],correctTime:["   * ","Correct time in posts* "],timeOffset:["   "," Time difference"],timePattern:["  "," Find pattern"],timeRPattern:["  "," Replace pattern"],expandImgs:{sel:[["."," "," "],["Disable","In post","By center"]],txt:["   ","expand images on click"]},imgNavBtns:["    ","Add buttons for images navigation"],resizeDPI:["    ","Don't upscale images on retina displays"],resizeImgs:["    ","Resize large images to fit screen"],minImgSize:["    (px)"," Minimal image's size (px)"],zoomFactor:["    [1-100]"," Sensibility of the images zoom [1-100]"],webmControl:[" -  webm-","Show control bar for webm files"],webmVolume:["  webm- [0-100]"," Default volume for webm files [0-100]"],preLoadImgs:["  *","Pre-load images*"],findImgFile:["    *","Detect built-in files in images*"],openImgs:["   *","Download full version of images*"],openGIFs:["  GIF*","Download GIFs only*"],imgSrcBtns:["    *","Add image search buttons*"],linksNavig:{sel:[["."," "," "],["Disable","No map","With map"]],txt:["  >>* ","navigation by >>links* "]},linksOver:["  "," appearance "],linksOut:["  ()"," disappearance (ms)"],markViewed:["  *","Mark viewed posts*"],strikeHidd:[" >>   ","Strike >>links to hidden posts"],removeHidd:["   ","Remove from replies map"],noNavigHidd:["     ","Don't show previews for hidden posts"],crossLinks:[" http://  >>/b/*","Replace http:// with >>/b/links*"],insertNum:[" >>    *","Insert >>link on postnumber click*"],addOPLink:[" >>    -  ","Insert >>link for reply to op-posts on board"],addMP3:["  mp3 *","Player to mp3 links*"],addImgs:["   jpg, png, gif *","Load images to jpg, png, gif links*"],addVocaroo:["  Vocaroo *","Player to Vocaroo links*"],addVimeo:["   Vimeo *","Add player to Vimeo links*"],addYouTube:{sel:[["","  "," ","+"," "],["Nothing","On click player","Auto player","Preview+player","Only preview"]],txt:[" YouTube-* ","to YouTube-links* "]},YTubeType:{sel:[["Flash","HTML5"],["Flash","HTML5"]],txt:["",""]},YTubeHD:["HD ","HD "],YTubeTitles:["   YouTube-*","Load titles into YouTube-links*"],ajaxReply:{sel:[[".","Iframe","HTML5"],["Disable","Iframe","HTML5"]],txt:["AJAX  *","posting with AJAX*"]},postSameImg:["   ","Ability to post same images"],removeEXIF:[" EXIF  JPEG ","Remove EXIF from JPEG "],removeFName:["  ","Clear file names"],sendErrNotif:["      ","Inform in title about post send error"],scrAfterRep:["     ","Scroll to the bottom after reply"],addPostForm:{sel:[["","",""],["At top","At bottom","Hidden"]],txt:["   ","reply form in thread"]},favOnReply:["     ","Add thread to favorites on reply"],warnSubjTrip:['   -   ""','Warn if "Subject" field contains trip-code'],fileThumb:['     ""','File thumbnail area instead of "File" button'],addSageBtn:[' Sage  "E-mail"* ','Sage button instead of "E-mail"* '],saveSage:[" ","remember sage"],captchaLang:{sel:[[".","Eng","Rus"],["Disable","Eng","Rus"]],txt:["  ","language input in captcha"]},addTextBtns:{sel:[[".",".",".","."],["Disable","As images","As text","Standard"]],txt:["   ","text format buttons "]},txtBtnsLoc:["","at bottom"],userPassw:["   "," Fixed password "],userName:[" ","Fixed name"],noBoardRule:["","rules"],noGoto:[" goto","goto field"],noPassword:["","password"],noName:["","name"],scriptStyle:{sel:[["Glass black","Glass blue","Solid grey"],["Glass black","Glass blue","Solid grey"]],txt:[" ","script style"]},userCSS:[" CSS ","User CSS "],attachPanel:["  ","Attach main panel"],panelCounter:[" /   ","Counter of posts/images on main panel"],rePageTitle:["    *","Thread title in page tab*"],animation:["CSS3   ","CSS3 animation in script"],closePopups:["  ","Close popups automatically"],updScript:["   ","Check for script update automatically"],scrUpdIntrv:{sel:[[" "," 2 "," "," 2 "," "],["Every day","Every 2 days","Every week","Every 2 week","Every month"]],txt:["",""]},excludeList:[" ,   :","Domains list for preventing script launch:"],turnOff:["     ","Enable script only on this site"],language:{sel:[["Ru","En"],["Ru","En"]],txt:["",""]}},txtBtn:[["","Bold"],["","Italic"],["","Underlined"],["","Strike"],["","Spoiler"],["","Code"],[" ","Superscript"],[" ","Subscript"],[" ","Quote selected"]],cfgTab:{filters:["","Filters"],posts:["","Posts"],images:["","Images"],links:["","Links"],form:["","Form"],common:["","Common"],info:["","Info"]},panelBtn:{attach:["/","Attach/Detach"],settings:["","Settings"],hidden:["","Hidden"],favor:["","Favorites"],video:["-","Video links"],refresh:["","Refresh"],goback:["","Go back"],gonext:["","Next"],goup:["","To the top"],godown:[" ","To the bottom"],expimg:[" ","Expand images"],preimg:["  ([Ctrl+Click]    )","Preload images ([Ctrl+Click] for new posts only)"],maskimg:[" ","Mask images"],"upd-on":["  ","Disable thread autoupdate"],"upd-off":["  ","Enable thread autoupdate"],"audio-off":["    ","Sound notification about new posts"],catalog:["","Catalog"],counter:["/  ","Posts/Images in thread"],savethr:["  ","Save to disk"],enable:["/ ","Turn on/off the script"]},selHiderMenu:{sel:[" ","Hide selected text"],name:[" ","Hide name"],trip:[" -","Hide with trip-code"],img:[" ","Hide with image"],ihash:["  ","Hide similar images"],text:["  ","Hide similar text"],noimg:["  ","Hide without images"],notext:["  ","Hide without text"]},selExpandThr:[["5 ","15 ","30 ","50 ","100 "],["5 posts","15 posts","30 posts","50 posts","100 posts"]],selAjaxPages:[["1 ","2 ","3 ","4 ","5 "],["1 page","2 pages","3 pages","4 pages","5 pages"]],selSaveThr:[["  "," "],["Download thread","Download images"]],selAudioNotif:[[" 30 ."," "," 2 ."," 5 ."],["Every 30 sec.","Every minute","Every 2 min.","Every 5 min."]],hotKeyEdit:[["%l%i24   /%/l","%l%i217   /%/l","%l%i23    /%/l","%l%i33    %/l","%l%i22   %/l","%l%i25t   %/l","%l%i21   ( )/ ( ) %/l","%l%i20   ( )/ ( ) %/l","%l%i31   ( ) %/l","%l%i30   ( ) %/l","%l%i32   %/l","%l%i210  / %/l","%l%i26  / %/l","%l%i27  /  %/l","%l%i28  / %/l","%l%i29  /  %/l","%l%i40   %/l","%l%i211      %/l","%l%i212t  %/l","%l%i213t  %/l","%l%i214t  %/l","%l%i215t  %/l","%l%i216t  %/l"],["%l%i24  previous page/image%/l","%l%i217  next page/image%/l","%l%i23  hide current post/thread%/l","%l%i33  expand current thread%/l","%l%i22  quick reply%/l","%l%i25t  send post%/l","%l%i21  thread (on board)/post (in thread) below%/l","%l%i20  thread (on board)/post (in thread) above%/l","%l%i31  on board post below%/l","%l%i30  on board post above%/l","%l%i32  open thread%/l","%l%i210  open/close Settings%/l","%l%i26  open/close Favorites%/l","%l%i27  open/close Hidden Posts Table%/l","%l%i28  open/close the main panel%/l","%l%i29  turn on/off masking images%/l","%l%i40  update thread%/l","%l%i211  expand current post's images%/l","%l%i212t  bold%/l","%l%i213t  italic%/l","%l%i214t  strike%/l","%l%i215t  spoiler%/l","%l%i216t  code%/l"]],month:[["","","","","","","","","","","",""],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]],fullMonth:[["","","","","","","","","","","",""],["January","February","March","April","May","June","July","August","September","October","November","December"]],week:[["","","","","","",""],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]],editor:{cfg:[" :","Edit settings:"],hidden:["  :","Edit hidden threads:"],favor:[" :","Edit favorites:"],css:[" CSS","Edit CSS"]},newPost:[["  ","  ","  ",". :"],[" new post"," new posts"," new posts",". Latest: "]],name:["","Name"],subj:["","Subject"],mail:["E-mail","E-mail"],cap:["","Captcha"],video:["","Video"],add:["","Add"],apply:["","Apply"],clear:["","Clear"],refresh:["","Refresh"],load:["","Load"],save:["","Save"],edit:["","Edit"],reset:["","Reset"],remove:["","Remove"],info:["","Info"],undo:["","Undo"],change:["","Change"],reply:["","Reply"],loading:["...","Loading..."],checking:["...","Checking..."],deleting:["...","Deleting..."],error:["","Error"],noConnect:[" ","Connection failed"],internalError:[" :\n","Script error:\n"],thrNotFound:["  (","Thread is unavailable ("],succDeleted:[" !","Succesfully deleted!"],errDelete:["  :\n","Can't delete:\n"],cTimeError:["  ","Invalid time settings"],noGlobalCfg:["   ","Global config not found"],postNotFound:["  ","Post not found"],dontShow:[": ","Hide: "],checkNow:[" ","Check now"],updAvail:[" !","Update available!"],haveLatest:["     !","You have latest version!"],storage:[": ","Storage: "],thrViewed:[" : ","Threads viewed: "],thrCreated:[" : ","Threads created: "],thrHidden:[" : ","Threads hidden: "],postsSent:[" : ","Posts sent: "],total:["","Total"],debug:["","Debug"],infoDebug:["  ","Information for debugging"],loadGlobal:["  ","Load global settings"],saveGlobal:["   ","Save settings as global"],editInTxt:["   ","Edit in text format"],resetCfg:["    ","Reset settings to defaults"],conReset:["       . ?","This will delete all your preferences and favourites. Continue?"],clrSelected:["  ","Remove selected notes"],saveChanges:["  ","Save your changes"],infoCount:["  ","Refresh posts counters"],infoPage:["   ( 5 )","Check for threads actuality (up to 5 page)"],clrDeleted:["  (404) ","Clear inaccessible (404) threads"],oldPosts:["   ","Posts at the last visit"],newPosts:["  ","Number of new posts"],thrPage:["  @","Thread on @page"],findThrd:["/ ","Find/Load thread"],hiddenPosts:["   ","Hidden posts on the page"],hiddenThrds:[" ","Hidden threads"],noHidPosts:["     ...","No hidden posts on this page..."],noHidThrds:["  ...","No hidden threads..."],expandAll:[" ","Expand all"],invalidData:["  ","Incorrect data format"],favThrds:[" :","Favorite threads:"],noFavThrds:["  ...","Favorites is empty..."],noVideoLinks:["   ...","No video links..."],hideLnkList:["/  ","Hide/Unhide list of links"],prevVideo:[" ","Previous video"],nextVideo:[" ","Next video"],toggleQReply:["   / ","Move under post / Unattach"],closeQReply:[" ","Close form"],replies:[":","Replies:"],postsOmitted:[" : ","Posts omitted: "],collapseThrd:[" ","Collapse thread"],deleted:["","deleted"],getNewPosts:["  ","Get new posts"],page:["","Page"],hiddenThrd:[" :","Hidden thread:"],makeThrd:[" ","Create thread"],makeReply:["","Make reply"],noSage:[" ","No sage"],hideForm:[" ","Hide form"],search:["  ","Search in "],wait:["","Wait"],noFile:[" ","No file"],clickToAdd:[",   ","Select or drag and drop file"],removeFile:[" ","Remove file"],helpAddFile:[" .ogg, .rar, .zip  .7z  ","Pack .ogg, .rar, .zip or .7z into image"],downloadFile:["    ","Download existing file from image"],fileCorrupt:[" : ","File is corrupted: "],subjHasTrip:[' ""  ','"Subject" field contains a tripcode'],loadImage:[" : ","Loading images: "],loadFile:[" : ","Loading files: "],cantLoad:["   ","Can't load "],willSavePview:["  ","Thumbnail will be saved"],loadErrors:["    :","An error occurred during the loading:"],errCorruptData:[":    ","Error: server sent corrupted data"],expImgInline:["[Click]   , [Ctrl+Click]  ","[Click] expand in post, [Ctrl+Click] by center"],expImgFull:["[Click]   , [Ctrl+Click]  ","[Click] expand by center, [Ctrl+Click] in post"],nextImg:[" ","Next image"],prevImg:[" ","Previous image"],togglePost:["/ ","Hide/Unhide post"],replyToPost:["  ","Reply to post"],expandThrd:["  ","Expand all thread"],addFav:["   ","Add thread to Favorites"],delFav:["   ","Remove thread from Favorites"],attachPview:[" ","Attach preview"],expandVideo:["/ ","Expand/Collapse video"],author:[": ","author: "],views:[": ","views: "],published:[": ","published: "],seSyntaxErr:["    : %s","syntax error in argument of spell: %s"],seUnknown:[" : %s","unknown spell: %s"],seMissOp:[" ","missing operator"],seMissArg:["  : %s","missing argument of spell: %s"],seMissSpell:[" ","missing spell"],seErrRegex:["    : %s","syntax error in regular expression: %s"],seUnexpChar:[" : %s","unexpected character: %s"],seMissClBkt:["  ","missing ) in parenthetical"],seRepsInParens:[" $s     ","spell %s shouldn't be in parens"],seOpInReps:["   %s   #rep  #outrep","don't use operator %s with spells #rep & #outrep"],seRow:[" ( "," (row "],seCol:[",  ",", column "]},Cn=window.document,In=Array.prototype,Rn=2,Nn={preloading:!1,afterpreload:null,progressId:null,canvas:null},On="",Mn=Function.prototype.call.bind(In.forEach),jn=Function.prototype;ln=new function(){function e(){return t?t:void(t=this)}var t,i=[];return e.prototype={finish:function(){i.push(["LoggerFinish",Date.now()])},getData:function(e){var t,n,r,s=0,a=[];for(t=1,n=i.length-1;n>t;++t)r=i[t][1]-i[t-1][1]+s,e||r>1?(s=0,a.push([i[t][0],r])):s=r;return r=i[t][1]-i[0][1],a.push([Ln.total[pn],r]),a},getTable:function(){var e,t,i=this.getData(!1),n="<tbody>";for(e=0,t=i.length;t>e;++e)n+="<tr><td>"+i[e][0]+'</td><td style="text-align: right;">'+i[e][1]+"ms</td></tr>";return n+"</tbody>"},init:function(){i.push(["LoggerInit",Date.now()])},log:function(e){i.push([e,Date.now()])}},e},I.PauseError=function(e){this.name="TasksPool.PauseError",this.duration=e},I.pause=function(){var e=void 0===arguments[0]?-1:arguments[0];throw new I.PauseError(e)},I.prototype={complete:function(){this.stopped||(this.index>=this.length&&0===this.running?this.endFn():this.completed=!0)},"continue":function(){if(!this.stopped){if(this.paused=!1,this.index>=this.length)return void(this.completed&&this.endFn());for(;this.index<this.length&&this.running!==this.max;)this._run(this.array[this.index++]),this.running++}},pause:function(){this.paused=!0},run:function(e){this.stopped||(this.paused||this.running===this.max?(this.array.push(e),this.length++):(this._run(e),this.running++))},stop:function(){this.stopped=!0,this.endFn()},_end:function(){if(!this.stopped){if(!this.paused&&this.index<this.length)return void this._run(this.array[this.index++]);this.running--,!this.paused&&this.completed&&0===this.running&&this.endFn()}},_run:function(e){var t=this;Promise.resolve(this.func(this.num++,e)).then(function(){return t._end()},function(e){if(!(e instanceof I.PauseError))throw e;t.paused=!0,-1!==e.duration&&setTimeout(function(){return t["continue"]()},e.duration)})}},R.prototype={addFile:function(e,t){var i,n,r,s=t.length,a=new Uint8Array(512);for(i=0,r=Math.min(e.length,100);r>i;++i)a[i]=255&e.charCodeAt(i);for(this._padSet(a,100,"100777",8),this._padSet(a,108,"0",8),this._padSet(a,116,"0",8),this._padSet(a,124,s.toString(8),13),this._padSet(a,136,Math.floor(Date.now()/1e3).toString(8),12),this._padSet(a,148,"        ",8),a[156]=48,i=n=0;157>i;i++)n+=a[i];this._padSet(a,148,n.toString(8),8),this._data.push(a),this._data.push(t),0!==(i=512*Math.ceil(s/512)-s)&&this._data.push(new Uint8Array(i))},addString:function(e,t){var i,n,r,s=unescape(encodeURIComponent(t));for(i=0,n=s.length,r=new Uint8Array(n);n>i;++i)r[i]=255&s.charCodeAt(i);this.addFile(e,r)},get:function(){return this._data.push(new Uint8Array(1024)),new Blob(this._data,{type:"application/x-tar"})},_padSet:function(e,t,i,n){var r=0,s=i.length;for(n-=2;n>s;)e[t++]=32,n--;for(;s>r;)e[t++]=i.charCodeAt(r++);e[t]=32}},St.version=6,St.readKeys=regeneratorRuntime.mark(function Qn(){var e,t,i,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(An("DESU_keys"),"t13",1);case 1:if(i=r.t13){r.next=4;break}return r.abrupt("return",St.getDefaultKeys());case 4:r.prev=4,t=JSON.parse(i);case 6:if(r.prev=6,t){r.next=9;break}return r.abrupt("return",St.getDefaultKeys());case 9:if(t[0]!==St.version){switch(e=St.getDefaultKeys(),t[0]){case 1:t[2][11]=e[2][11],t[4]=e[4];case 2:t[2][12]=e[2][12],t[2][13]=e[2][13],t[2][14]=e[2][14],t[2][15]=e[2][15],t[2][16]=e[2][16];case 3:t[2][17]=t[3][3],t[3][3]=t[3].splice(4,1)[0];case 4:case 5:t[2][18]&&delete t[2][18]}t[0]=St.version,B("DESU_keys",JSON.stringify(t))}return t[1]^!!$i.Firefox&&(n=$i.Firefox?function(e){switch(e){case 189:return 173;case 187:return 61;case 186:return 59;default:return e}}:function(e){switch(e){case 173:return 189;case 61:return 187;case 59:return 186;default:return e}},t[1]=!!$i.Firefox,t[2]=t[2].map(n),t[3]=t[3].map(n),B("DESU_keys",JSON.stringify(t))),r.abrupt("return",t);case 13:case"end":return r.stop()}},Qn,this,[[4,,6,13]])}),St.getDefaultKeys=function(){var e=!!$i.Firefox,t=[75,74,82,72,4133,49165,16454,16456,80,66,16467,73,49218,49225,49236,49232,49219,4135],i=[77,78,86,69],n=[85];return[St.version,e,t,i,n]},St.prototype={cPost:null,enabled:!1,gKeys:null,lastPage:0,lastPageOffset:0,ntKeys:null,paused:!1,tKeys:null,clear:function(e){this.cPost=null,this.lastPage=e,this.lastPageOffset=0},disable:function(){this.enabled&&(this.cPost&&this.cPost.unselect(),Cn.removeEventListener("keydown",this,!0),this.enabled=!1)},enable:function(){this.enabled||(this.clear(nn),Cn.addEventListener("keydown",this,!0),this.enabled=!0)},handleEvent:function(e){if(!this.paused){var t,i,n,r,s,o=e.target.tagName,l=e.keyCode|(e.ctrlKey?4096:0)|(e.shiftKey?8192:0)|(e.altKey?16384:0)|("TEXTAREA"===o||"INPUT"===o&&"text"===e.target.type?32768:0);if(116===l||32884===l){if(tn||a("de-alert-load-pages"))return;fi.viewer&&(fi.viewer.close(null),fi.viewer=null),Fn(+Qi.loadPages)}else if(27===l){if(fi.viewer)return fi.viewer.close(null),void(fi.viewer=null);this.cPost&&(this.cPost.unselect(),this.cPost=null),tn&&un.firstThr.clearPostsMarks(),this.lastPageOffset=0}else if(32795===l)e.target.blur();else switch(r=this.gKeys.indexOf(l)){case 2:dn.form&&(i=this.cPost||this._getFirstVisPost(!1,!0)||un.firstThr.op,this.cPost=i,dn.showQuickReply(i,i.num,!0,!1),i.select());break;case 3:i=this._getFirstVisPost(!1,!0)||this._getNextVisPost(null,!0,!1),i&&(i.toggleUserVisib(),this._scroll(i,!1,i.isOp));break;case 4:fi.viewer?fi.viewer.navigate(!1):(tn||nn!==Zi.firstPage)&&(window.location.pathname=Zi.getPageUrl(en,tn?0:nn-1));break;case 5:if(e.target!==dn.txta&&e.target!==dn.cap)return;dn.subm.click();break;case 6:it("fav",!1);break;case 7:it("hid",!1);break;case 8:A(a("de-panel").lastChild);break;case 9:Q("maskImgs"),Bi();break;case 10:it("cfg",!1);break;case 11:i=this._getFirstVisPost(!1,!0)||this._getNextVisPost(null,!0,!1),i&&i.toggleImages(!i.imagesExpanded);break;case 12:if(e.target!==dn.txta)return;a("de-btn-bold").click();break;case 13:if(e.target!==dn.txta)return;a("de-btn-italic").click();break;case 14:if(e.target!==dn.txta)return;a("de-btn-strike").click();break;case 15:if(e.target!==dn.txta)return;a("de-btn-spoil").click();break;case 16:if(e.target!==dn.txta)return;a("de-btn-code").click();break;case 17:fi.viewer?fi.viewer.navigate(!0):tn||this.lastPage===Zi.lastPage||(window.location.pathname=Zi.getPageUrl(en,this.lastPage+1));
break;case-1:if(tn){if(s=this.tKeys.indexOf(l),0===s){Si.loadNewPosts(null);break}return}if(s=this.ntKeys.indexOf(l),-1===s)return;if(2===s){i=this._getFirstVisPost(!1,!0)||this._getNextVisPost(null,!0,!1),i&&($i.Firefox?GM_openInTab(Zi.getThrdUrl(en,i.tNum),!1,!0):window.open(Zi.getThrdUrl(en,i.tNum),"_blank"));break}if(3===s){i=this._getFirstVisPost(!1,!0)||this._getNextVisPost(null,!0,!1),i&&(i.thr.loadedOnce&&1===i.thr.op.next.count?(t=i.thr.nextNotHidden,i.thr.load(Rn,!!t),i=(t||i.thr).op):(i.thr.load(1,!1),i=i.thr.op),scrollTo(0,window.pageYOffset+i.topCoord),this.cPost&&this.cPost!==i&&(this.cPost.unselect(),this.cPost=i));break}default:n=!tn&&(0===r||1===r),this._scroll(this._getFirstVisPost(n,!1),0===r||0===s,n)}e.stopPropagation(),k(e)}},pause:function(){this.paused=!0},resume:function(e){this.gKeys=e[2],this.ntKeys=e[3],this.tKeys=e[4],this.paused=!1},_getFirstVisPost:function(e,t){var i,n;if(this.lastPageOffset!==window.pageYOffset){for(i=e?un.firstThr:un.firstThr.op;i.topCoord<1&&(n=i.next);)i=n;this.cPost&&this.cPost.unselect(),this.cPost=e?t?i.op:i.op.prev:t?i:i.prev,this.lastPageOffset=window.pageYOffset}return this.cPost},_getNextVisPost:function(e,t,i){var n;return t?(n=e?i?e.thr.prevNotHidden:e.thr.nextNotHidden:un.firstThr.hidden?un.firstThr.nextNotHidden:un.firstThr,n?n.op:null):e?e.getAdjacentVisPost(i):un.firstThr.hidden||un.firstThr.op.hidden?un.firstThr.op.getAdjacentVisPost(i):un.firstThr.op},_init:function(e){this.enabled=!0,this.lastPage=nn,this.gKeys=e[2],this.ntKeys=e[3],this.tKeys=e[4],Cn.addEventListener("keydown",this,!0)},_scroll:function(e,t,i){var n=this._getNextVisPost(e,i,t);return n?(e&&e.unselect(),i?n.el.scrollIntoView():scrollTo(0,window.pageYOffset+n.el.getBoundingClientRect().top-vi.sizing.wHeight/2+n.el.clientHeight/2),this.lastPageOffset=window.pageYOffset,n.select(),void(this.cPost=n)):void(!tn&&(t?nn>Zi.firstPage:this.lastPage<Zi.lastPage)&&(window.location.pathname=Zi.getPageUrl(en,t?nn-1:this.lastPage+1)))}},Lt.keyCodes=["",,,,,,,,"Backspace","Tab",,,,"Enter",,,"Shift","Ctrl","Alt",,,,,,,,,,,,,,"Space",,,,,"<","^",">","v",,,,,,,,"0","1","2","3","4","5","6","7","8","9",,";",,"=",,,,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z",,,,,,"Numpad 0","Numpad 1","Numpad 2","Numpad 3","Numpad 4","Numpad 5","Numpad 6","Numpad 7","Numpad 8","Numpad 9","Numpad *","Numpad +",,"Numpad -","Numpad .","Numpad /",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"-",,,,,,,,,,,,,";","=",",","-",".","/","`",,,,,,,,,,,,,,,,,,,,,,,,,,,"[","\\","]","'"],Lt.getStrKey=function(e){var t="";return 4096&e&&(t+="Ctrl+"),8192&e&&(t+="Shift+"),16384&e&&(t+="Alt+"),t+=Lt.keyCodes[4095&e]},Lt.getEditMarkup=function(e){var t=[],i=Ln.hotKeyEdit[pn].join("").replace(/%l/g,'<label class="de-block">').replace(/%\/l/g,"</label>").replace(/%i([2-4])([0-9]+)(t)?/g,function(e,t,i,n,r){var s=this[+i][+n];return e.push(s),'<input class="de-input-key" type="text" de-id1="'+i+'" de-id2="'+n+'" size="26" value="'+Lt.getStrKey(s)+(r?'" de-text':'"')+" readonly></input>"}.bind(e,t))+'<input type="button" id="de-keys-save" value="'+Ln.save[pn]+'"></input><input type="button" id="de-keys-reset" value="'+Ln.reset[pn]+'"></input>';return[t,i]},Lt.setTitle=function(e,t){var i=e.getAttribute("de-title");sn&&-1!==t&&(i+=" ["+Lt.getStrKey(sn.gKeys[t])+"]"),e.title=i},Lt.prototype=Object.defineProperties({cEl:null,cKey:-1,errorInput:!1,handleEvent:function(e){var t,i,n,o,l,d=e.target;switch(e.type){case"blur":return sn&&0===this.errCount&&sn.resume(this.keys),void(this.cEl=null);case"focus":return sn&&sn.pause(),void(this.cEl=d);case"click":if("de-keys-reset"===d.id){this.keys=St.getDefaultKeys(),this.initKeys=St.getDefaultKeys(),sn&&sn.resume(this.keys),l=Lt.getEditMarkup(this.keys),this.allKeys=l[0],s("de-alert-msg",this.aEl).innerHTML=l[1],this.allInputs=In.slice.call(r("de-input-key",this.aEl)),this.errCount=0,delete this.saveButton;break}if("de-keys-save"===d.id)n=this.keys,B("DESU_keys",JSON.stringify(n));else{if("de-alert-btn"!==d.className)return;n=this.initKeys}sn&&sn.resume(n),kt(a("de-alert-edit-hotkeys"));break;case"keydown":if(!this.cEl)return;if(t=e.keyCode,27===t||46===t){this.cEl.value="",this.cKey=0,this.errorInput=!1;break}if(i=Lt.keyCodes[t],void 0===i)return void(this.cKey=-1);o="",e.ctrlKey&&(o+="Ctrl+"),e.shiftKey&&(o+="Shift+"),e.altKey&&(o+="Alt+"),16===t||17===t||18===t?this.errorInput=!0:(this.cKey=t|(e.ctrlKey?4096:0)|(e.shiftKey?8192:0)|(e.altKey?16384:0)|(this.cEl.hasAttribute("de-text")?32768:0),this.errorInput=!1,o+=i),this.cEl.value=o;break;case"keyup":var u,c,h,p,f;if(d=this.cEl,t=this.cKey,!d||-1===t)return;if(f=d.classList.contains("de-error-key"),!this.errorInput&&-1!==t){if(u=this.allInputs.indexOf(d),h=this.allKeys[u],h===t){this.errorInput=!1;break}if(c=0===t?-1:this.allKeys.indexOf(t),this.allKeys[u]=t,f&&(u=this.allKeys.indexOf(h),-1!==u&&-1===this.allKeys.indexOf(h,u+1)&&(p=this.allInputs[u],p.classList.contains("de-error-key")&&(this.errCount--,p.classList.remove("de-error-key"))),-1===c&&(this.errCount--,d.classList.remove("de-error-key"))),-1===c){this.keys[+d.getAttribute("de-id1")][+d.getAttribute("de-id2")]=t,0===this.errCount&&(this.saveButton.disabled=!1),this.errorInput=!1;break}p=this.allInputs[c],p.classList.contains("de-error-key")||(this.errCount++,p.classList.add("de-error-key"))}f||(this.errCount++,d.classList.add("de-error-key")),0!==this.errCount&&(this.saveButton.disabled=!0)}k(e)}},{saveButton:{get:function(){var e=a("de-keys-save");return Object.defineProperty(this,"saveButton",{value:e,configurable:!0}),e},enumerable:!0,configurable:!0}}),Rt.prototype={run:function(e,t,i){this._queue.run([e,t,i])},_createWorker:function(e,t){var i=this;return new Promise(function(e){var n=i._freeWorkers.pop(),r=_slicedToArray(t,3),s=r[0],a=r[1],o=r[2];n.onmessage=function(t){o(t.data[1]),i._freeWorkers.push(n),e()},n.onerror=function(t){e(),i._freeWorkers.push(n),i._errFn(t)},n.postMessage(s,a)})},clear:function(){window.URL.revokeObjectURL(this._url),this._freeWorkers=[]}},qt.toggleSettings=function(e){!e.checked||/^[+-]\d{1,2}$/.test(Qi.timeOffset)&&!qt.checkPattern(Qi.timePattern)||(_t(Ln.cTimeError[pn],"err-correcttime",!1),z("correctTime",0),e.checked=!1)},qt.checkPattern=function(e){return!(e.contains("i")&&e.contains("h")&&e.contains("d")&&e.contains("y")&&(e.contains("n")||e.contains("m"))&&!/[^\?\-\+sihdmwny]|mm|ww|\?\?|([ihdny]\?)\1+/.test(e))},qt.prototype={getRPattern:function(e){var t=e.match(new RegExp(this.regex));if(!t)return this.disabled=!0,!1;this.rPattern="";for(var i=0,n=t[0],r=1,s=t.length;s>r;++r){var a=t[r],o=this.pattern[r-2];("m"===o||"y"===o)&&a.length>3&&(o=o.toUpperCase());var l=n.indexOf(a,i);this.rPattern+=n.substring(i,l)+"_"+o,i=l+a.length}return this.onRPat&&this.onRPat(this.rPattern),!0},pad2:function(e){return 10>e?"0"+e:e},fix:function(e){var t=this,i=arguments;return this.disabled||!this.rPattern&&!this.getRPattern(e)?e:e.replace(new RegExp(this.regex,"g"),function(){var e,n,r,s,a,o,l,d,u;for(e=1;8>e;e++)switch(n=i[e],t.pattern[e-1]){case"s":r=n;break;case"i":s=n;break;case"h":a=n;break;case"d":o=n;break;case"n":l=n-1;break;case"y":d=n;break;case"m":l=/^|^jan/i.test(n)?0:/^|^feb/i.test(n)?1:/^|^mar/i.test(n)?2:/^|^apr/i.test(n)?3:/^|^may/i.test(n)?4:/^|^jun/i.test(n)?5:/^|^jul/i.test(n)?6:/^|^aug/i.test(n)?7:/^|^sep/i.test(n)?8:/^|^oct/i.test(n)?9:/^|^nov/i.test(n)?10:/^|^dec/i.test(n)&&11}return u=new Date(2===d.length?"20"+d:d,l,o,a,s,r||0),u.setHours(u.getHours()+t.diff),t.rPattern.replace("_o",t.sDiff).replace("_s",t.pad2(u.getSeconds())).replace("_i",t.pad2(u.getMinutes())).replace("_h",t.pad2(u.getHours())).replace("_d",t.pad2(u.getDate())).replace("_w",t.arrW[u.getDay()]).replace("_n",t.pad2(u.getMonth()+1)).replace("_m",t.arrM[u.getMonth()]).replace("_M",t.arrFM[u.getMonth()]).replace("_y",(""+u.getFullYear()).substring(2)).replace("_Y",u.getFullYear())})}},Ut._global=Object.defineProperties({},{vData:{get:function(){var e=Qi.YTubeTitles?JSON.parse(zi["de-ytube-data"]||"{}"):{};return Object.defineProperty(this,"vData",{value:e}),e},enumerable:!0,configurable:!0}}),Ut.ytReg=/^https?:\/\/(?:www\.|m\.)?youtu(?:be\.com\/(?:watch\?.*?v=|v\/|embed\/)|\.be\/)([a-zA-Z0-9-_]+).*?(?:t(?:ime)?=(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s?)?)?$/,Ut.vimReg=/^https?:\/\/(?:www\.)?vimeo\.com\/(?:[^\?]+\?clip_id=|.*?\/)?(\d+).*?(#t=\d+)?$/,Ut._getTitleLoader=function(){return new I(4,E(regeneratorRuntime.mark(function e(t,i){var n,r,s,a,o,l,d,u,c,h,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t%30!==0){e.next=2;break}return e.abrupt("return",I.pause(3e3));case 2:return d=_slicedToArray(i,3),u=d[0],c=d[1],h=d[2],e.next=8,Dt(h);case 8:p=e.sent,e.prev=9,200===p.status&&(n=JSON.parse(p.responseText).entry,r=n.title.$t,s=n.author[0].name.$t,a=n.yt$statistics.viewCount,o=n.published.$t.substr(0,10));case 11:return e.prev=11,r&&(u.textContent=r,u.setAttribute("de-author",s),u.classList.add("de-video-title"),u.title=Ln.author[pn]+s+", "+Ln.views[pn]+a+", "+Ln.published[pn]+o,Ut._global.vData[h]=l=[r,s,a,o],c.vData.push(l),c.titleLoadFn&&c.titleLoadFn(l)),e.next=15,L(250);case 15:return e.finish(11);case 16:case"end":return e.stop()}},e,this,[[9,,11,16]])})),function(){zi["de-ytube-data"]=JSON.stringify(Ut._global.vData)})},Ut.addPlayer=function(e,t,i){var n,r,s=t[1],a=' width="'+Qi.YTubeWidth+'" height="'+Qi.YTubeHeigh+'">',o='<span class="de-video-resizer" title="'+Ln.expandVideo[pn]+'"></span>';i?(n=(t[2]?3600*t[2]:0)+(t[3]?60*t[3]:0)+(t[4]?+t[4]:0),r=t[0].match(/list=[^&#]+/),e.innerHTML='<iframe frameborder="0" allowfullscreen="1" src="'+Zi.prot+"//www.youtube.com/embed/"+s+"?"+("de-content-vid"===e.parentNode.id?"enablejsapi=1&":"")+(Qi.YTubeHD?"hd=1&":"")+(r?r[0]+"&":"")+"start="+n+(1===Qi.YTubeType?'&html5=1&rel=0" type="text/html"':'" type="application/x-shockwave-flash"')+a+"</iframe>"+o):(n=t[2]?t[2]:"",e.innerHTML=1===Qi.YTubeType?'<iframe src="'+Zi.prot+"//player.vimeo.com/video/"+s+n+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen'+a+"</iframe>"+o:'<embed type="application/x-shockwave-flash" src="'+Zi.prot+"//vimeo.com/moogaloop.swf?clip_id="+s+n+'&server=vimeo.com&color=00adef&fullscreen=1" allowscriptaccess="always" allowfullscreen="true"'+a+"</embed>"+o),e.lastChild.onclick=function(){var e=this.parentNode,t="de-video-obj"===e.className;e.className=t?"de-video-obj de-video-expanded":"de-video-obj","de-content-vid"===e.parentNode.id&&(e=e.nextSibling.nextSibling,e.style.maxWidth=(t?888:+Qi.YTubeWidth+40)+"px",e.style.maxHeight=Cn.documentElement.clientHeight-(t?590:+Qi.YTubeHeigh+110)+"px")}},Ut.parseLinks=function(e){var t,n,r,s=Qi.YTubeTitles&&Ut._getTitleLoader(),a=Zi.fixVideo(e);for(t=0,n=i('a[href*="youtu"]',e?e.el:un.el),r=n.length;r>t;++t){var o=n[t],l=o.href.match(Ut.ytReg);if(l){var d=e||(Zi.getPostEl(o)||{}).post;d&&d.videos.addLink(l,s,o,!0)}}if(Qi.addVimeo)for(t=0,n=i('a[href*="vimeo.com"]',e?e.el:un.el),r=n.length;r>t;++t){var o=n[t],l=o.href.match(Ut.vimReg);if(l){var d=e||(Zi.getPostEl(o)||{}).post;d&&d.videos.addLink(l,null,o,!1)}}for(t=0,r=a.length;r>t;++t){var u=_slicedToArray(a[t],3),c=u[0],l=u[1],h=u[2];c&&c.videos.addLink(l,s,null,h)}s&&s.complete()},Ut.prototype=Object.defineProperties({currentLink:null,hasLinks:!1,playerInfo:null,titleLoadFn:null,ytLinksCount:0,addLink:function(e,t,i,r){var s,a,o;if(this.hasLinks=!0,r&&this.ytLinksCount++,null===this.playerInfo)2===Qi.addYouTube?this.addPlayer(e,r):Qi.addYouTube>2&&this._addThumb(e,r);else if(!i&&n('.de-video-link[href*="'+e[1]+'"]',this.post.msg))return;t&&(o=Ut._global.vData[e[1]])&&this.vData.push(o),(e[4]||e[3]||e[2])&&(e[4]>=60&&(e[3]=(e[3]||0)+Math.floor(e[4]/60),e[4]%=60),e[3]>=60&&(e[2]=(e[2]||0)+Math.floor(e[3]/60),e[3]%=60),a=(e[2]?e[2]+"h":"")+(e[3]?e[3]+"m":"")+(e[4]?e[4]+"s":"")),i?(i.href=i.href.replace(/^http:/,"https:"),a&&i.setAttribute("de-time",a),o?(i.textContent=o[0],i.className="de-video-link de-ytube de-video-title",i.setAttribute("de-author",o[1]),i.title=Ln.author[pn]+o[1]+", "+Ln.views[pn]+o[2]+", "+Ln.published[pn]+o[3]):(i.className="de-video-link "+(r?"de-ytube":"de-vimeo"),!r&&Qi.YTubeTitles&&Bt(i,e))):(s=r?Zi.prot+"//www.youtube.com/watch?v="+e[1]+(a?"#t="+a:""):Zi.prot+"//vimeo.com/"+e[1],post.msg.insertAdjacentHTML("beforeend",'<p class="de-video-ext"><a class="de-video-link '+(r?"de-ytube":"de-vimeo")+(o?' de-video-title" title="'+Ln.author[pn]+o[1]+", "+Ln.views[pn]+o[2]+", "+Ln.published[pn]+o[3]+'" de-author="'+o[1]:"")+(a?'" de-time="'+a:"")+'" href="'+s+'">'+(o?o[0]:s)+"</a></p>"),i=post.msg.lastChild.firstChild),(null===this.playerInfo||this.playerInfo===e)&&(this.currentLink=i),i.videoInfo=e,t&&!o&&t.run([i,this,e[1]])},addPlayer:function(e,t){this.playerInfo=e,Ut.addPlayer(this.player,e,t)},clickLink:function(e,t){var i=e.videoInfo;this.playerInfo===i?3===t?s("de-video-thumb",this.player)?(e.classList.add("de-current"),this.addPlayer(i,e.classList.contains("de-ytube"))):(e.classList.remove("de-current"),this._addThumb(i,e.classList.contains("de-ytube"))):(e.classList.remove("de-current"),this.player.innerHTML="",this.playerInfo=null):t>2?(this.currentLink.classList.remove("de-current"),this.currentLink=e,this._addThumb(i,e.classList.contains("de-ytube"))):(this.currentLink.classList.remove("de-current"),this.currentLink=e,e.classList.add("de-current"),this.addPlayer(i,e.classList.contains("de-ytube")))},updatePost:function(e,t,i){for(var n=!i&&loadTitles&&this._getTitleLoader(),r=0,s=0,a=t.length;a>r;++r){var o=t[r],l=e[s];if(l&&l.classList.contains("de-current")&&(this.currentLink=o),i)o.videoInfo=l.videoInfo,s++;else{var d=o.href.match(Ut.ytReg);d&&(this.addLink(d,n,o,!0),s++)}}this.currentLink=this.currentLink||t[0],n&&n.complete()},_addThumb:function(e,t){var i=this.player,n=' width="'+Qi.YTubeWidth+'" height="'+Qi.YTubeHeigh+'"></a>';this.playerInfo=e,t?i.innerHTML='<a href="'+Zi.prot+"//www.youtube.com/watch?v="+e[1]+'" target="_blank"><img class="de-video-thumb de-ytube" src="https://i.ytimg.com/vi/'+e[1]+'/0.jpg"'+n:(i.innerHTML='<a href="'+Zi.prot+"//vimeo.com/"+e[1]+'" target="_blank"><img class="de-video-thumb de-vimeo" src=""'+n,GM_xmlhttpRequest({method:"GET",url:Zi.prot+"//vimeo.com/api/v2/video/"+e[1]+".json",onload:function(e){i.firstChild.firstChild.setAttribute("src",JSON.parse(e.responseText)[0].thumbnail_large)}}))}},{player:{get:function(){var e=Zi.insertYtPlayer(this.post.msg,'<div class="de-video-obj"></div>');return Object.defineProperty(this,"player",{value:e}),e},enumerable:!0,configurable:!0}}),zt.Success=Object.freeze(new zt(200,""));var Fn=E(regeneratorRuntime.mark(function Vn(e){var t,n,r,s,o;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=[],n=!1,_t(Ln.loading[pn],"load-pages",!0),wi.clearCache(),gn=!1,Wi=Object.create(null),vi.hiddenNums=[],fi.viewer&&(fi.viewer.close(null),fi.viewer=null),un.hide(),un.clear(),dn.isQuick&&(dn.file&&dn.delFilesUtils(),dn.txta.value=""),r=nn,s=Math.min(Zi.lastPage+1,nn+e);case 11:if(!(s>r)){l.next=36;break}return o=void 0,l.prev=13,l.next=16,Qt(Zi.getPageUrl(en,nn));case 16:l.t15=l.sent,o=Oi(l.t15),l.next=23;break;case 20:l.prev=20,l.t16=l["catch"](13),o=h('<div><center style="font-size: 2em">'+j(l.t16)+"</center><hr></div>");case 23:r!=nn&&un.el.insertAdjacentHTML("beforeend",'<center style="font-size: 2em">'+Ln.page[pn]+" "+r+"</center><hr>"),l.prev=24,un.addFormContent(o,!0),l.next=33;break;case 28:return l.prev=28,l.t17=l["catch"](24),_t(F(l.t17),"load-pages",!0),n=!0,l.abrupt("break",36);case 33:++r,l.next=11;break;case 36:if(n){l.next=44;break}return un.initAjax(),Ui(!1),l.delegateYield(kn(),"t18",40);case 40:return l.delegateYield(_n(),"t19",41);case 41:Mn(i('input[type="password"]',un.el),function(e){dn.dpass=e,e.value=Qi.passwValue}),sn&&sn.clear(nn+e-1),kt(a("de-alert-load-pages"));case 44:un.show();case 45:case"end":return l.stop()}},Vn,this,[[13,20],[24,28]])}));Jt.names=["words","exp","exph","imgn","ihash","subj","name","trip","img","sage","op","tlen","all","video","wipe","num","vauthor"],Jt.needArg=[!0,!0,!0,!0,!0,!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0],Jt.decompileSpell=function(e,t,i,n){var r=(t?"!#":"#")+Jt.names[e]+(n?"["+n[0]+(n[1]?","+(-1===n[1]?"":n[1]):"")+"]":"");if(!i)return r;if(8===e)return r+"("+(2===i[0]?">":1===i[0]?"<":"=")+(i[1]?i[1][0]+(i[1][1]===i[1][0]?"":"-"+i[1][1]):"")+(i[2]?"@"+i[2][0]+(i[2][0]===i[2][1]?"":"-"+i[2][1])+"x"+i[2][2]+(i[2][2]===i[2][3]?"":"-"+i[2][3]):"")+")";if(14===e){if(63===i)return r;var s=[],a={1:"samelines",2:"samewords",4:"longwords",8:"symbols",16:"capslock",32:"numbers",64:"whitespace"};for(var o in a)i&+o&&s.push(a[o]);return r+"("+temp.join(",")+")"}if(15===e||11===e){var l=void 0,d=i[1].length-1;if(-1!==d){for(l=[];d>=0;--d)l.push(i[1][d][0]+"-"+i[1][d][1]);l.reverse()}return r+="(",0!==i[0].length&&(r+=i[0].join(",")+(l?",":"")),l&&(r+=l.join(",")),r+")"}return 0===e||6===e||7===e||16===e?r+"("+i.replace(/\)/g,"\\)")+")":r+"("+String(i)+")"},Jt.prototype=Object.defineProperties({_optimizeSpells:function(e){var t,i,n,r,s,a,o,l,d,u=-1,c=[];for(t=0,n=e.length;n>t;++t){if(a=e[t],r=a[0],s=255&r,l=0!==(256&r),255===s){if(d=this._optimizeSpells(a[1])){if(1!==d.length){c.push([r,d]),u++;continue}if(12!==(255&d[0][0])){c.push([(d[0][0]|512&r)^256&r,d[0][1]]),u++;continue}r=d[0][0],l=!(l^0!==(256&r))}}else if(o=a[2],!o||o[0]===en&&(-1===o[1]?!tn:!o[1]||o[1]===tn)){if(12!==s){c.push([r,a[1]]),u++;continue}l=!l}for(i=u;i>=0&&0!==(512&c[i][0])^l;--i);if(i!==u&&(c=c.slice(0,i+1),u=i),l&&-1!==i&&(c[i][0]&=511),0!==(512&r)^l)break}return-1===u?l?[[12,""]]:null:c},_initSpells:function(e){return e&&e.forEach(function t(e){var i=e[1];if(i)switch(255&e[0]){case 1:case 2:case 3:case 5:case 13:e[1]=H(i,!0);break;case 255:i.forEach(t)}}),e},_decompileScope:function(e,t){for(var i,n,r,s,a=[],o=!1,l=0,d=0,u=e.length;u>l;l++,d++)i=e[l],n=255&i[0],255===n?(o=!0,r=this._decompileScope(i[1],t+"    "),r[1]?(s=(256&i[0]?"!(\n":"(\n")+t+"    "+r[0].join("\n"+t+"    ")+"\n"+t+")",0===d?a[0]=s:a[--d]+=" "+s):a[d]=(256&i[0]?"!(":"(")+r[0].join(" ")+")"):a[d]=Jt.decompileSpell(n,256&i[0],i[1],i[2]),l!==u-1&&(a[d]+=512&i[0]?" &":" |");return[a,a.length>2||o]},_decompileSpells:function(){var e,t,i,n=this,r=this._data;return r||(this._read(!1),r=this._data)?(e=r[1]?this._decompileScope(r[1],"")[0].join("\n"):"",t=r[2],i=r[3],(t||i)&&(e&&(e+="\n\n"),t&&t.forEach(function(t){e+=n._decompileRep(t,!1)+"\n"}),t&&i.forEach(function(t){e+=n._decompileRep(t,!0)+"\n"}),e=e.substr(0,e.length-1)),this._data=null,this._list=e):this._list=""},_decompileRep:function(e,t){return(t?"#outrep":"#rep")+(e[0]?"["+e[0]+(e[1]?","+(-1===e[1]?"":e[1]):"")+"]":"")+"("+e[2]+","+e[3].replace(/\)/g,"\\)")+")"},_optimizeReps:function(e){if(e){var t=[];return e.forEach(function(e){e[0]&&(e[0]!==en||(-1===e[1]?tn:e[1]&&e[1]!==tn))||t.push([e[2],e[3]])}),0===t.length?!1:t}return!1},_initReps:function(e){if(e)for(var t=e.length-1;t>=0;t--)e[t][0]=H(e[t][0],!1);return e},_init:function(e,t,i){this._spells=this._initSpells(e),this._sLength=e&&e.length,this._reps=this._initReps(t),this._outreps=this._initReps(i),this.enable=!!this._spells,this.haveReps=!!t,this.haveOutreps=!!i},_read:function(e){var t,i;try{t=JSON.parse(Qi.spells),i=JSON.parse(zi["de-spells-"+en+(tn||"")])}catch(n){}return i&&t&&i[0]===t[0]?(this._data=t,void(e&&(this.hash=i[0],this._init(i[1],i[2],i[3])))):(t||(t=this.parseText("#wipe(samelines,samewords,longwords,symbols,numbers,whitespace)")),void(e?this.update(t,!1,!1):this._data=t))},_asyncSpellComplete:function(e){this.hasNumSpell|=e.hasNumSpell,this._asyncJobs--,this.end(null)},_asyncJobs:0,_completeFns:[],_hasComplFns:!1,_data:null,_list:"",hash:0,hasNumSpell:!1,enable:!1,addCompleteFunc:function(e){this._completeFns.push(e),this._hasComplFns=!0},parseText:function(e){var t=new Kt(e),i=t.generate();if(t.hasError)_t(Ln.error[pn]+": "+t.error,"help-err-spell",!1);else if(i)return i[0]&&Qi.sortSpells&&this.sort(i[0]),[Date.now(),i[0],i[1],i[2]];return null},sort:function(e){for(var t=0,i=e.length-1;i>t;t++)if(e[t][0]>512){var n=[255,[]];do n[1].push(e.splice(t,1)[0]),i--;while(e[t][0]>512);n[1].push(e.splice(t,1)[0]),e.splice(t,0,n)}e=e.sort();for(var t=0,r=e.length-1;r>t;t++)e[t][0]===e[t+1][0]&&e[t][1]<=e[t+1][1]&&e[t][1]>=e[t+1][1]&&(null===e[t][2]||void 0===e[t][2]||e[t][2]<=e[t+1][2]&&e[t][2]>=e[t+1][2])?(e.splice(t+1,1),t--,r--):255===e[t][0]&&(e.push(e.splice(t,1)[0]),t--,r--)},update:function(e,t,i){var n=e[1]?this._optimizeSpells(e[1]):!1,r=this._optimizeReps(e[2]),s=this._optimizeReps(e[3]);z("spells",JSON.stringify(e)),zi["de-spells-"+en+(tn||"")]=JSON.stringify([e[0],n,r,s]),this._data=e,this._list="",this.hash=e[0],t&&(Yi["__de-spells"]=JSON.stringify({hide:!!this.list&&!!i,data:e}),Yi.removeItem("__de-spells")),this._init(n,r,s)},setSpells:function(e,t){if(this.update(e,t,Qi.hideBySpell),Qi.hideBySpell){for(var i=un.firstThr.op;i;i=i.next)this.check(i);this.end(W)}else this.enable=!1},disable:function(){this.enable=!1,this._list="",this._data=null,this.haveReps=this.haveOutreps=!1,z("hideBySpell",!1)},end:function(e){if(0===this._asyncJobs){if(e&&e(),this._hasComplFns){for(var t=0,i=this._completeFns.length;i>t;++t)this._completeFns[t]();this._completeFns=[],this._hasComplFns=!1}}else e&&this.addCompleteFunc(e)},check:function(e){if(!this.enable)return 0;var t=new Xt(e,this._spells,this._sLength);return t.run()?(this.hasNumSpell|=t.hasNumSpell,t.postHidden?1:0):(t.setEndFn(this._asyncSpellComplete.bind(this)),this._asyncJobs++,0)},replace:function(e){for(var t=0,i=this._reps.length;i>t;t++)e=e.replace(this._reps[t][0],this._reps[t][1]);return e},outReplace:function(e){for(var t=0,i=this._outreps.length;i>t;t++)e=e.replace(this._outreps[t][0],this._outreps[t][1]);return e},addSpell:function(e,t,i,n,r){r||(this._data||this._read(!1),r=this._data||[Date.now(),[],!1,!1]);var s,a=String(i),o=String(t);r[1]?r[1].some(i&&n?function(t,i){var n;return 255===t[0]&&(n=t[1])instanceof Array&&2===n.length&&524===n[0][0]&&n[1][0]===e&&null==n[1][2]&&String(n[1][1])===o&&String(n[0][2])===a?(s=i,!0):0!==(512&t[0])}:function(t,i){return t[0]===e&&String(t[1])===o&&String(t[2])===a?(s=i,!0):0!==(512&t[0])}):r[1]=[],"undefined"!=typeof s?r[1].splice(s,1):i&&n?r[1].splice(0,0,[255,[[524,"",i],[e,t,void 0]],void 0]):r[1].splice(0,0,[e,t,i]),this.update(r,!0,!0),s=null}},{list:{get:function(){return this._list||this._decompileSpells()},enumerable:!0,configurable:!0}}),Kt.prototype=Object.defineProperties({TYPE_UNKNOWN:0,TYPE_ANDOR:1,TYPE_NOT:2,TYPE_SPELL:3,TYPE_PARENTHESES:4,TYPE_REPLACER:5,generate:function(){return this._sList?this._generate(this._sList,!1):null},_errMsg:"",_errMsgArg:null,_generate:function(e,t){for(var i,n,r=0,s=e.length,a=[],o=[],l=[],d=this.TYPE_UNKNOWN,u=!1;s>r;r++,this._col++)switch(e[r]){case"\n":this._line++,this._col=0;case"\r":case" ":continue;case"#":for(n="",r++,this._col++;e[r]>="a"&&e[r]<="z"||e[r]>="A"&&e[r]<="Z";)n+=e[r].toLowerCase(),r++,this._col++;if("rep"===n||"outrep"===n){if(!u){if(t)return this._col-=1+n.length,this._setError(Ln.seRepsInParens[pn],"#"+n),null;if(d===this.TYPE_ANDOR||d===this.TYPE_NOT){r-=1+n.length,this._col-=1+n.length;e:for(;r>=0;)switch(e[r]){case"\n":case"\r":case" ":r--,this._col--;break;default:break e}return this._setError(Ln.seOpInReps[pn],e[r]),null}u=!0}if(i=this._doRep(n,e.substr(r)),!i)return null;"rep"===n?o.push(i[1]):l.push(i[1]),r+=i[0]-1,this._col+=i[0]-1,d=this.TYPE_REPLACER}else{if(d===this.TYPE_SPELL||d===this.TYPE_PARENTHESES)return this._setError(Ln.seMissOp[pn],null),null;if(i=this._doSpell(n,e.substr(r),d===this.TYPE_NOT),!i)return null;r+=i[0]-1,this._col+=i[0]-1,a.push(i[1]),d=this.TYPE_SPELL}break;case"(":if(u)return this._setError(Ln.seUnexpChar[pn],"("),null;if(d===this.TYPE_SPELL||d===this.TYPE_PARENTHESES)return this._setError(Ln.seMissOp[pn],null),null;if(i=this._generate(e.substr(r+1),!0),!i)return null;r+=i[0]+1,a.push([d===this.TYPE_NOT?511:255,i[1]]),d=this.TYPE_PARENTHESES;break;case"|":case"&":if(u)return this._setError(Ln.seUnexpChar[pn],e[r]),null;if(d!==this.TYPE_SPELL&&d!==this.TYPE_PARENTHESES)return this._setError(Ln.seMissSpell[pn],null),null;"&"===e[r]&&(a[a.length-1][0]|=512),d=this.TYPE_ANDOR;break;case"!":if(u)return this._setError(Ln.seUnexpChar[pn],"!"),null;if(d!==this.TYPE_ANDOR&&d!==this.TYPE_UNKNOWN)return this._setError(Ln.seMissOp[pn],null),null;d=this.TYPE_NOT;break;case")":if(u)return this._setError(Ln.seUnexpChar[pn],")"),null;if(d===this.TYPE_ANDOR||d===this.TYPE_NOT)return this._setError(Ln.seMissSpell[pn],null),null;if(t)return[r,a];default:return this._setError(Ln.seUnexpChar[pn],e[r]),null}return t?(this._setError(Ln.seMissClBkt[pn],null),null):d!==this.TYPE_SPELL&&d!==this.TYPE_PARENTHESES&&d!==this.TYPE_REPLACER?(this._setError(Ln.seMissSpell[pn],null),null):(0===o.length&&(o=!1),0===l.length&&(l=!1),[a,o,l])},_getScope:function(e){var t=e.match(/^\[([a-z0-9\/]+)(?:(,)|,(\s*[0-9]+))?\]/);return t?[t[0].length,[t[1],t[3]?t[3]:t[2]?-1:!1]]:null},_getRegex:function(e,t){var i,n=e.match(/^\((\/.*?[^\\]\/[igm]*)(?:\)|\s*(,))/);if(n){if(t!==!!n[2])return null;i=n[1];try{H(i,!0)}catch(r){return this._setError(Ln.seErrRegex[pn],i),null}return[n[0].length,i]}return null},_getText:function(e,t){var i=e.match(/^(\()?(.*?[^\\])\)/);return i?t!==!!i[1]?null:[i[0].length,i[2].replace(/\\\)/g,")")]:null},_doRep:function(e,t){var i,n,r=this._getScope(t);if(r?t=t.substring(r[0]):r=[0,["",""]],i=this._getRegex(t,!0)){if(t=t.substring(i[0]),")"===t[0])return[i[0]+r[0]+1,[r[1][0],r[1][1],i[1],""]];if(n=this._getText(t,!1))return[n[0]+i[0]+r[0],[r[1][0],r[1][1],i[1],n[1]]]}return this._setError(Ln.seSyntaxErr[pn],e),null},_doSpell:function(e,t,i){var n,r,s,a,o=0,l=null,d=Jt.names.indexOf(e);if(-1===d)return this._setError(Ln.seUnknown[pn],e),null;if(a=this._getScope(t),a&&(o+=a[0],t=t.substring(a[0]),l=a[1]),r=i?256|d:d,"("!==t[0]||")"===t[1])return Jt.needArg[d]?(this._setError(Ln.seMissArg[pn],e),null):["("===t[0]?o+2:o,[r,14===d?63:"",l]];switch(d){case 4:if(n=t.match(/^\((\d+)\)/),+n[1]===+n[1])return[o+n[0].length,[r,+n[1],l]];break;case 8:if(n=t.match(/^\(([><=])(?:(\d+(?:\.\d+)?)(?:-(\d+(?:\.\d+)?))?)?(?:@(\d+)(?:-(\d+))?x(\d+)(?:-(\d+))?)?\)/),n&&(n[2]||n[4]))return[o+n[0].length,[r,["="===n[1]?0:"<"===n[1]?1:2,n[2]&&[+n[2],n[3]?+n[3]:+n[2]],n[4]&&[+n[4],n[5]?+n[5]:+n[4],+n[6],n[7]?+n[7]:+n[6]]],l]];break;case 14:if(n=t.match(/^\(([a-z, ]+)\)/),n&&(s=n[1].split(/, */).reduce(function(e,t){switch(t){case"samelines":return e|=1;case"samewords":return e|=2;case"longwords":return e|=4;case"symbols":return e|=8;case"capslock":return e|=16;case"numbers":return e|=32;case"whitespace":return e|=64;default:return-1}},0),-1!==s))return[o+n[0].length,[r,s,l]];break;case 11:case 15:if(n=t.match(/^\(([\d-, ]+)\)/))return n[1].split(/, */).forEach(function(e){if(e.contains("-")){var t=e.split("-");t[0]=+t[0],t[1]=+t[1],this[1].push(t)}else this[0].push(+e)},s=[[],[]]),[o+n[0].length,[r,s,l]];break;case 1:case 2:case 3:case 5:case 13:if(a=this._getRegex(t,!1))return[o+a[0],[r,a[1],l]];break;default:if(a=this._getText(t,!0))return[o+a[0],[r,0===d?a[1].toLowerCase():a[1],l]]}return this._setError(Ln.seSyntaxErr[pn],e),null},_setError:function(e,t){this.hasError=!0,this._errMsg=e,this._errMsgArg=t}},{error:{get:function(){return this.hasError?(this._errMsgArg?this._errMsg.replace("%s",this._errMsgArg):this._errMsg)+Ln.seRow[pn]+this._line+Ln.seCol[pn]+this._col+")":""},enumerable:!0,configurable:!0}}),Xt.prototype={hasNumSpell:!1,postHidden:!1,run:function(){for(var e,t,i,n=this._ctx.pop(),r=this._ctx.pop(),s=this._ctx.pop();;){if(s>n){if(t=255&r[n][0],255===t){this._deep++,this._ctx.push(s,r,n),r=r[n][1],s=r.length,n=0;continue}if(i=this._runSpell(t,r[n][1]),i instanceof Promise)return i.then(this._asyncContinue),this._ctx.push(s,r,n,r[n][0]),!1;if(e=this._checkRes(r[n][0],i),null===e){n++;continue}this._lastSpellIdx=n}else this._lastSpellIdx=n-=1,e=!1;{if(0===this._deep||(this._deep--,n=this._ctx.pop(),r=this._ctx.pop(),s=this._ctx.pop(),e=this._checkRes(r[n][0],e),null!==e))return e?(this._post.spellHide(this._getMsg(r[n])),this.postHidden=!0):this._post.deleted||(Ji[this._post.count]=1),!0;n++}}},setEndFn:function(e){this._endFn=e},_endFn:null,_lastSpellIdx:0,_wipeMsg:"",_asyncContinue:function(e){var t,i=this._checkRes(this._ctx.pop(),e);if(null===i){if(!this.run())return}else i?(t=this._ctx.pop(),this._post.spellHide(this._getMsg(this._ctx.pop()[t-1])),this.postHidden=!0):this._post.deleted||(Ji[this._post.count]=1);this._endFn&&this._endFn(this)},_checkRes:function(e,t){if(0!==(256&e)&&(t=!t),0!==(512&e)){if(!t)return!1}else if(t)return!0;return null},_getMsg:function(e){var t=256&e[0],i=255&e[0],n=e[1];return 255===i?this._getMsg(n[this._lastSpellIdx]):14===i?(t?"!#wipe":"#wipe")+(this._wipeMsg?": "+this._wipeMsg:""):Jt.decompileSpell(i,t,n,e[2])},_runSpell:function(e,t){switch(e){case 0:return this._words(t);case 1:return this._exp(t);case 2:return this._exph(t);case 3:return this._imgn(t);case 4:return this._ihash(t);case 5:return this._subj(t);case 6:return this._name(t);case 7:return this._trip(t);case 8:return this._img(t);case 9:return this._sage(t);case 10:return this._op(t);case 11:return this._tlen(t);case 12:return this._all(t);case 13:return this._video(t);case 14:return this._wipe(t);case 15:return this.hasNumSpell=!0,this._num(t);case 16:return this._vauthor(t)}},_words:function(e){return this._post.text.toLowerCase().contains(e)||this._post.subj.toLowerCase().contains(e)},_exp:function(e){return e.test(this._post.text)},_exph:function(e){return e.test(this._post.html)},_imgn:function(e){for(var t,i=this._post.images[Symbol.iterator]();!(t=i.next()).done;){var n=t.value;if(e.test(n.info))return!0}return!1},_ihash:E(regeneratorRuntime.mark(function Gn(){var e,t,i,n,r=this;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=r._post.images[Symbol.iterator]();case 1:if((t=e.next()).done){s.next=15;break}if(i=t.value,null===i.hash){s.next=7;break}s.t20=i.hash,s.next=10;break;case 7:return s.next=9,i.getHash();case 9:s.t20=s.sent;case 10:if(n=s.t20,n!==val){s.next=13;break}return s.abrupt("return",!0);case 13:s.next=1;break;case 15:return s.abrupt("return",!1);case 16:case"end":return s.stop()}},Gn,this)})),_subj:function(e){var t=this._post.subj;return t?!e||e.test(t):!1},_name:function(e){var t=this._post.posterName;return t?!e||t.contains(e):!1},_trip:function(e){var t=this._post.posterTrip;return t?!e||t.contains(e):!1},_img:function(e){var t,i=this._post.images,n=_slicedToArray(e,3),r=n[0],s=n[1],a=n[2];if(!e)return i.contains;for(var o,l=i[Symbol.iterator]();!(o=l.next()).done;){var d=o.value;if(s){var u=d.weight;switch(r){case 0:t=u>=s[0]&&u<=s[1];break;case 1:t=u<s[0];break;case 2:t=u>s[0]}if(!t)continue;if(!a)return!0}if(a){var u=d.width,c=d.height;switch(r){case 0:if(u>=a[0]&&u<=a[1]&&c>=a[2]&&c<=a[3])return!0;break;case 1:if(u<a[0]&&c<a[3])return!0;break;case 2:if(u>a[0]&&c>a[3])return!0}}}return!1},_sage:function(){return this._post.sage},_op:function(){return this._post.isOp},_tlen:function(e){var t=this._post.text;return e?this._tlenNum_helper(e,t.replace(/\n/g,"").length):!!t},_all:function(){return!0},_video:function(e){return this._videoVauthor(e,!1)},_wipe:function(e){var t,i,n,r,s,a,o,l,d,u,c,h=this._post.text;if(1&e&&(t=h.replace(/>/g,"").split(/\s*\n\s*/),(i=t.length)>5))for(t.sort(),n=0,s=i/4;i>n;){for(a=t[n],r=0;t[n++]===a;)r++;if(r>4&&r>s&&a)return this._wipeMsg='same lines: "'+a.substr(0,20)+'" x'+(r+1),!0}if(2&e&&(t=h.replace(/[\s\.\?\!,>]+/g," ").toUpperCase().split(" "),(i=t.length)>3)){for(t.sort(),n=0,s=i/4,o=0,l=0;i>n;o++){for(a=t[n],r=0;t[n++]===a;)r++;if(i>25&&(r>l&&a.length>2&&(l=r),l>=s))return this._wipeMsg='same words: "'+a.substr(0,20)+'" x'+(l+1),!0}if(a=o/i,.25>a)return this._wipeMsg="uniq words: "+(100*a).toFixed(0)+"%",!0}if(4&e&&(t=h.replace(/https*:\/\/.*?(\s|$)/g,"").replace(/[\s\.\?!,>:;-]+/g," ").split(" "),t[0].length>50||(i=t.length)>1&&t.join("").length/i>10))return this._wipeMsg="long words",!0;
if(8&e&&(c=h.replace(/\s+/g,""),(i=c.length)>30&&(a=c.replace(/[0-9a-z-\.\?!,]/gi,"").length/i)>.4))return this._wipeMsg="specsymbols: "+(100*a).toFixed(0)+"%",!0;if(16&e&&(t=h.replace(/[\s\.\?!;,-]+/g," ").trim().split(" "),(i=t.length)>4)){for(n=0,s=0,d=0,u=0;i>n;n++)a=t[n],(a.match(/[a-z-]/gi)||[]).length<5||((a.match(/[A-Z-]/g)||[]).length>2&&u++,a===a.toUpperCase()&&d++,s++);if(d/s>=.3&&s>4)return this._wipeMsg="CAPSLOCK: "+d/t.length*100+"%",!0;if(u/s>=.3&&s>8)return this._wipeMsg="cAsE words: "+u/t.length*100+"%",!0}return 32&e&&(c=h.replace(/\s+/g," ").replace(/>>\d+|https*:\/\/.*?(?: |$)/g,""),(i=c.length)>30&&(a=(i-c.replace(/\d/g,"").length)/i)>.4)?(this._wipeMsg="numbers: "+Math.round(100*a)+"%",!0):64&e&&/(?:\n\s*){5}/i.test(h)?(this._wipeMsg="whitespace",!0):!1},_num:function(e){return this._tlenNum_helper(e,this._post.count+1)},_tlenNum_helper:function(e,t){var i,n;for(n=e[0],i=n.length-1;i>=0;--i)if(n[i]===t)return!0;for(n=e[1],i=n.length-1;i>=0;--i)if(t>=n[i][0]&&t<=n[i][1])return!0;return!1},_vauthor:function(e){return this._videoVauthor(e,!0)},_videoVauthor:function(e,t){var i=this._post.videos;if(!e)return!!i.hasLinks;if(0===i.ytLinksCount||!Qi.YTubeTitles)return!1;for(var n,r=i.vData[Symbol.iterator]();!(n=r.next()).done;){var s=n.value;if(t?e===s[1]:e.test(s[0]))return!0}return i.ytLinksCount===i.vData.length?!1:new Promise(function(n){i.titleLoadFn=function(r){if(t?e===r[1]:e.test(r[0]))n(!0);else{if(i.ytLinksCount!==i.vData.length)return;n(!1)}i.titleLoadFn=null}})}},ti.setUserName=function(){var e=n('input[info="nameValue"]',Cn);e&&z("nameValue",e.value),dn.name.value=Qi.userName?Qi.nameValue:""},ti.setUserPassw=function(){var e=n('input[info="passwValue"]',Cn);e&&z("passwValue",e.value),(dn.dpass||{}).value=dn.passw.value=Qi.passwValue},ti.prototype=Object.defineProperties({fileObj:null,filesCount:0,isHidden:!1,isQuick:!1,isBottom:!1,lastQuickPNum:-1,pForm:null,pArea:[],qArea:null,addTextPanel:function(){var e,t,i,n,r=a("de-txt-panel"),o=["bold","italic","under","strike","spoil","code","sup","sub","quote"],l=["B","i","U","S","%","C","v","^","&gt;"];if(!Qi.addTextBtns)return void w(r);for(r||(r=p("span",{id:"de-txt-panel"},{click:this,mouseover:this})),r.style.cssFloat=Qi.txtBtnsLoc?"none":"right",c(Qi.txtBtnsLoc?a("de-txta-resizer")||this.txta:Zi._420?s("popup",this.form):this.subm,r),i="",e=0,n=Zi.markupTags,t=n.length;t>e;++e)""!==n[e]&&(i+='<span id="de-btn-'+o[e]+'" de-title="'+Ln.txtBtn[e][pn]+'" de-tag="'+n[e]+'">'+(2===Qi.addTextBtns?(""===i?"[ ":"")+'<a class="de-abtn" href="#">'+l[e]+"</a>"+(e===t-1?" ]":" / "):3===Qi.addTextBtns?'<input type="button" value="'+l[e]+'" style="font-weight: bold;">':"")+"</span>");r.innerHTML=i},delFilesUtils:function(){for(var e=this.fileObj;e;e=e.next)e.delUtils()},eventFiles:function(e){var t,n,r,s,a,o=null;for(t=0,s=i('input[type="file"]',this.fileTd),n=s.length;n>t;++t)a=s[t],r=a.obj,r?(r.prev=o,o&&(o.next=r),o=r):(a.obj=o=new ii(this,a,o),o.init(!1),e&&a.files&&0!==a.files.length&&o.clear());this.fileObj=s[0].obj},handleEvent:function(e){var t,i,n,r,s,a,o,l=e.target;if("SPAN"!==l.tagName&&(l=l.parentNode),s=l.id,s.startsWith("de-btn")){if("mouseover"===e.type){if("de-btn-quote"===s&&(On=T()),t=-1,sn)switch(s.substr(7)){case"bold":t=12;break;case"italic":t=13;break;case"strike":t=14;break;case"spoil":t=15;break;case"code":t=16}return void Lt.setTitle(l,t)}t=dn.txta,i=t.selectionStart,n=t.selectionEnd,"de-btn-quote"===s?_(t,"> "+(i===n?On:t.value.substring(i,n)).replace(/\n/gm,"\n> ")):(r=t.scrollTop,o=this._wrapText(Zi.markupBB,l.getAttribute("de-tag"),t.value.substring(i,n)),a=i+o[0],t.value=t.value.substr(0,i)+o[1]+t.value.substr(n),t.setSelectionRange(a,a),t.focus(),t.scrollTop=r),k(e),e.stopPropagation()}},showQuickReply:function(e,t,i,r){var s,o=e.tNum;if(this.isQuick){if(i&&!On&&e.wrap.nextElementSibling===this.qArea)return void this.closeQReply()}else this.isQuick=!0,this.setReply(!0,!1),l("a",this._pBtn[+this.isBottom]).className="de-abtn de-parea-btn-"+(tn?"reply":"thrd"),tn||Zi.kus||Zi.dobr||Zi.mak||(this.oeForm&&(w(n('input[name="oek_parent"]',this.oeForm)),this.oeForm.insertAdjacentHTML("afterbegin",'<input type="hidden" value="'+o+'" name="oek_parent">')),this.form&&(w(n('input[name="'+Zi.thrid+'"]',this.form)),this.form.insertAdjacentHTML("afterbegin",'<input type="hidden" id="de_thrid" value="'+o+'" name="'+Zi.thrid+'">')));c(e.wrap,this.qArea),tn||this._toggleQuickReply(o),this.form&&(this._lastCapUpdate&&(!tn&&this.tNum!==o||Date.now()-this._lastCapUpdate>3e5)&&(this.tNum=o,this.refreshCapImg(!1)),this.tNum=o,Zi._420&&"Comment"===this.txta.value&&(this.txta.value=""),s=this.txta.value,Qi.addOPLink||tn||!e.isOp||r?_(this.txta,(r?">>"+t:(""!==s&&"\n"!==s.slice(-1)?"\n":"")+(this.lastQuickPNum===t&&s.contains(">>"+t)?"":">>"+t+"\n"))+(On?On.replace(/^\n|\n$/g,"").replace(/(^|\n)(.)/gm,"$1> $2")+"\n":"")):this.txta.focus(),s=Wi[t].thr.op.title,s.length>27&&(s=s.substr(0,30)+""),a("de-qarea-target").textContent=s||"#"+t,this.lastQuickPNum=t)},showMainReply:function(e,t){this.closeQReply(),tn||(this.tNum=!1,this.refreshCapImg(!1)),this.isBottom===e?(this.pForm.style.display=this.isHidden?"":"none",this.isHidden=!this.isHidden,this.updatePAreaBtns()):(this.isBottom=e,this.setReply(!1,!1)),t&&k(t)},closeQReply:function(){this.isQuick&&(this.isQuick=!1,this.lastQuickPNum=-1,tn||(this._toggleQuickReply(0),w(a("de_thrid"))),this.setReply(!1,!tn||Qi.addPostForm>1))},refreshCapImg:function(e){var t,i;if(this._lastCapUpdate&&(this._lastCapUpdate=Date.now()),Zi.mak||Zi.fch)Zi.updateCaptcha(e);else{if(!this.cap||Zi.krau&&!n('input[name="captcha_name"]',this.form).hasAttribute("value"))return;i=this.recap?a("recaptcha_image"):l("img",this.capTr),Zi.dobr||Zi.krau||Zi.dvachnet||this.recap?i.click():i&&(t=i.getAttribute("src"),Zi.tire?t="/"+en+"/captcha.fpl?"+Math.random():Zi.kus||Zi.tinyIb?t=t.replace(/\?[^?]+$|$/,(Zi._410?"?board="+en+"&":"?")+Math.random()):(t=t.replace(/pl$/,"pl?key=mainpage&amp;dummy=").replace(/dummy=[\d\.]*/,"dummy="+Math.random()),t=this.tNum?t.replace(/mainpage|res\d+/,"res"+this.tNum):t.replace(/res\d+/,"mainpage")),i.src="",i.src=t)}this.cap&&(this.cap.value="",e&&this.cap.focus())},setReply:function(e,t){e?u(a("de-resizer-right"),this.pForm):(c(this.pArea[+this.isBottom],this.qArea),c(this._pBtn[+this.isBottom],this.pForm)),this.isHidden=t,this.qArea.style.display=e?"":"none",this.pForm.style.display=t?"none":"",this.updatePAreaBtns()},setPlaceholders:function(){this._setPlaceholder("name"),this._setPlaceholder("subj"),this._setPlaceholder("mail"),this._setPlaceholder("cap"),this._setPlaceholder("video")},updatePAreaBtns:function(){var e="de-abtn de-parea-btn-",t=tn?"reply":"thrd";l("a",this._pBtn[+this.isBottom]).className=e+(""===this.pForm.style.display?"close":t),l("a",this._pBtn[+!this.isBottom]).className=e+t},_lastCapUpdate:0,_pBtn:[],_init:function(){var e,t,r=this;if(this.pForm=f("div",{id:"de-pform"},[this.form,this.oeForm]),un.el.insertAdjacentHTML("beforebegin",'<div class="de-parea"><div>[<a href="#"></a>]</div><hr></div>'),this.pArea[0]=un.el.previousSibling,this._pBtn[0]=this.pArea[0].firstChild,this._pBtn[0].firstElementChild.onclick=this.showMainReply.bind(this,!1),t=Zi.fch?s("board",un.el):un.el,t.insertAdjacentHTML("afterend",'<div class="de-parea"><div>[<a href="#"></a>]</div><hr></div>'),this.pArea[1]=t.nextSibling,this._pBtn[1]=this.pArea[1].firstChild,this._pBtn[1].firstElementChild.onclick=this.showMainReply.bind(this,!0),this.qArea=h('<div style="display: none; '+Qi.qReplyX+"; "+Qi.qReplyY+';" id="de-qarea" class="'+Zi.cReply+(Qi.hangQReply?" de-qarea-hanging":" de-qarea-inline")+'"></div>'),this.isBottom=1===Qi.addPostForm,this.setReply(!1,!tn||Qi.addPostForm>1),t=this.qArea,t.insertAdjacentHTML("beforeend",'<div id="de-resizer-top"></div><div'+(Qi.hangQReply?' class="de-cfg-head"':"")+'><span id="de-qarea-target"></span><span id="de-qarea-utils"><span id="de-qarea-toggle" title="'+Ln.toggleQReply[pn]+'"></span><span id="de-qarea-close" title="'+Ln.closeQReply[pn]+'"></span></span></div><div id="de-resizer-left"></div><div id="de-resizer-right"></div><div id="de-resizer-bottom"></div>'),t=t.firstChild.nextSibling,t.lang=qi(),t.addEventListener("mousedown",{_el:this.qArea,_elStyle:this.qArea.style,_oldX:0,_oldY:0,_X:0,_Y:0,handleEvent:function(e){if(Qi.hangQReply){var t,i,n,r,s,a=e.clientX,o=e.clientY;switch(e.type){case"mousedown":return this._oldX=a,this._oldY=o,this._X=Qi.qReplyX,this._Y=Qi.qReplyY,Cn.body.addEventListener("mousemove",this,!1),Cn.body.addEventListener("mouseup",this,!1),void k(e);case"mousemove":return r=vi.sizing.wWidth-this._el.offsetWidth,s=vi.sizing.wHeight-this._el.offsetHeight-25,t=this._el.getBoundingClientRect(),i=t.left+a-this._oldX,n=t.top+o-this._oldY,this._X=i>=r||a>this._oldX&&i>r-20?"right: 0":0>i||a<this._oldX&&20>i?"left: 0":"left: "+i+"px",this._Y=n>=s||o>this._oldY&&n>s-20?"bottom: 25px":0>n||o<this._oldY&&20>n?"top: 0":"top: "+n+"px",this._elStyle.cssText=this._X+"; "+this._Y,this._oldX=a,void(this._oldY=o);default:Cn.body.removeEventListener("mousemove",this,!1),Cn.body.removeEventListener("mouseup",this,!1),z("qReplyX",this._X),z("qReplyY",this._Y)}}}},!1),t=t.lastChild,t.firstChild.onclick=function(){var e=r.qArea;Q("hangQReply"),Qi.hangQReply?(e.className=Zi.cReply+" de-qarea-hanging",e=e.firstChild.nextSibling,e.className="de-cfg-head"):(e.className=Zi.cReply+" de-qarea-inline",e=e.firstChild.nextSibling,e.removeAttribute("class"),r.txta.focus())},t.lastChild.onclick=this.closeQReply.bind(this),Zi.tire&&(Mn(i('input[type="hidden"]',un.el),w),un.el.appendChild(s("userdelete",Cn.body)),this.dpass=n('input[type="password"]',un.el)),this.form&&this.txta){if(new ni("top",t=this.qArea.firstChild,this),new ni("left",t=t.nextSibling.nextSibling,this),new ni("right",t=t.nextSibling,this),new ni("bottom",t=t.nextSibling,this),Zi.kus||!Zi.multiFile&&Qi.fileThumb||this.setPlaceholders(),Zi.disableRedirection(this.form),this.form.style.display="inline-block",this.form.style.textAlign="left",$i.Firefox?this.txta.addEventListener("mouseup",function(){z("textaWidth",parseInt(this.style.width,10)),z("textaHeight",parseInt(this.style.height,10))},!1):(this.txta.insertAdjacentHTML("afterend",'<div id="de-txta-resizer"></div>'),this.txta.nextSibling.addEventListener("mousedown",{_el:this.txta,_elStyle:this.txta.style,handleEvent:function(e){switch(e.type){case"mousedown":return Cn.body.addEventListener("mousemove",this,!1),Cn.body.addEventListener("mouseup",this,!1),void k(e);case"mousemove":var t=this._el.getBoundingClientRect();return this._elStyle.width=e.clientX-t.left+"px",void(this._elStyle.height=e.clientY-t.top+"px");default:Cn.body.removeEventListener("mousemove",this,!1),Cn.body.removeEventListener("mouseup",this,!1),z("textaWidth",parseInt(this._elStyle.width,10)),z("textaHeight",parseInt(this._elStyle.height,10))}}},!1)),Zi.kus)for(;this.subm.nextSibling;)w(this.subm.nextSibling);if(!Zi.iich&&Qi.addSageBtn&&this.mail&&(e=p("span",{id:"de-sagebtn","class":"de-btn-sage"},{click:function(e){e.stopPropagation(),k(e),Q("sageReply"),r._setSage()}}),t=d(this.mail,"LABEL")||this.mail,t.nextElementSibling||t.previousElementSibling?t.style.display="none":d(this.mail,"TR").style.display="none",c(this.subm,e),setTimeout(this._setSage.bind(this),0),Zi._2chru))for(;e.nextSibling;)w(e.nextSibling);this.addTextPanel(),this.txta.classList.add("de-textarea"),this.txta.style.cssText="width: "+Qi.textaWidth+"px; height: "+Qi.textaHeight+"px;",this.txta.addEventListener("keypress",function(e){var t=e.charCode||e.keyCode;33!==t&&34!==t||0!==e.which||(e.target.blur(),window.focus())},!1),Zi.tiny||(this.subm.value=Ln.reply[pn]),this.subm.addEventListener("click",function(e){var t,i=r.txta.value;return Zi._2chru&&!Zi.reqCaptcha?(GM_xmlhttpRequest({method:"GET",url:"/"+en+"/api/requires-captcha",onreadystatechange:function(e){if(4===e.readyState&&200===e.status){if(Zi.reqCaptcha=!0,"1"!==JSON.parse(e.responseText)["requires-captcha"])return void r.subm.click();a("captcha_tr").style.display="table-row",a("captchaimage").src="/"+en+"/captcha?"+Math.random(),c(r.cap,p("span",{"class":"shortened",style:"margin: 0px 0.5em;",text:" "},{click:function(){var e=this;GM_xmlhttpRequest({method:"POST",url:"/"+en+"/api/validate-captcha",onreadystatechange:function(t){4===t.readyState&&200===t.status&&("ok"===JSON.parse(t.responseText).status?e.innerHTML=" ":(e.innerHTML=" ",setTimeout(function(){e.innerHTML=" "},1e3)))}})}}))}}}),void k(e)):Qi.warnSubjTrip&&r.subj&&/#.|##./.test(r.subj.value)?(k(e),void _t(Ln.subjHasTrip[pn],"upload",!1)):(hn.haveOutreps&&(i=hn.outReplace(i)),r.tNum&&"Dollchan Extension Tools"===Wi[r.tNum].subj&&(t="\n\n"+r._wrapText(Zi.markupBB,Zi.markupTags[5],"-".repeat(50)+"\n"+$i.ua+"\nv"+En+" ["+$i.scriptInstall+"]")[1],i.contains(t)||(i+=t)),r.txta.value=i,Qi.ajaxReply&&_t(Ln.checking[pn],"upload",!0),Qi.favOnReply&&r.tNum&&Wi[r.tNum].thr.setFavorState(!0),r.video&&(i=r.video.value)&&(i=i.match(Ut.ytReg))&&(r.video.value="http://www.youtube.com/watch?v="+i[1]),r.isQuick&&(r.pForm.style.display="none",r.qArea.style.display="none",c(r._pBtn[+r.isBottom],r.pForm)),void rn.pause())},!1),Qi.noGoto&&this.gothr&&(this.gothr.style.display="none"),Qi.noPassword&&this.passw&&(d(this.passw,"TR").style.display="none"),Qi.noName&&this.name&&(d(this.name,"TR").style.display="none"),window.addEventListener("load",function(){Qi.userName&&r.name&&setTimeout(ti.setUserName,1e3),r.passw&&setTimeout(ti.setUserPassw,1e3)},!1),this.cap&&(this.capTr=d(this.cap,"TR"),this.txta.addEventListener("focus",this._captchaInit.bind(this,this.capTr.innerHTML),!1),this.file&&this.file.addEventListener("click",this._captchaInit.bind(this,this.capTr.innerHTML),!1),Zi.krau||(this.capTr.style.display="none"),Zi.mak||Zi.fch||(this.capTr.innerHTML=""),this.cap=null),2===Qi.ajaxReply?(Zi.krau&&this.form.removeAttribute("onsubmit"),setTimeout(function(){r.form.onsubmit=function(e){return k(e),Zi.krau&&Zi.addProgressTrack.click(),Zi._2chru?(Cn.body.insertAdjacentHTML("beforeend",'<iframe class="ninja" id="csstest" src="/'+en+'/csstest.foo"></iframe>'),void(Cn.body.lastChild.onload=function(e){w(e.target),new li(r.form,r.subm,si)})):void new li(r.form,r.subm,si)}},0)):1===Qi.ajaxReply&&(this.form.target="de-iframe-pform",this.form.onsubmit=null),t=this.file,t&&(Zi.fixFileInputs(t),this.eventFiles(!0))}},_setSage:function(){var e=a("de-sagebtn"),t=Qi.sageReply;e.style.opacity=t?"1":".3",e.title=t?"SAGE!":Ln.noSage[pn],"text"===this.mail.type?this.mail.value=t?"sage":Zi.fch?"noko":"":this.mail.checked=t},_toggleQuickReply:function(e){this.oeForm&&(n('input[name="oek_parent"], input[name="replyto"]',this.oeForm).value=e),this.form&&(n('#de_thrid, input[name*="thread"]',this.form).value=e,Zi.pony&&(n('input[name="quickreply"]',this.form).value=e||""))},_captchaInit:function(e){if(!this.capInited){if(Zi.mak||Zi.fch)return Zi.updateCaptcha(!1),dn.txta.tabIndex=999,void(this.capInited=!0);this.capTr.innerHTML=e,this.cap=n('input[type="text"][name*="aptcha"]:not([name="recaptcha_challenge_field"])',this.capTr),Zi.tire&&v("show_captcha()"),Zi.krau&&(Zi.initCaptcha.click(),a("captcha_image").setAttribute("onclick","requestCaptcha(true);")),Zi.dvachnet&&v("get_captcha()"),setTimeout(this._captchaUpd.bind(this),100)}},_captchaUpd:function(){var e,t,i=this;if((this.recap=a("recaptcha_response_field"))&&(e=a("recaptcha_image"))&&(this.cap=this.recap,e.setAttribute("onclick","Recaptcha.reload()"),e.style.cssText="width: 300px; cursor: pointer;"),this.capInited=!0,this.cap.autocomplete="off",Zi.kus||!Zi.multiFile&&Qi.fileThumb||(this.cap.placeholder=Ln.cap[pn]),this.cap.onkeypress=function(){var e="",t="qwertyuiop[]asdfghjkl;'zxcvbnm,.`";return function(i){if(Qi.captchaLang&&0!==i.which){var n,r=i.charCode||i.keyCode,s=String.fromCharCode(r).toLowerCase();if(1===Qi.captchaLang){if(1040>r||r>1279||-1===(n=e.indexOf(s)))return;s=t[n]}else{if(33>r||r>122||-1===(n=t.indexOf(s)))return;s=e[n]}k(i),_(i.target,s)}}}(),!Zi.krau){if(Zi.dobr||Zi.dvachnet||this.recap||!(e=n("img",this.capTr)))return void(this.capTr.style.display="");Zi.kus||Zi.tinyIb||(this._lastCapUpdate=Date.now(),this.cap.onfocus=function(){i._lastCapUpdate&&Date.now()-i._lastCapUpdate>3e5&&i.refreshCapImg(!1)},!tn&&this.isQuick&&this.refreshCapImg(!1)),e.title=Ln.refresh[pn],e.alt=Ln.loading[pn],e.style.cssText="vertical-align: text-bottom; border: none; cursor: pointer;",e.onclick=this.refreshCapImg.bind(this,!0),"A"===(t=e.parentNode).tagName&&(c(t,e),w(t)),this.capTr.style.display=""}},_setPlaceholder:function(e){var t=this[e];t&&(Zi.multiFile||!Qi.fileThumb?t.placeholder=Ln[e][pn]:t.removeAttribute("placeholder"))},_wrapText:function(e,t,i){var n,r;if(e)return i.contains("\n")?(n="["+t+"]"+i+"[/"+t+"]",[n.length,n]):(r=i.match(/^(\s*)(.*?)(\s*)$/),n=r[1]+"["+t+"]"+r[2]+"[/"+t+"]"+r[3],[0===r[2].length?r[1].length+t.length+2:n.length,n]);for(var s="",a=0,o=i.split("\n"),l=o.length;l>a;++a)r=o[a].match(/^(\s*)(.*?)(\s*)$/),s+="\n"+r[1]+("^H"===t?r[2]+"^H".repeat(r[2].length):t+r[2]+t)+r[3];return[1===a&&0===r[2].length&&"^H"!==t?r[1].length+t.length:s.length-1,s.slice(1)]}},{fileArea:{get:function(){var e;return Zi.multiFile?(e=h('<tr><td></td><td><div id="de-file-area"></div></td></tr>'),c(this.fileTd.parentNode,e)):(e=l(Zi.tiny?"th":"td",d(this.txta,"TR")),e.innerHTML=""),Object.defineProperty(this,"fileArea",{value:e}),e},enumerable:!0,configurable:!0},rarInput:{get:function(){var e=Cn.body.appendChild(p("input",{type:"file",style:"display: none;"},null));return Object.defineProperty(this,"rarInput",{value:e}),e},enumerable:!0,configurable:!0},isVisible:{get:function(){if(!this.isHidden&&this.isBottom&&n(":focus",this.pForm)){var e=this.pForm.getBoundingClientRect();return e.bottom>0&&e.top<Cn.documentElement.clientHeight}return!1},enumerable:!0,configurable:!0},topCoord:{get:function(){return this.pForm.getBoundingClientRect().top},enumerable:!0,configurable:!0}}),ii.prototype=Object.defineProperties({empty:!0,next:null,imgFile:null,thumb:null,clear:function(){var e,t=this.form,i=this.el;i.insertAdjacentHTML("afterend",i.outerHTML),e=this.el.nextSibling,e.obj=this,e.addEventListener("change",this,!1),e.addEventListener("dragleave",this,!1),e.addEventListener("drop",this,!1),t.file===i&&(t.file=e),this.el=e,w(i),this.empty=!0,this.hideInputs()},delUtils:function(){var e;Qi.fileThumb&&(this.thumb.classList.add("de-file-off"),this._mediaEl&&(window.URL.revokeObjectURL(this._mediaEl.src),e=this._mediaEl.parentNode,e.title=Ln.clickToAdd[pn],w(this._mediaEl),this._mediaEl=null)),w(this._delUtil),w(this._rjUtil),this.imgFile=this._delUtil=this._rjUtil=null,this._changeFilesCount(-1),this.clear()},updateUtils:function(){this.init(!0),this._delUtil&&c(this._buttonsPlace,this._delUtil),this._rjUtil&&c(this._buttonsPlace,this._rjUtil)},handleEvent:function(e){var t=this;switch(e.type){case"change":return void setTimeout(this._onFileChange.bind(this),20);case"click":return e.target===this._delUtil?this.delUtils():e.target===this._rjUtil?this._addRarJpeg():"de-file-img"===e.target.className&&this.el.click(),e.stopPropagation(),void k(e);case"dragover":return this.thumb.classList.add("de-file-drag"),void c(this.thumb,this.el);case"dragleave":case"drop":return void setTimeout(function(){t.thumb.classList.remove("de-file-drag");var e=t.place.firstChild;e?u(e,t.el):t.place.appendChild(t.el)},10);case"mouseover":return void this.thumb.classList.add("de-file-hover");case"mouseout":this.thumb.classList.remove("de-file-hover")}},hideInputs:function(){for(var e=Qi.fileThumb,t=this.next;t&&t.empty;)t=t.next;if(!t){for(t=this;t.prev&&t.prev.empty;)t=t.prev;for(;t=t.next;)e?t.thumb.style.display="none":t._wrap.style.display="none"}},init:function(e){var t;Qi.fileThumb?(this.form.fileTd.parentNode.style.display="none",t=this.form.fileArea,t.insertAdjacentHTML("beforeend",'<div class="de-file de-file-off"><div class="de-file-img"><div class="de-file-img" title="'+Ln.clickToAdd[pn]+'"></div></div></div>'),this.thumb=t.lastChild,this.thumb.addEventListener("mouseover",this,!1),this.thumb.addEventListener("mouseout",this,!1),this.thumb.addEventListener("click",this,!1),this.thumb.addEventListener("dragover",this,!1),this.el.addEventListener("dragleave",this,!1),this.el.addEventListener("drop",this,!1),e?this._showPviewImage():this.prev&&(this.thumb.style.display="none")):e&&(this._wrap.style.display="",this.form.fileTd.parentNode.style.display="",this._mediaE&&window.URL.revokeObjectURL(this._mediaE.src),w(this.thumb),this.thumb=this._mediaEl=null),e||(this.el.classList.add("de-file-input"),this.el.addEventListener("change",this,!1))},_mediaEl:null,_delUtil:null,_rjUtil:null,_addRarJpeg:function(){var e=this,t=this.form.rarInput;t.onchange=function(t){w(e._rjUtil);var i=t.target.files[0],n=new FileReader,r=e._buttonsPlace;r.insertAdjacentHTML("afterend",'<span><span class="de-wait"></span>'+Ln.wait[pn]+"</span>"),e._rjUtil=r.nextSibling,n.onload=function(e,t,i){this._buttonsPlace.nextSibling===t&&(t.className="de-file-rarmsg de-file-utils",t.title=this.el.files[0].name+" + "+e.name,t.textContent=this.el.files[0].name.replace(/^.+\./,"")+" + "+e.name.replace(/^.+\./,""),this.imgFile=i.target.result)}.bind(e,i,r.nextSibling),n.readAsArrayBuffer(i)},t.click()},_changeFilesCount:function(e){e=this.form.filesCount+e,this.form.filesCount=1>e?1:e,Zi.dobr&&(this.form.fileTd.firstElementChild.value=this.form.filesCount+1)},_onFileChange:function(){Qi.fileThumb?this._showPviewImage():this.form.eventFiles(!1),this.empty?(this.empty=!1,this._changeFilesCount(1),c(this._buttonsPlace,this._delUtil=p("span",{"class":"de-file-del de-file-utils",title:Ln.removeFile[pn]},{click:this}))):this.imgFile&&(this.imgFile=null),this.next&&(Qi.fileThumb?this.next.thumb.style.display="":this.next._wrap.style.display=""),$i.Presto||Zi.fch||Zi.mak||!/^image\/(?:png|jpeg)$/.test(this.el.files[0].type)||(this._rjUtil&&(w(this._rjUtil),this._rjUtil=null),c(this._buttonsPlace,this._rjUtil=p("span",{"class":"de-file-rar de-file-utils",title:Ln.helpAddFile[pn]},{click:this})))},_showPviewImage:function(){var e,t=this,i=this.el.files;i&&i[0]&&(e=new FileReader,e.onload=function(e){t.form.eventFiles(!1);var i=t.el.files[0],n=t.thumb;t.empty||(n.classList.remove("de-file-off"),n=n.firstChild.firstChild,n.title=i.name+", "+(i.size/1024).toFixed(2)+"KB",n.insertAdjacentHTML("afterbegin","video/webm"===i.type?'<video class="de-file-img" loop autoplay muted src=""></video>':'<img class="de-file-img" src="">'),t._mediaEl=n=n.firstChild,n.src=window.URL.createObjectURL(new Blob([e.target.result])),n=n.nextSibling,n&&(window.URL.revokeObjectURL(n.src),w(n)))},e.readAsArrayBuffer(i[0]))}},{_buttonsPlace:{get:function(){return Qi.fileThumb?this.thumb.firstChild:this.el},enumerable:!0,configurable:!0},_wrap:{get:function(){return Zi.multiFile?this.el.parentNode:this.el},enumerable:!0,configurable:!0}}),ni.prototype={handleEvent:function(e){var t,i=this.qa.getBoundingClientRect(),n=$i.Chrome?Cn.documentElement.clientWidth:vi.sizing.wWidth,r=$i.Chrome?Cn.documentElement.clientHeight:vi.sizing.wHeight;switch(e.type){case"mousedown":switch(this.dir){case"top":t=Qi.qReplyX+"; bottom: "+(r-i.bottom)+"px";break;case"bottom":t=Qi.qReplyX+"; top: "+i.top+"px";break;case"left":t="right: "+(n-i.right)+"px; "+Qi.qReplyY;break;case"right":t="left: "+i.left+"px; "+Qi.qReplyY}return this.qaStyle.cssText=t,Cn.body.addEventListener("mousemove",this,!1),Cn.body.addEventListener("mouseup",this,!1),void k(e);case"mousemove":return void(this.vertical?(t=e.clientY,this.txStyle.height=Math.max(parseInt(this.txStyle.height,10)+("top"===this.dir?i.top-(20>t?0:t):(t>r-45?r-25:t)-i.bottom),90)+"px"):(t=e.clientX,this.txStyle.width=Math.max(parseInt(this.txStyle.width,10)+("left"===this.dir?i.left-(20>t?0:t):(t>n-20?n:t)-i.right),275)+"px"));default:Cn.body.removeEventListener("mousemove",this,!1),Cn.body.removeEventListener("mouseup",this,!1),this.vertical?(z("textaHeight",parseInt(this.txStyle.height,10)),z("qReplyY",i.top<1?"top: 0":i.bottom>r-26?"bottom: 25px":"top: "+i.top+"px")):(z("textaWidth",parseInt(this.txStyle.width,10)),z("qReplyX",i.left<1?"left: 0":i.right>n-1?"right: 0":"left: "+i.left+"px")),this.qaStyle.cssText=Qi.qReplyX+"; "+Qi.qReplyY}}},li.prototype={append:function(e){var t,i,n,r,s="--"+this.boundary+'\r\nContent-Disposition: form-data; name="'+e.name+'"';if("file"===e.type&&e.files.length>0){if(t=e.files[0],i=t.name,this.data.push(s+'; filename="'+(Qi.removeFName?" "+i.substring(i.lastIndexOf(".")):i)+'"\r\nContent-type: '+t.type+"\r\n\r\n",null,"\r\n"),n=this.data.length-2,!/^image\/(?:png|jpeg)$|^video\/webm$/.test(t.type))return void(this.data[n]=t);r=new FileReader,r.onload=function(t,i){var r=this.clearImage(i.target.result,e.obj.imgFile,Qi.postSameImg&&String(Math.round(1e6*Math.random())));r?(this.data[n]=new Blob(r),this.busy--,this.submit()):(this.error=!0,_t(Ln.fileCorrupt[pn]+t,"upload",!1))}.bind(this,i),r.readAsArrayBuffer(t),this.busy++}else("checkbox"!==e.type&&"radio"!==e.type||e.checked)&&this.data.push(s+"\r\n\r\n"+e.value+"\r\n")},submit:function(){var e=this;this.error||0!==this.busy||(this.data.push("--"+this.boundary+"--\r\n"),C({method:"POST",headers:{"Content-type":"multipart/form-data; boundary="+this.boundary},data:new Blob(this.data),url:$i.fixLink(this.url),onreadystatechange:function(t){4===t.readyState&&(200===t.status?e.fn(x(t.responseText)):_t(0===t.status?Ln.noConnect[pn]:"HTTP ["+t.status+"] "+t.statusText,"upload",!1))}}))},readExif:function(e,t,i){var n,r,s,a,o,l=0,d=0,u=0,c=$i.getUnsafeDataView(e,t),h="MM"!==String.fromCharCode(c.getUint8(0),c.getUint8(1));if(42!==c.getUint16(2,h))return null;if(n=c.getUint32(4,h),n>i)return null;for(o=c.getUint16(n,h),r=0;o>r;r++)if(a=c.getUint16(s=n+2+12*r,h),296===a)u=c.getUint16(s+8,h)-1;else if(282===a||283===a){if(s=c.getUint32(s+8,h),s>i)return null;282===a?l=Math.round(c.getUint32(s,h)/c.getUint32(s+4,h)):d=Math.round(c.getUint32(s,h)/c.getUint32(s+4,h))}return l=l||d,d=d||l,new Uint8Array([255&u,l>>8,255&l,d>>8,255&d])},clearImage:function(e,t,i){var n,r,s,a,o,l,d=$i.getUnsafeUint8Array(e),u=!!Qi.removeEXIF,c=t?i?[d,t,i]:[d,t]:i?[d,i]:[d];if(!Qi.postSameImg&&!u&&!t)return c;if(255===d[0]&&216===d[1]){for(n=2,s=1,r=d.length-1,a=[null,null],o=2,l=null;r>n;){if(255===d[n]){if(u){if(l||1!==s||(225===d[n+1]&&69===d[n+4]?l=this.readExif(e,n+10,(d[n+2]<<8)+d[n+3]):224===d[n+1]&&70===d[n+7]&&(0!==d[n+2]||d[n+3]>=14||255!==d[n+15])&&(l=d.subarray(n+11,n+16))),d[n+1]>>4===14&&238!==d[n+1]||254===d[n+1]){o!==n&&a.push(d.subarray(o,n)),n+=2+(d[n+2]<<8)+d[n+3],o=n;continue}}else if(216===d[n+1]){s++,n++;continue}if(217===d[n+1]&&0===--s)break}n++}return n+=2,!t&&r-n>75&&(n=r),2===o?(n!==r&&(c[0]=$i.getUnsafeUint8Array(e,0,n)),c):(a[0]=new Uint8Array([255,216,255,224,0,14,74,70,73,70,0,1,1]),a[1]=l||new Uint8Array([0,0,1,0,1]),a.push(d.subarray(o,n)),t&&a.push(t),i&&a.push(i),a)}if(137===d[0]&&80===d[1]){for(n=0,r=d.length-7;r>n&&(73!==d[n]||69!==d[n+1]||78!==d[n+2]||68!==d[n+3]);n++);return n+=8,n!==r&&(t||75>=r-n)&&(c[0]=$i.getUnsafeUint8Array(e,0,n)),c}return 26===d[0]&&69===d[1]&&223===d[2]&&163===d[3]?new on(e).addData(i).getData():null}},on=function(e){function t(e,t,i){var n,r,s,a,o=0;if(!(i+4>=t)){if(n=e.getUint32(i),r=Math.clz32(n),r>3)return void(this.error=!0);if(s=n>>>8*(3-r),o+=r+1,i+=r+1,i+4>=t)return void(this.error=!0);if(n=e.getUint32(i),r=Math.clz32(n),r>3){if(0!==(n&4294967295>>>r+1))return void(this.error=!0);if(i+8>=t)return void(this.error=!0);o+=4,i+=4,n=e.getUint32(i),r-=4}if(a=n>>>8*(3-r),o+=r+1,i+=r+1,i+a>t)return void(this.error=!0);this.data=e,this.offset=i,this.endOffset=i+a,this.id=s,this.headSize=o,this.size=a}}function i(e){var i=$i.getUnsafeDataView(e),a=i.byteLength,o=new t(i,a,0),l=0,d=[];e:do{if(o.error||o.id!==n)break;for(this.EBML=o,l+=o.headSize+o.size;;){if(o=new t(i,a,l),o.error)break e;if(o.id===r){this.segment=o;break}if(o.id!==s)break e;d.push(o),l+=o.headSize+o.size}return this.voids=d,this.data=e,this.length=a,this.rv=[null],void(this.error=!1)}while(!1);this.error=!0}var n=440786851,r=408125543,s=236;return t.prototype={error:!1,id:0},i.prototype={addData:function(e){if(this.error||!e)return this;var t="string"==typeof e?e.length:e.byteLength;return t>127?void(this.error=!0):(this.rv.push(new Uint8Array([s,128|t]),e),this)},getData:function(){if(this.error)return null;var e=this.segment.endOffset;return this.rv[0]=$i.getUnsafeUint8Array(this.data,0,e),this.rv}},on=i,new i(e)},ui.prototype={handleEvent:function(e){switch(e.type){case"mousemove":var t=e.clientX,i=e.clientY;return void((this._oldX!==t||this._oldY!==i)&&(this._oldX=t,this._oldY=i,this.show()));case"mouseover":return this.hasEvents||(this.hasEvents=!0,this._btns.addEventListener("mouseout",this,!1),this._btns.addEventListener("click",this,!1)),void(this._hidden||(clearTimeout(this._hideTmt),Lt.setTitle(this._btns.firstChild,17),Lt.setTitle(this._btns.lastChild,4)));case"mouseout":return void this._setHideTmt();case"click":switch(e.target.parentNode.id){case"de-img-btn-next":return void this._nextFn();case"de-img-btn-prev":this._prevFn()}}},hide:function(){this._btnsStyle.display="none",this._hidden=!0,this._oldX=this._oldY=-1},remove:function(){w(this._btns),window.removeEventListener("mousemove",this,!1),clearTimeout(this._hideTmt)},show:function(){this._hidden&&(this._btnsStyle.display="",this._hidden=!1,this._setHideTmt())},_hasEvents:!1,_hideTmt:0,_hidden:!0,_oldX:-1,_oldY:-1,_setHideTmt:function(){clearTimeout(this._hideTmt),this._hideTmt=setTimeout(this.hide.bind(this),2e3)}},ci.prototype=Object.defineProperties({data:null,close:function(e){this.hasOwnProperty("_btns")&&this._btns.remove(),this._remove(e)},handleEvent:function(e){var t,i=!1;switch(e.type){case"mousedown":if(this.data.isVideo&&this.data.isControlClick(e,this._elStyle.height))return;this._oldX=e.clientX,this._oldY=e.clientY,Cn.body.addEventListener("mousemove",this,!0),Cn.body.addEventListener("mouseup",this,!0);break;case"mousemove":var n=e.clientX,r=e.clientY;return void((n!==this._oldX||r!==this._oldY)&&(this._elStyle.left=(this._oldL=parseInt(this._elStyle.left,10)+n-this._oldX)+"px",this._elStyle.top=(this._oldT=parseInt(this._elStyle.top,10)+r-this._oldY)+"px",this._oldX=n,this._oldY=r,this._moved=!0));case"mouseup":return Cn.body.removeEventListener("mousemove",this,!0),void Cn.body.removeEventListener("mouseup",this,!0);case"click":if(this.data.isVideo&&this.data.isControlClick(e,this._elStyle.height))return;if(0===e.button){this._moved?this._moved=!1:(this.close(e),fi.viewer=null),e.stopPropagation();break}return;case"mouseover":i=!0;case"mouseout":return t=e.relatedTarget,void((!t||t!==this._obj&&!this._obj.contains(t))&&(i?wi.mouseEnter(this.data.post):wi.top&&this.data.post.el!==t&&!this.data.post.el.contains(t)&&wi.top.markToDel()));case"mousewheel":this._handleWheelEvent(e.clientX,e.clientY,-1/40*("wheelDeltaY"in e?e.wheelDeltaY:e.wheelDelta));break;default:this._handleWheelEvent(e.clientX,e.clientY,e.deltaY)}k(e)},navigate:function(e){var t=this.data;do t=t.getFollow(e);while(!t.isVideo&&!t.isImage);this.update(t,null)},update:function(e,t,i){this._remove(i),this._show(e,t)},_ar:0,_data:null,_elStyle:null,_fullEl:null,_obj:null,_oldL:0,_oldT:0,_curH:0,_curW:0,_oldX:0,_oldY:0,_maxSize:null,_minSize:0,_moved:!1,_getHolder:function(e,t){var i,n,r=t.computeFullSize(!1),s=vi.sizing.wWidth,a=vi.sizing.wHeight,o=Qi.minImgSize,l=r[0]/r[1];return this._ar=l,this._curW=r[0],this._curH=r[1],o*l>s&&(o=Math.floor(s/l)),o/l>a&&(o=Math.floor(a*l)),this._minSize=o,this._maxSize=r[2]&&o>(r[2][2]>1?r[2][0]:r[2][1])?r[2]:null,this._oldL=(s-r[0])/2-1,this._oldT=(a-r[1])/2-1,n='<div class="de-img-center" style="top:'+this._oldT+"px; left:"+this._oldL+"px; width:"+r[0]+"px; height:"+r[1]+'px; display: block"></div>',i=h(n),t.isImage?(i.insertAdjacentHTML("afterbegin",'<a href="'+t.src+'"></a>'),i.firstChild.appendChild(e)):i.appendChild(e),i
},_handleWheelEvent:function(e,t,i){if(0!==i){var n,r=this._curW,s=this._curH,a=0>i?r*this._zoomFactor:r/this._zoomFactor,o=0>i?s*this._zoomFactor:s/this._zoomFactor;i>0&&(n=D([a,o,this._ar],this._minSize,this._maxSize),a=n[0],o=n[1]),this._curW=a,this._curH=o,this._elStyle.width=a+"px",this._elStyle.height=o+"px",this._elStyle.left=(this._oldL=parseInt(e-a/r*(e-this._oldL),10))+"px",this._elStyle.top=(this._oldT=parseInt(t-o/s*(t-this._oldT),10))+"px"}},_show:function(e){var t=e.getFullObject(),i=this._getHolder(t,e),n=i.style;this._elStyle=n,this.data=e,this._fullEl=t,this._obj=i,"onwheel"in i?i.addEventListener("wheel",this,!0):i.addEventListener("mousewheel",this,!0),i.addEventListener("mousedown",this,!0),i.addEventListener("click",this,!0),e.inPview&&(i.addEventListener("mouseover",this,!0),i.addEventListener("mouseout",this,!0)),e.inPview?this.hasOwnProperty("_btns")&&this._btns.hide():this._btns.show(),un.el.appendChild(i)},_remove:function(e){this.data.isVideo&&"VIDEO"===this._fullEl.tagName&&(this._fullEl.pause(),this._fullEl.src=""),this._obj.style.display="none",setTimeout(w,100,this._obj),e&&this.data.inPview&&this.data.sendCloseEvent(e,!1)}},{_btns:{get:function(){var e=new ui(this.navigate.bind(this,!0),this.navigate.bind(this,!1));return Object.defineProperty(this,"_btns",{value:e}),e},enumerable:!0,configurable:!0},_zoomFactor:{get:function(){var e=1+Qi.zoomFactor/100;return Object.defineProperty(this,"_zoomFactor",{value:e}),e},enumerable:!0,configurable:!0}}),hi.prototype=Object.defineProperties({expanded:!1,collapse:function(e){return this.isVideo&&this.isControlClick(e,this._fullEl.style.height)?!1:(this.expanded=!1,w(this._fullEl),this._fullEl=null,this.el.parentNode.style.display="",w((Zi.hasPicWrap?this._getImageParent():this.el.parentNode).nextSibling),e&&this.inPview&&this.sendCloseEvent(e,!0),!0)},computeFullSize:function(e){var t,i,n,r,s=this.width,a=this.height;return Qi.resizeDPI&&(s/=vi.sizing.dPxRatio,a/=vi.sizing.dPxRatio),Qi.resizeImgs?e?n=[vi.sizing.wWidth-this._offset-3,Number.MAX_SAFE_INTEGER,0]:(t=vi.sizing.wWidth-2,i=vi.sizing.wHeight-2,n=[t,i,t/i]):n=null,r=D([s,a,s/a],Qi.minImgSize,n),[r[0],r[1],n]},expand:function(e,t){var i,n=this.el;if(e)this.expanded=!0,(Zi.hasPicWrap?this._getImageParent():n.parentNode).insertAdjacentHTML("afterend",'<div class="de-after-fimg"></div>'),i=this.computeFullSize(e),n.parentNode.style.display="none",this._fullEl=this.getFullObject(),this._fullEl.className="de-img-full",this._fullEl.style.width=i[0]+"px",this._fullEl.style.height=i[1]+"px",c(n.parentNode,this._fullEl);else if(fi.viewer){if(fi.viewer.data===this)return fi.viewer.close(t),void(fi.viewer=null);fi.viewer.update(this,t)}else fi.viewer=new ci(this)},getFollowPost:function(e){var t,i=this.post;do i=i.getAdjacentVisPost(!e),i||(i=e?un.firstThr.op:un.lastThr.last,(i.hidden||i.thr.hidden)&&(i=i.getAdjacentVisPost(!e))),t=i.allImages;while(0===t.count);return e?t.first:t.last},getFullObject:function(){var e,t=this.src;return this.isVideo?(Zi.tiny&&(t=t.replace(/^.*?\?v=|&.*?$/g,"")),$i.canPlayWebm?(e=h('<video style="width: 100%; height: 100%" src="'+t+'" loop autoplay '+(Qi.webmControl?"controls ":"")+(0===Qi.webmVolume?"muted ":"")+"></video>"),0!==Qi.webmVolume&&(e.oncanplay=function(){this.volume=Qi.webmVolume/100}),e.onerror=function(){this.onceLoaded||(this.load(),this.onceLoaded=!0)},e.onvolumechange=function(){z("webmVolume",Math.round(100*this.volume))}):e=h('<object style="width: 100%; height: 100%" data="'+t+'" type="application/x-vlc-plugin"><param name="pluginspage" value="http://www.videolan.org/vlc/" /><param name="controls" value="'+(Qi.webmControl?"true":"false")+'" /><param name="loop" value="true" /><param name="autoplay" value="true" /><param name="wmode" value="transparent" /></object>')):(e=h('<img style="width: 100%; height: 100%" src="'+t+'" alt="'+t+'"></a>'),e.onload=e.onerror=function(){this.naturalHeight+this.naturalWidth!==0||this.onceLoaded||(this.src=this.src,this.onceLoaded=!0)}),e},isControlClick:function(e,t){return Qi.webmControl&&e.clientY>e.target.getBoundingClientRect().top+parseInt(t,10)-30},sendCloseEvent:function(e,t){var i=this.post,n=i.el.getBoundingClientRect(),r=e.pageX-window.pageXOffset,s=e.pageY-window.pageYOffset;if(t)(r>n.right||s>n.bottom&&wi.top)&&wi.top.markToDel();else{for(;r>n.right||r<n.left||s>n.bottom||s<n.top;){if(i=i.parent,!i)return void(wi.top&&wi.top.markToDel());n=i.el.getBoundingClientRect()}i.kid?i.kid.markToDel():clearTimeout(wi.delTO)}},_fullEl:null},{inPview:{get:function(){var e=this.post.isPview;return Object.defineProperty(this,"inPview",{value:e}),e},enumerable:!0,configurable:!0},isImage:{get:function(){var e=/\.jpe?g|\.png|\.gif/i.test(this.src)||this.src.startsWith("blob:")&&!this.el.hasAttribute("de-video");return Object.defineProperty(this,"isImage",{value:e}),e},enumerable:!0,configurable:!0},isVideo:{get:function(){var e=/\.webm(?:&|$)/i.test(this.src)||this.src.startsWith("blob:")&&this.el.hasAttribute("de-video");return Object.defineProperty(this,"isVideo",{value:e}),e},enumerable:!0,configurable:!0},height:{get:function(){var e=this._getImageSize();return Object.defineProperties(this,{width:{value:e[0]},height:{value:e[1]}}),e[1]},enumerable:!0,configurable:!0},src:{get:function(){var e=this._getImageSrc();return Object.defineProperty(this,"src",{value:e}),e},enumerable:!0,configurable:!0},width:{get:function(){var e=this._getImageSize();return Object.defineProperties(this,{width:{value:e[0]},height:{value:e[1]}}),e[0]},enumerable:!0,configurable:!0},_offset:{get:function(){var e=-1;return this._useCache&&(e=this._glob._offset),-1===e&&(this.post.hidden?(this.post.hideContent(!1),e=this.el.getBoundingClientRect().left+window.pageXOffset,this.post.hideContent(!0)):e=this.el.getBoundingClientRect().left+window.pageXOffset,this._useCache&&(this._glob._offset=e)),Object.defineProperty(this,"_offset",{value:e}),e},enumerable:!0,configurable:!0}}),pi.prototype=Object.create(hi.prototype,{getFollow:{value:function(e){var t=this.post.allImages.data[e?this.idx+1:this.idx-1];return t?t:e?this.getFollowPost(!0):this.post.images.last||this.getFollowPost(!1)}},_useCache:{value:!1},_getImageSize:{value:function(){var e=new Image;return e.src=this.el.src,[e.width,e.height]}},_getImageSrc:{value:function(){return this.el.src}},_getImageParent:{value:function(){return this.el.parentNode}}}),fi.viewer=null,fi.prototype=Object.create(hi.prototype,{data:{get:function(){var e=this.el,t=this._glob.canvas,i=t.width=e.naturalWidth,n=t.height=e.naturalHeight,r=t.getContext("2d");return r.drawImage(e,0,0),[r.getImageData(0,0,i,n).data.buffer,i,n]}},hash:{configurable:!0,get:function(){var e=null;return this.src in this._glob.storage&&(e=this._glob.storage[this.src]),Object.defineProperty(this,"hash",{writable:!0,value:e}),e}},info:{configurable:!0,get:function(){var e=Zi.getFileInfo(Zi.getImgWrap(this.el.parentNode));return Object.defineProperty(this,"info",{value:e}),e}},weight:{configurable:!0,get:function(){var e,t=0;return this.info&&(e=this.info.match(/(\d+(?:[\.,]\d+)?)\s*([mk])?i?[b]/i),t="M"===e[2]?1e3*e[1]|0:e[2]?e[1]:Math.round(e[1]/1e3)),Object.defineProperty(this,"weight",{value:t}),t}},getFollow:{value:function(e){var t=this.post.images.data[e?this.idx+1:this.idx-1];return t?t:e?this.post.allImages.data[0]||this.getFollowPost(!0):this.getFollowPost(!1)}},getHash:{value:function(){var e=this;return new Promise(function(t){null!==e.hash?t(e.hash):!function(){var i=function(i){e._glob.workers.run(i,[i[0]],function(i){t(e.hash=i.hash)})};if(Zi.fch)Ot(e.el.src).then(function(n){n||(e.hash=-1,t(-1));var r=n.buffer;i([r,e.el.naturalWidth,e.el.naturalHeight],[r])});else if(e.el.naturalWidth+e.el.naturalHeight===0)t(e.hash=-1);else{var n=e.data;i(n,[n[0]])}}()})}},_glob:{value:Object.defineProperties({_expAttach:null,_offset:-1,_saveStorage:function(){zi["de-imageshash"]=JSON.stringify(this.storage)},_clearWorkers:function(){this.workers.clear(),delete this.workers}},{canvas:{get:function(){var e=Cn.createElement("canvas");return Object.defineProperty(this,"canvas",{value:e}),e},enumerable:!0,configurable:!0},storage:{get:function(){var e=null;try{e=JSON.parse(zi["de-imageshash"])}finally{return e||(e={}),hn.addCompleteFunc(this._saveStorage.bind(this)),Object.defineProperty(this,"storage",{value:e}),e}},enumerable:!0,configurable:!0},workers:{get:function(){var e=new Rt(4,di,jn);return hn.addCompleteFunc(this._clearWorkers.bind(this)),Object.defineProperty(this,"workers",{value:e,configurable:!0}),e},enumerable:!0,configurable:!0}})},_callback:{writable:!0,value:null},_processing:{writable:!0,value:!1},_needToHide:{writable:!0,value:!1},_useCache:{configurable:!0,get:function(){var e=!this.inPview&&!this.post.isOp&&!this.post.prev.omitted&&!this.post.prev.isOp&&this.post.count>4;return Object.defineProperty(this,"_useCache",{value:e}),e}},_getImageSize:{value:function(){if(this.info){var e=this.info.match(/(\d+)\s?[x?]\s?(\d+)/);return[e[1],e[2]]}return[-1,-1]}},_getImageSrc:{value:function(){return Zi.getImgLink(this.el).href}},_getImageParent:{value:function(){return Zi.getImgParent(this.el.parentNode)}}}),vi.hiddenNums=[],vi.getWrds=function(e){return e.replace(/\s+/g," ").replace(/[^a-z- ]/gi,"").substring(0,800).split(" ")},vi.findSameText=function(e,t,i,n,r){var s,a=vi.getWrds(r.text),o=a.length,l=i.length,d=l,u=l,c=0;if(!(.4*d>o||o>3*d)){for(;l--;)if(d>6&&i[l].length<3)u--;else for(s=o;s--;)(a[s]===i[l]||i[l].match(/>>\d+/)&&a[s].match(/>>\d+/))&&c++;if(!(.4*u>c||o>3*u))return t?(r.setNote(""),r.spellHidden||r.setVisib(!1),r.userToggled&&(delete Ki[en][r.num],r.userToggled=!1)):(r.setUserVisib(!0,n,!0),r.setNote("similar to >>"+e)),!1}},vi.sizing=Object.defineProperties({handleEvent:function(){this.wHeight=Cn.documentElement.clientHeight,this.wWidth=Cn.documentElement.clientWidth},_enabled:!1},{dPxRatio:{get:function(){var e=window.devicePixelRatio||1;return Object.defineProperty(this,"dPxRatio",{value:e}),e},enumerable:!0,configurable:!0},wHeight:{get:function(){var e=Cn.documentElement.clientHeight;return this._enabled||(window.addEventListener("resize",this,!1),this._enabled=!0),Object.defineProperties(this,{wWidth:{writable:!0,configurable:!0,value:Cn.documentElement.clientWidth},wHeight:{writable:!0,configurable:!0,value:e}}),e},enumerable:!0,configurable:!0},wWidth:{get:function(){var e=Cn.documentElement.clientWidth;return this._enabled||(window.addEventListener("resize",this,!1),this._enabled=!0),Object.defineProperties(this,{wWidth:{writable:!0,configurable:!0,value:e},wHeight:{writable:!0,configurable:!0,value:Cn.documentElement.clientHeight}}),e},enumerable:!0,configurable:!0}}),vi.prototype=Object.defineProperties({banned:!1,deleted:!1,hasRef:!1,hidden:!1,imagesExpanded:!1,inited:!0,isPview:!1,kid:null,next:null,omitted:!1,parent:null,prev:null,spellHidden:!1,sticked:!1,userToggled:!1,viewed:!1,addFuncs:function(){Ei(this,!0),Yt(this),Qi.addImgs&&gi(this.el),gn&&this.toggleImages(!0)},handleEvent:function(e){var t,i=e.target,n=e.type,r="mouseout"===n;if("click"===n){if(0!==e.button)return;switch(i.tagName){case"IMG":if(i.classList.contains("de-video-thumb")){if(3===Qi.addYouTube){var s=this.videos;s.currentLink.classList.add("de-current"),s.addPlayer(s.playerInfo,i.classList.contains("de-ytube")),k(e)}}else 0!==Qi.expandImgs&&this._clickImage(i,e);return;case"OBJECT":case"VIDEO":return void(0===Qi.expandImgs||Qi.webmControl&&e.clientY>i.getBoundingClientRect().top+parseInt(i.style.height,10)-30||this._clickImage(i,e));case"A":return void(i.classList.contains("de-video-link")?(this.videos.clickLink(i,Qi.addYouTube),k(e)):(t=i.parentNode,t===this.trunc?(this._getFull(t,!1),k(e),e.stopPropagation()):Qi.insertNum&&dn.form&&t===this._pref&&!/Reply|/.test(i.textContent)&&(k(e),e.stopPropagation(),dn.isQuick||tn&&dn.isHidden?dn.showQuickReply(this.isPview?this.getTopParent():this,this.num,!1,!0):tn?_(dn.txta,">>"+this.num):window.location=i.href.replace(/#i/,"#"))))}switch(Zi.mak&&i.classList.contains("expand-large-comment")&&(this._getFull(i,!1),k(e),e.stopPropagation()),i.className){case"de-btn-expthr":return this.thr.load(1,!1),w(this._menu),void(this._menu=null);case"de-btn-fav":return void this.thr.setFavorState(!0);case"de-btn-fav-sel":return void this.thr.setFavorState(!1);case"de-btn-hide":case"de-btn-hide-user":return this.isPview?(Wi[this.num].toggleUserVisib(),this.btns.firstChild.className="de-btn-hide-user",Wi[this.num].hidden?this.btns.classList.add("de-post-hide"):this.btns.classList.remove("de-post-hide")):this.toggleUserVisib(),w(this._menu),void(this._menu=null);case"de-btn-rep":return void dn.showQuickReply(this.isPview?this.getTopParent():this,this.num,!this.isPview,!1);case"de-btn-sage":return void ei(9,"",!1);case"de-btn-stick":case"de-btn-stick-on":return i.className=this.sticked?"de-btn-stick":"de-btn-stick-on",void(this.sticked=!this.sticked)}return void("de-menu-item"===i.classList[0]&&this._clickMenu(i))}switch("mouseover"===n&&Qi.expandImgs&&!i.classList.contains("de-img-full")&&(t=this.allImages.findImageByEl(i))&&(t.isImage||t.isVideo)&&(i.title=1===Qi.expandImgs?Ln.expImgInline[pn]:Ln.expImgFull[pn]),this._hasEvents?this.isPview&&r&&this._handleMouseEvents(e.relatedTarget,!1):(this._hasEvents=!0,this.el.addEventListener("click",this,!0),this.el.addEventListener("mouseout",this,!0)),i.classList[0]){case"de-btn-expthr":case"de-btn-hide":case"de-btn-hide-user":this._addButtonTitle(i);case"de-btn-src":return void(r?this._closeMenu(e.relatedTarget):this._menuDelay=setTimeout(this._addMenu.bind(this,i),Qi.linksOver));case"de-btn-rep":return this._addButtonTitle(i),void(r||(On=T()));case"de-menu":case"de-menu-item":return void(r?this._closeMenu(e.relatedTarget):clearTimeout(this._menuDelay));default:if(!Qi.linksNavig||"A"!==i.tagName||i.lchecked)return void(this.isPview&&!r&&this._handleMouseEvents(e.relatedTarget,!0));if(!i.textContent.startsWith(">>"))return void(i.lchecked=!0);i.className="de-link-pref "+i.className;case"de-link-ref":case"de-link-pref":Qi.linksNavig&&(r?(clearTimeout(this._linkDelay),this.kid?this.kid.markToDel():!this.isPview&&wi.top&&wi.top.markToDel()):(clearTimeout(wi.delTO),this._linkDelay=setTimeout(this._addPview.bind(this,i),Qi.linksOver)),k(e),e.stopPropagation())}},hideContent:function(e){e?this.el.classList.add("de-post-hide"):this.el.classList.remove("de-post-hide"),$i.Chrome&&(e?this.el.classList.remove("de-post-unhide"):this.el.classList.add("de-post-unhide"),bn||(bn=setTimeout(function(){Cn.head.insertAdjacentHTML("beforeend",'<style id="de-csshide" type="text/css">\n							.de-post-hide > '+Zi.qHide+" { display: none !important; }\n							.de-post-unhide > "+Zi.qHide+" { display: !important; }\n						</style>"),w(Cn.head.lastChild),bn=null},200)))},hideRefs:function(){Qi.hideRefPsts&&this.hasRef&&this.ref.forEach(function(e){var t=Wi[e];t&&!t.userToggled&&(t.setVisib(!0),t.setNote("reference to >>"+this.num),t.hideRefs())},this)},getAdjacentVisPost:function(e){for(var t=e?this.prev:this.next;t;)if(t.thr.hidden)t=e?t.thr.op.prev:t.thr.last.next;else{if(!t.hidden&&!t.omitted)return t;t=e?t.prev:t.next}return null},setNote:function(e){this.isOp?this.noteEl.textContent=e?"(autohide: "+e+")":"("+this.title+")":Qi.delHiddPost||(this.noteEl.textContent=e?"autohide: "+e:"")},select:function(){this.isOp?(this.hidden&&this.thr.el.previousElementSibling.classList.add("de-selected"),this.thr.el.classList.add("de-selected")):this.el.classList.add("de-selected")},setUserVisib:function(e,t,i){this.setVisib(e),this.btns.firstChild.className="de-btn-hide-user",this.userToggled=!0,e?(this.setNote(""),this.hideRefs()):this.unhideRefs(),Ki[en][this.num]=[+!e,t],i&&(Yi["__de-post"]=JSON.stringify({brd:en,date:t,isOp:this.isOp,num:this.num,hide:e,title:this.isOp?this.title:""}),Yi.removeItem("__de-post"))},setVisib:function(e){var t,i,n=this;if(this.hidden!==e){if(this.isOp)return this.hidden=this.thr.hidden=e,i=this.thr.el,i.style.display=e?"none":"",t=a("de-thr-hid-"+this.num),void(t?t.style.display=e?"":"none":(i.insertAdjacentHTML("beforebegin",'<div class="'+Zi.cReply+' de-thr-hid" id="de-thr-hid-'+this.num+'">'+Ln.hiddenThrd[pn]+' <a href="#">'+this.num+'</a> <span class="de-thread-note"></span></div>'),t=l("a",i.previousSibling),t.onclick=t.onmouseover=t.onmouseout=function(e){switch(e.type){case"click":return n.toggleUserVisib(),void k(e);case"mouseover":return void(n.thr.el.style.display="");default:n.hidden&&(n.thr.el.style.display="none")}}));Qi.delHiddPost?e?this.wrap.classList.add("de-hidden"):this.hidden&&this.wrap.classList.remove("de-hidden"):(e||this.setNote(""),e&&(this._pref.onmouseover=this._pref.onmouseout=function(e){return n.hideContent("mouseout"===e.type)})),this.hidden=e,this.hideContent(e),Qi.strikeHidd&&setTimeout(this._strikePostNum.bind(this,e),50)}},spellHide:function(e){this.spellHidden=!0,this.userToggled||(tn&&!this.deleted&&(Ji[this.count]=0),this.hidden||this.hideRefs(),this.setVisib(!0),this.setNote(e))},spellUnhide:function(){this.spellHidden=!1,this.userToggled||(tn&&!this.deleted&&(Ji[this.count]=1),this.setVisib(!1),this.unhideRefs())},toggleImages:function(e){for(var t,i=this.allImages[Symbol.iterator]();!(t=i.next()).done;){var n=t.value;n.isImage&&n.expanded^e&&(e?n.expand(!0,null):n.collapse(null))}this.imagesExpanded=e},toggleUserVisib:function(){var e=this.isOp,t=!this.hidden,i=Date.now();this.setUserVisib(t,i,!0),e&&(t?Gi[en][this.num]=this.title:delete Gi[en][this.num],K(!1)),J(!0)},unhideRefs:function(){Qi.hideRefPsts&&this.hasRef&&this.ref.forEach(function(e){var t=Wi[e];t&&t.hidden&&!t.userToggled&&!t.spellHidden&&(t.setVisib(!1),t.unhideRefs())})},unselect:function(){if(this.isOp){var e=a("de-thr-hid-"+this.num);e&&e.classList.remove("de-selected"),this.thr.el.classList.remove("de-selected")}else this.el.classList.remove("de-selected")},updateMsg:function(e){var t=Zi.dobr?this.msg.firstElementChild:this.msg,n=s("de-video-ext",t),r=i(":not(.de-video-ext) > .de-video-link",t);t.parentNode.replaceChild(e,t),Object.defineProperties(this,{msg:{configurable:!0,value:e},trunc:{configurable:!0,value:null}}),bi.remove(this),this.videos.updatePost(r,i('a[href*="youtu"]',e),!1),n&&e.appendChild(n),this.addFuncs(),hn.check(this),kt(a("de-alert-load-fullmsg"))},_hasEvents:!1,_linkDelay:0,_menu:null,_menuDelay:0,_selRange:null,_selText:"",_addButtonTitle:function(e){if(!e.hasTitle)switch(e.hasTitle=!0,e.className){case"de-btn-hide":case"de-btn-hide-user":return void(e.title=Ln.togglePost[pn]);case"de-btn-expthr":return void(e.title=Ln.expandThrd[pn]);case"de-btn-rep":e.title=Ln.replyToPost[pn]}},_addMenu:function(e){var t,i=e.getBoundingClientRect(),n=!1,r="de-menu "+Zi.cReply,s=window.pageXOffset;switch(e.getAttribute("de-menu")){case"hide":if(!Qi.menuHiddBtn)return;t=this._addMenuHide();break;case"expand":t='<span class="de-menu-item" info="thr-exp">'+Ln.selExpandThr[pn].join('</span><span class="de-menu-item" info="thr-exp">')+"</span>";break;case"imgsrc":n=!0,r+=" de-imgmenu",t=this._addMenuImgSrc(e)}Cn.body.insertAdjacentHTML("beforeend",'<div class="'+r+'" style="position: absolute; '+(n?"left: "+(i.left+s):"right: "+(Cn.documentElement.clientWidth-i.right-s))+"px; top: "+(window.pageYOffset+i.bottom)+'px;">'+t+"</div>"),this._menu&&(clearTimeout(this._menuDelay),w(this._menu)),this._menu=Cn.body.lastChild,this._menu.addEventListener("click",this,!1),this._menu.addEventListener("mouseover",this,!1),this._menu.addEventListener("mouseout",this,!1)},_addMenuHide:function(){var e,t,i="",n=function(e){i+='<span info="spell-'+e+'" class="de-menu-item">'+Ln.selHiderMenu[e][pn]+"</span>"};return e=$i.Presto?Cn.getSelection():window.getSelection(),t=e.toString(),t&&(this._selText=t,this._selRange=e.getRangeAt(0),n("sel")),this.posterName&&n("name"),this.posterTrip&&n("trip"),this.images.contains?(n("img"),n("ihash")):n("noimg"),n(this.text?"text":"notext"),i},_addMenuImgSrc:function(e){var t=e.nextSibling.href+'" target="_blank">'+Ln.search[pn],i=Cn.body.getAttribute("de-image-search"),n="";return i&&(i=i.split(";"),i.forEach(function(e){var i=e.split(",");n+='<a class="de-src'+i[0]+(i[1]?'" href="'+i[1]:'" onclick="de_isearch(event, \''+i[0]+'\')" de-url="')+t+i[0]+"</a>"})),'<a class="de-menu-item de-imgmenu de-src-iqdb" href="http://iqdb.org/?url='+t+'IQDB</a><a class="de-menu-item de-imgmenu de-src-tineye" href="http://tineye.com/search/?url='+t+'TinEye</a><a class="de-menu-item de-imgmenu de-src-google" href="http://google.com/searchbyimage?image_url='+t+'Google</a><a class="de-menu-item de-imgmenu de-src-saucenao" href="http://saucenao.com/search.php?url='+t+"SauceNAO</a>"+n},_addPview:function(e){var t=(e.pathname.match(/.+?\/[^\d]*(\d+)/)||[,Zi.getPostEl(e).post.tNum])[1],i=(e.textContent.trim().match(/\d+$/)||[t])[0],n=this.isPview?this.kid:wi.top;n&&n.num===i?(wi.del(n.kid),_i(e,n.el,Qi.animation),n.parent.num!==this.num&&(Mn(r("de-link-pview",n.el),function(e){e.classList.remove("de-link-pview")}),n._markLink(this.num)),this.kid=n,n.parent=this):Qi.noNavigHidd&&Wi[i]&&Wi[i].hidden||(this.kid=new wi(this,e,t,i))},_clickImage:function(e,t){var i;if(e.classList.contains("de-img-full")){if(!this.allImages.findImageByEl(e.previousSibling.firstElementChild).collapse(t))return}else{if(!(i=this.allImages.findImageByEl(e))||!i.isImage&&!i.isVideo)return;i.expand(1===Qi.expandImgs^t.ctrlKey,t)}k(t),t.stopPropagation()},_clickMenu:function(e){switch(w(this._menu),this._menu=null,e.getAttribute("info")){case"spell-sel":var t=this._selRange.startContainer,i=this._selRange.endContainer;return 3===t.nodeType&&(t=t.parentNode),3===i.nodeType&&(i=i.parentNode),void($i.matchesSelector(t,Zi.qMsg+" *")&&$i.matchesSelector(i,Zi.qMsg+" *")||$i.matchesSelector(t,"."+Zi.cSubj)&&$i.matchesSelector(i,"."+Zi.cSubj)?this._selText.contains("\n")?ei(1,"/"+N(this._selText).replace(/\r?\n/g,"\\n")+"/",!1):ei(0,this._selText.replace(/\)/g,"\\)").toLowerCase(),!1):(cn.innerHTML="",cn.appendChild(this._selRange.cloneContents()),ei(2,"/"+N(cn.innerHTML.replace(/^<[^>]+>|<[^>]+>$/g,""))+"/",!1)));case"spell-name":return void ei(6,this.posterName.replace(/\)/g,"\\)"),!1);case"spell-trip":return void ei(7,this.posterTrip.replace(/\)/g,"\\)"),!1);case"spell-img":var n=this.images.first,r=n.weight,s=n.width,a=n.height;return void ei(8,[0,[r,r],[s,s,a,a]],!1);case"spell-ihash":return void this.images.first.getHash(function(e){ei(4,e,!1)});case"spell-noimg":return void ei(264,"",!0);case"spell-text":for(var o=this.num,l=this.hidden,d=vi.getWrds(this.text),u=Date.now(),c=un.firstThr.op;c;c=c.next)vi.findSameText(o,l,d,u,c);return void J(!0);case"spell-notext":return void ei(267,"",!0);case"thr-exp":this.thr.load(parseInt(e.textContent,10),!1)}},_closeMenu:function(e){var t=this;clearTimeout(this._menuDelay),!this._menu||e&&"de-menu-item"===e.className||(this._menuDelay=setTimeout(function(){w(t._menu),t._menu=null},75))},_getFull:function(e,t){var i=this;return Zi.dobr?(w(e.nextSibling),w(e.previousSibling),w(e),void(t?this.msg.replaceChild(n(".alternate > div",this.el),this.msg.firstElementChild):this.updateMsg(n(".alternate > div",this.el)))):Zi.mak?(w(e.previousSibling),e.previousSibling.style.display="",void w(e)):(t||_t(Ln.loading[pn],"load-fullmsg",!0),void Qt(Zi.getThrdUrl(en,this.tNum)).then(function(t){if(i.isOp)i.updateMsg(Oi(n(Zi.qMsg,t))),w(e);else for(var r=0,s=Zi.getPosts(t),a=s.length;a>r;r++)if(i.num===Zi.getPNum(s[r]))return i.updateMsg(Oi(n(Zi.qMsg,s[r]))),void w(e)},jn))},_markLink:function(e){Mn(i('a[href*="'+e+'"]',this.el),function(e,t){t.textContent===">>"+e&&t.classList.add("de-link-pview")}.bind(null,e))},_strikePostNum:function(e){var t,r=this.num;e?vi.hiddenNums.push(+r):(t=vi.hiddenNums.indexOf(+r),-1!==t&&vi.hiddenNums.splice(t,1)),Mn(i('a[href*="#'+r+'"]',un.el),e?function(e){if(e.classList.add("de-link-hid"),Qi.removeHidd&&e.classList.contains("de-link-ref")){var t=e.parentNode;n(".de-link-ref:not(.de-link-hid)",t)||(t.style.display="none")}}:function(e){if(e.classList.remove("de-link-hid"),Qi.removeHidd&&e.classList.contains("de-link-ref")){var t=e.parentNode;n(".de-link-ref:not(.de-link-hid)",t)&&(t.style.display="")}})}},{html:{get:function(){return bi.get(this).html},enumerable:!0,configurable:!0},images:{get:function(){var e=new yi(this);return Object.defineProperty(this,"images",{value:e}),e},enumerable:!0,configurable:!0},allImages:{get:function(){var e=new Ai(this);return Object.defineProperty(this,"allImages",{value:e}),e},enumerable:!0,configurable:!0},mp3Obj:{get:function(){var e=p("div",{"class":"de-mp3"},null);return u(this.msg,e),Object.defineProperty(this,"mp3Obj",{value:e}),e},enumerable:!0,configurable:!0},msg:{get:function(){var e=n(Zi.qMsg,this.el);return Object.defineProperty(this,"msg",{configurable:!0,value:e}),e},enumerable:!0,configurable:!0},nextInThread:{get:function(){var e=this.next;return e&&0!==e.count?e:null},enumerable:!0,configurable:!0},nextNotDeleted:{get:function(){for(var e=this.nextInThread;e&&e.deleted;)e=e.nextInThread;return e},enumerable:!0,configurable:!0},noteEl:{get:function(){var e;return this.isOp?e=this.thr.el.previousElementSibling.lastChild:(this.btns.insertAdjacentHTML("beforeend",'<span class="de-post-note"></span>'),e=this.btns.lastChild),Object.defineProperty(this,"noteEl",{value:e}),e},enumerable:!0,configurable:!0},posterName:{get:function(){return bi.get(this).posterName},enumerable:!0,configurable:!0},posterTrip:{get:function(){return bi.get(this).posterTrip},enumerable:!0,configurable:!0},subj:{get:function(){return bi.get(this).subj},enumerable:!0,configurable:!0},text:{get:function(){return bi.get(this).text},enumerable:!0,configurable:!0},title:{get:function(){return bi.get(this).title},enumerable:!0,configurable:!0},tNum:{get:function(){return this.thr.num},enumerable:!0,configurable:!0},topCoord:{get:function(){var e=this.isOp&&this.hidden?this.thr.el.previousElementSibling:this.el;return e.getBoundingClientRect().top},enumerable:!0,configurable:!0},trunc:{get:function(){var e=Zi.qTrunc&&n(Zi.qTrunc,this.el),t=null;return e&&/long|full comment|gekurzt||||/i.test(e.textContent)&&(t=e),Object.defineProperty(this,"trunc",{configurable:!0,value:t}),t},enumerable:!0,configurable:!0},videos:{get:function(){var e=new Ut(this);return Object.defineProperty(this,"videos",{value:e}),e},enumerable:!0,configurable:!0},wrap:{get:function(){var e=Zi.getWrap(this.el,this.isOp);return Object.defineProperty(this,"wrap",{value:e}),e},enumerable:!0,configurable:!0}}),bi.data={},bi.purgeTO=null,bi.get=function(e){var t=e.num,i=bi.data[t];return i||(bi.data[t]=i=new bi(e)),null===bi.purgeTO&&(bi.purgeTO=setTimeout(bi.purge,6e4)),i},bi.purge=function(){null!==bi.purgeTO&&(clearTimeout(bi.purgeTO),bi.purgeTO=null),bi.data={}},bi.remove=function(e){bi.data[e.num]=null},bi.prototype=Object.defineProperties({},{html:{get:function(){var e=this.el.innerHTML;return Object.defineProperty(this,"html",{value:e}),e},enumerable:!0,configurable:!0},posterName:{get:function(){var e=n(Zi.qName,this.el),t=e?e.textContent.trim():"";return Object.defineProperty(this,"posterName",{value:t}),t},enumerable:!0,configurable:!0},posterTrip:{get:function(){var e=s(Zi.cTrip,this.el),t=e?e.textContent:"";return Object.defineProperty(this,"posterTrip",{value:t}),t},enumerable:!0,configurable:!0},subj:{get:function(){var e=s(Zi.cSubj,this.el),t=e?e.textContent:"";return Object.defineProperty(this,"subj",{value:t}),t},enumerable:!0,configurable:!0},text:{get:function(){var e=this.post.msg.innerHTML.replace(/<\/?(?:br|p|li)[^>]*?>/gi,"\n").replace(/<[^>]+?>/g,"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&nbsp;/g,"");return Object.defineProperty(this,"text",{value:e}),e},enumerable:!0,configurable:!0},title:{get:function(){var e=this.subj||this.text.substring(0,70).replace(/\s+/g," ");return Object.defineProperty(this,"title",{value:e}),e},enumerable:!0,configurable:!0}}),yi.prototype=Object.defineProperties(function(){var e={};return e[Symbol.iterator]=regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.data,"t21",1);case 1:case"end":return t.stop()}},t,this)}),_defineProperty(e,"findImageByEl",function(e){var t=this.els.indexOf(e);return-1===t?null:this.data[t]}),e}(),{first:{get:function(){return this.data[0]},enumerable:!0,configurable:!0},last:{get:function(){return this.data[this.length-1]},enumerable:!0,configurable:!0}}),Ai.prototype=Object.defineProperties(function(){var e={};return e[Symbol.iterator]=regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e._attachedImages,"t22",1);case 1:return t.delegateYield(e.data,"t23",2);case 2:case"end":return t.stop()}},t,this)}),_defineProperty(e,"findImageByEl",function(e){var t=this._attachedImages.findImageByEl(e);if(t)return t;var i=this.els.indexOf(e);if(i<this.data.length)return this.data[i];for(var n,r=this[Symbol.iterator]();!(n=r.next()).done;)if(t=n.value,this.data.length>i)return t}),e}(),{first:{get:function(){return this._attachedImages.first||this._images[0]},enumerable:!0,configurable:!0},last:{get:function(){return 0===this.length?this._attachedImages.last:this.data[this.length-1]},enumerable:!0,configurable:!0}}),wi.clearCache=function(){wi.prototype._cache={}},wi.del=function(e){if(e){var t,i=fi.viewer&&fi.viewer.data.post;e.parent.kid=null,e._link.classList.remove("de-link-parent"),e.parent.isPview||(wi.top=null);do clearTimeout(e._readDelay),i===e&&(fi.viewer.close(null),fi.viewer=i=null),t=e.el,Qi.animation?($i.animEvent(t,w),t.classList.add("de-pview-anim"),t.style[$i.animName]="de-post-close-"+(t.aTop?"t":"b")+(t.aLeft?"l":"r")):w(t);while(e=e.kid)}},wi.mouseEnter=function(e){e.kid?e.kid.markToDel():clearTimeout(wi.delTO)},wi.delTO=0,wi.top=null,wi.prototype=Object.create(vi.prototype,{isPview:{value:!0},getTopParent:{value:function(){for(var e=this.parent;e.isPview;)e=e.parent;return e}},markToDel:{value:function(){clearTimeout(wi.delTO);var e,t=this;do t.sticked&&(e=t);while(t=t.kid);(!e||e.kid)&&(wi.delTO=setTimeout(wi.del,Qi.linksOut,e?e.kid:this))}},_loaded:{value:!1,writable:!0},_cache:{value:{},writable:!0},_readDelay:{value:0,writable:!0},_handleMouseEvents:{value:function(e,t){(!e||e!==this.el&&!this.el.contains(e))&&(t?wi.mouseEnter(this):!wi.top||this._menu&&(this._menu===e||this._menu.contains(e))||wi.top.markToDel())}},_onerror:{value:function(e){wi.del(this);var t=e instanceof zt&&404===e.code?Ln.postNotFound[pn]:j(e);this._showText(t)}},_onload:{value:function(e,t){var i,n=this.parent,r=n.num,a=this._cache[e+this.tNum]=new xi(t,e,this.tNum),o=a.getPost(this.num);!o||en===e&&o.hasRef&&-1!==o.ref.indexOf(r)||(o.hasRef?i=s("de-refmap",o.el):(o.msg.insertAdjacentHTML("afterend",'<div class="de-refmap"></div>'),i=o.msg.nextSibling),i.insertAdjacentHTML("afterbegin",'<a class="de-link-ref" href="'+Zi.getThrdUrl(e,n.tNum)+Zi.anchor+r+'">&gt;&gt;'+(en===e?"":"/"+en+"/")+r+'</a><span class="de-refcomma">, </span>')),n.kid===this&&(wi.del(this),o?(this._loaded=!0,this._showPost(o)):this._showText(Ln.postNotFound[pn]))}},_showPost:{value:function(e){var t,a=this.el=e.el.cloneNode(!0),o='<span class="de-btn-rep" title="'+Ln.replyToPost[pn]+'"></span>'+(e.sage?'<span class="de-btn-sage" title="SAGE"></span>':"")+'<span class="de-btn-stick" title="'+Ln.attachPview[pn]+'"></span>'+(e.deleted?"":'<span style="margin-right: 4px; vertical-align: 1px; color: #4f7942; font: bold 11px tahoma; cursor: default;">'+(e.isOp?"OP":e.count+1)+"</span>");a.post=this,a.className=Zi.cReply+" de-pview"+(e.viewed?" de-viewed":""),a.style.display="",2===Qi.linksNavig&&this._markLink(this.parent.num),this._pref=n(Zi.qRef,a),this._link.classList.add("de-link-parent"),e.inited?(this.btns=t=s("de-post-btns",a),this.isOp=e.isOp,t.classList.remove("de-post-counter"),e.hidden&&t.classList.add("de-post-hide"),t.innerHTML='<span class="de-btn-hide'+(e.userToggled?"-user":"")+'" de-menu="hide" title="'+Ln.togglePost[pn]+'"></span>'+o,Mn(i((!tn&&e.isOp?Zi.qOmitted+", ":"")+".de-img-full, .de-after-fimg",a),w),Mn(i(Zi.qThumbImages,a),function(e){e.parentNode.style.display=""
}),t=s("de-link-parent",a),t&&t.classList.remove("de-link-parent"),e.videos.hasLinks&&(null!==e.videos.playerInfo&&Object.defineProperty(this,"videos",{value:new Ut(this,s("de-video-obj",a),e.videos.playerInfo)}),this.videos.updatePost(r("de-video-link",e.el),r("de-video-link",a),!0)),Qi.addImgs&&Mn(r("de-img-pre",a),function(e){e.style.display=""}),Qi.markViewed&&(this._readDelay=setTimeout(function(e){e.viewed||(e.el.classList.add("de-viewed"),e.viewed=!0);var t=(zi["de-viewed"]||"").split(",");t.push(e.num),zi["de-viewed"]=t},e.text.length>100?2e3:500,e))):(this._pref.insertAdjacentHTML("afterend",'<span class="de-post-btns">'+o+"</span"),Yt(this),Ut.parseLinks(this),Qi.addImgs&&gi(a),Qi.imgSrcBtns&&mi(a)),a.addEventListener("click",this,!0),this._showPview(a)}},_showPview:{value:function(e){this.parent.isPview?wi.del(this.parent.kid):(wi.del(wi.top),wi.top=this),this.parent.kid=this,e.addEventListener("mouseover",this,!0),e.addEventListener("mouseout",this,!0),un.el.appendChild(e),_i(this._link,e,!1),Qi.animation&&($i.animEvent(e,function(e){e.classList.remove("de-pview-anim"),e.style[$i.animName]=""}),e.classList.add("de-pview-anim"),e.style[$i.animName]="de-post-open-"+(e.aTop?"t":"b")+(e.aLeft?"l":"r"))}},_showText:{value:function(e){this._showPview(this.el=h('<div class="'+Zi.cReply+' de-pview-info de-pview">'+e+"</div>"))}}}),xi.prototype=Object.defineProperties({getPost:function(e){if(e===this._tNum)return this._op;var t=this._posts[e];return t&&!t.pvInited&&(t.el=Oi(t.el),delete t.msg,t.hasRef&&Ti(t,this._tUrl),t.pvInited=!0),t}},{_op:{get:function(){var e,t,i,r,s,a,o,l,d=this._opObj;if(d.el=Oi(Zi.getOp(this._thr)),d.msg=n(Zi.qMsg,d.el),this._brd===en&&(l=Wi[this._tNum])){for(a=d.ref,o=[],e=t=0,s=l.ref,i=s.length;i>t;++t){if(r=s[t],a[e]===r)e++;else if(-1!==a.indexOf(r))continue;o.push(r)}for(i=a.length;i>e;e++)o.push(a[e]);d.ref=o,0!==o.length&&(d.hasRef=!0,Ti(d,this._tUrl))}else d.hasRef&&Ti(d,this._tUrl);return Object.defineProperty(this,"_op",{value:d}),d},enumerable:!0,configurable:!0}}),Si.clearPostsMark=function(){un.firstThr.clearPostsMarks()},Si.loadNewPosts=function(e){e&&k(e),_t(Ln.loading[pn],"newposts",!0),un.firstThr.clearPostsMarks(),rn.forceLoad()},Si.prototype=Object.defineProperties({hasNew:!1,hidden:!1,loadedOnce:!1,next:null,clearPostsMarks:function(){this.hasNew&&(this.hasNew=!1,Mn(i(".de-new-post",this.el),function(e){e.classList.remove("de-new-post")}),Cn.removeEventListener("click",Si.clearPostsMark,!0))},deletePost:function(e,t,i){var r,s=e.count,a=0;do i?(w(e.wrap),delete Wi[e.num],e.hidden&&e.unhideRefs(),Ei(e,!1),(e.prev.next=e.next)&&(e.next.prev=e.prev),this.last===e&&(this.last=e.prev)):(e.deleted=!0,e.btns.classList.remove("de-post-counter"),e.btns.classList.add("de-post-deleted"),e.wrap.classList.add("de-post-removed"),(n('input[type="checkbox"]',e.el)||{}).disabled=!0),e=e.nextNotDeleted,a++;while(t&&e);for(hn.hasNumSpell||Ji.splice(s,a),r=e;r;r=r.nextInThread)r.count-=a;return this.pcount-=a,e},load:function(e,t){var i=this,n=void 0===arguments[2]?!0:arguments[2];return n&&_t(Ln.loading[pn],"load-thr",!0),Qt(Zi.getThrdUrl(en,this.num)).then(function(n){return i.loadFromForm(e,t,n)},function(e){return _t(j(e),"load-thr",!1)})},loadFromForm:function(e,t,i){var r,o=this,l=Zi.getPosts(i),d=this.op,u=this.el,c=s("de-expand",u),h=1===e?0:Math.max(l.length-e,0);t&&(this.next?r=this.next.topCoord:t=!1),dn.closeQReply(),w(n(Zi.qOmitted+", .de-omitted",u)),this.loadedOnce||(d.trunc&&d.updateMsg(Oi(n(Zi.qMsg,i))),d.ref=[],this.loadedOnce=!0),this._checkBans(d,i),this._parsePosts(l),u.style.counterReset="de-cnt "+(h+1),this._processExpandThread(l,1===e?l.length:e)?w(c):c?c!==u.lastChild&&u.appendChild(c):(u.insertAdjacentHTML("beforeend",'<span class="de-expand">[<a href="'+Zi.getThrdUrl(en,this.num)+Zi.anchor+this.last.num+'">'+Ln.collapseThrd[pn]+"</a>]</span>"),u.lastChild.onclick=function(e){k(e),o.load(Rn,!0)}),0!==h&&d.el.insertAdjacentHTML("afterend",'<div class="de-omitted">'+h+"</div>"),t&&scrollTo(window.pageXOffset,window.pageYOffset-(r-this.next.topCoord)),kt(a("de-alert-load-thr"))},loadNew:E(regeneratorRuntime.mark(function Wn(e){var t,i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!Zi.dobr||!e){n.next=16;break}return n.next=3,Vt("/api/thread/"+en+"/"+tn+".json");case 3:if(t=n.sent){n.next=6;break}return n.abrupt("return",0);case 6:if(!t.error){n.next=8;break}throw new zt(0,t.message);case 8:if(i._lastModified===t.last_modified&&i.pcount===t.posts_count){n.next=15;break}return i._lastModified=t.last_modified,n.next=12,i.loadNew(!1);case 12:return n.abrupt("return",n.sent);case 15:return n.abrupt("return",0);case 16:return n.next=18,Qt(Zi.getThrdUrl(en,tn));case 18:return n.t24=n.sent,n.abrupt("return",i.loadNewFromForm(n.t24));case 20:case"end":return n.stop()}},Wn,this)})),loadNewFromForm:function(e){this._checkBans(un.firstThr.op,e);var t=dn.isVisible?dn.topCoord:null,n=this._parsePosts(Zi.getPosts(e)),r=_slicedToArray(n,2),s=r[0],o=r[1];return null!==t&&scrollTo(window.pageXOffset,window.pageYOffset-(t-dn.topCoord)),0!==s&&(a("de-panel-info").firstChild.textContent=this.pcount+"/"+i(Zi.qThumbImages,un.el).length),o},setFavBtn:function(e){var t=s(e?"de-btn-fav":"de-btn-fav-sel",this.op.btns);t&&(t.className=e?"de-btn-fav-sel":"de-btn-fav",t.title=e?Ln.delFav[pn]:Ln.addFav[pn])},setFavorState:function(e){var t=this;this.setFavBtn(e),V().then(function(i){var n=Zi.host,r=en,s=t.num;e?(i[n]||(i[n]={}),i[n][en]||(i[n][en]={}),i[n][en].url=Zi.prot+"//"+Zi.host+Zi.getPageUrl(en,0),i[n][en][s]={cnt:t.pcount,"new":0,txt:t.op.title,url:Zi.getThrdUrl(en,s)}):Z(i,n,r,s,!1),X(i)})},updateHidden:function(e){var t,i=Date.now(),n=this;do t=n.num in e,n.hidden^t&&(t?(n.op.setUserVisib(!0,i,!1),e[n.num]=n.op.title):n.hidden&&n.op.setUserVisib(!1,i,!1));while(n=n.next)},_lastModified:"",_addPost:function(e,t,i,n){var r,s=Zi.getPNum(t),a=Zi.getWrap(t,!1);return t=Oi(t),Wi[s]=r=new vi(t,this,s,i,!1,n),Object.defineProperty(r,"wrap",{value:a}),e.appendChild(a),tn&&rn.focused&&Qi.animation&&($i.animEvent(r.el,function(e){e.classList.remove("de-post-new")}),r.el.classList.add("de-post-new")),Ut.parseLinks(r),Qi.imgSrcBtns&&mi(t),r.addFuncs(),jt(t),tn&&Qi.markNewPosts&&this._addPostMark(t),r},_addPostMark:function(e){rn.focused?this.clearPostsMarks():(this.hasNew||(this.hasNew=!0,Cn.addEventListener("click",Si.clearPostsMark,!0)),e.classList.add("de-new-post"))},_checkBans:function(e,t){var r,s,a,o,l,d;if(Zi.qBan)for(o=0,l=i(Zi.qBan,t),d=l.length;d>o;++o)s=l[o],r=Zi.getPostEl(s),a=r?Wi[Zi.getPNum(r)]:e,a&&!a.banned&&(n(Zi.qBan,a.el)||a.msg.appendChild(s),a.banned=!0)},_importPosts:function(e,t,i,n){var r,s,a=Cn.createDocumentFragment();for(r=s=n-i;n>i;++i)e=this._addPost(a,t[i],i+1,e),s-=hn.check(e);return[r,s,a,e]},_parsePosts:function(e){var t,i,r,s,o,l=this,d=!1,u=0,h=0,p=e.length,f=this.lastNotDeleted;if(Zi.dobr||0!==f.count&&(f.count>p||Zi.getPNum(e[f.count-1])!==f.num)){for(r=null,f=this.op.nextNotDeleted,t=f.count-1;p>t&&f;)if(f.num!==Zi.getPNum(e[t]))if(+f.num>+Zi.getPNum(e[t])){r||(r=f.prev),i=0;do i++,t++;while(+Zi.getPNum(e[t])<+f.num);for(s=this._importPosts(f.prev,e,t-i,t),u+=s[0],this.pcount+=s[0],h+=s[1],c(f.prev.wrap,s[2]),s[3].next=f,f.prev=s[3],o=f;o;o=o.nextInThread)o.count+=i}else r||(r=f),f=this.deletePost(f,!1,!tn);else t++,f=f.nextNotDeleted;if(t===p&&f&&this.deletePost(f,!0,!tn),r&&hn.hasNumSpell){for(Zt(),f=r.nextInThread;f;f=f.nextInThread)hn.check(f);d=!0}if(0!==u)for(f=r;f;f=f.nextInThread)Ei(f,!0)}return p+1>this.pcount&&(s=this._importPosts(this.last,e,this.lastNotDeleted.count,p),u+=s[0],h+=s[1],this.el.appendChild(s[2]),this.last=s[3],this.pcount=p+1,d=!0),V().then(function(e){var t=Zi.host;if(e[t]&&e[t][en]){var i=e[t][en][l.op.num];if(i){var r=a("de-content-fav");r&&(r=n('.de-fav-current > .de-entry[de-num="'+l.op.num+'"] .de-fav-inf-old',r),r.textContent=l.pcount,r=r.nextElementSibling,r.style.display="none",r.textContent=0),i.cnt=l.pcount,i["new"]=0,B("DESU_Favorites",JSON.stringify(e))}}}),d&&hn.end(W),[u,h]},_processExpandThread:function(e,t){var i,r,s,a,o,l=this.op.next,d=1===this.pcount?0:this.last.count-l.count+1;if(d>t){for(;d--!==t;)l.wrap.classList.add("de-hidden"),l.omitted=!0,l=l.next;o=!1}else{if(!(t>d))return Rn>=t;for(r=Cn.createDocumentFragment(),s=this.op,a=e.length,i=Math.max(0,a-t),a-=d;a>i;++i)s=this._addPost(r,e[i],i+1,s),hn.check(s);c(this.op.wrap,r),s.next=l,l&&(l.prev=s),o=!0,t=Math.min(a+d,t)}for(;0!==d--;)l.trunc&&l.updateMsg(Oi(n(Zi.qMsg,e[l.count-1]))),l.omitted&&(l.wrap.classList.remove("de-hidden"),l.omitted=!1),o&&Ei(l,!0),l=l.next;return Rn>=t}},{lastNotDeleted:{get:function(){for(var e=this.last;e.deleted;)e=e.prev;return e},enumerable:!0,configurable:!0},nextNotHidden:{get:function(){for(var e=this.next;e&&e.hidden;e=e.next);return e},enumerable:!0,configurable:!0},prevNotHidden:{get:function(){for(var e=this.prev;e&&e.hidden;e=e.prev);return e},enumerable:!0,configurable:!0},topCoord:{get:function(){return this.op.topCoord},enumerable:!0,configurable:!0}}),Ri.doReplace=function(e){return fn?(Cn.body.insertAdjacentHTML("afterbegin",e.outerHTML),e=Cn.body.firstChild,window.addEventListener("load",function(e){for(;e.nextSibling;)w(e.nextSibling)}.bind(null,e),!1)):Zi.rep&&(e.insertAdjacentHTML("beforebegin",Ni(e.outerHTML)),e.style.display="none",e.id="de-dform-old",e=e.previousSibling,window.addEventListener("load",function(){w(a("de-dform-old"))},!1)),e},Ri.prototype={el:null,firstThr:null,isLight:!1,lastThr:null,tNums:null,addFormContent:function(e,t){var n,r,s=i(Zi.qThread,e),a=s.length;if(Mn(o("script",e),w),0===a&&(mn&&(s=i("div[de-thread]",Cn),a=s.length),0===a&&(s=this._parseThreads(e),a=s.length)),0!==a){if(t)for(;e.firstChild;)this.el.appendChild(e.firstChild);for(r=new Si(s[0],this.lastThr,this.isLight),null===this.firstThr&&(this.firstThr=r),n=1;a>n;++n)this.tNums.push(+r.num),r=new Si(s[n],r,this.isLight);this.tNums.push(+r.num),this.lastThr=r}},clear:function(){Mn(i('a[href^="blob:"]',this.el),function(e){window.URL.revokeObjectURL(e.href)}),this.firstThr=this.lastThr=null,this.tNums=[],this.el.innerHTML=""},hide:function(){this.el.style.display="none"},initAjax:function(){var e=this;if(2===Qi.ajaxReply){this.el.onsubmit=k;var t=n(Zi.qDelBut,this.el);t&&(t.onclick=function(t){k(t),dn.closeQReply(),_t(Ln.deleting[pn],"deleting",!0),new li(e.el,t.target,oi)})}else 1===Qi.ajaxReply&&(this.el.insertAdjacentHTML("beforeend",'<iframe name="de-iframe-pform" src="about:blank" style="display: none;"></iframe><iframe name="de-iframe-dform" src="about:blank" style="display: none;"></iframe>'),this.el.target="de-iframe-dform",this.el.onsubmit=function(){dn.closeQReply(),_t(Ln.deleting[pn],"deleting",!0)})},show:function(){this.el.style.display=""},_parseThreads:function(e){var t,i,n,r,s=[],a=In.slice.call(e.childNodes),o=Cn.createElement("div");for(i=0,n=a.length-1;n>i;++i)r=a[i],"HR"===r.tagName?(e.insertBefore(o,r),e.insertBefore(o.lastElementChild,r),t=o.lastElementChild,"BR"===t.tagName&&e.insertBefore(t,r),s.push(o),o=Cn.createElement("div")):o.appendChild(r);return o.appendChild(a[i]),e.appendChild(o),s}},"interactive"===Cn.readyState||"complete"===Cn.readyState?(Xi=!1,E(Pn)(!0)):(Zi=Ci(!0,!1),Xi=!0,Cn.addEventListener(void 0!==Cn.onmousewheel?"mousewheel":"DOMMouseScroll",function Jn(e){Xi=!1,Cn.removeEventListener(e.type,Jn,!1)},!1),Cn.addEventListener("DOMContentLoaded",E(Pn.bind(null,!1)),!1))}(window.opera&&window.opera.scriptStorage);